(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Kl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function BT(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),t}var If={exports:{}},Il={},Cf={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function WT(){if(Jy)return ut;Jy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,I={};function S(O,H,K){this.props=O,this.context=H,this.refs=I,this.updater=K||k}S.prototype.isReactComponent={},S.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},S.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function N(){}N.prototype=S.prototype;function V(O,H,K){this.props=O,this.context=H,this.refs=I,this.updater=K||k}var j=V.prototype=new N;j.constructor=V,P(j,S.prototype),j.isPureReactComponent=!0;var ee=Array.isArray,$=Object.prototype.hasOwnProperty,fe={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function C(O,H,K){var Q,ie={},Pe=null,q=null;if(H!=null)for(Q in H.ref!==void 0&&(q=H.ref),H.key!==void 0&&(Pe=""+H.key),H)$.call(H,Q)&&!b.hasOwnProperty(Q)&&(ie[Q]=H[Q]);var De=arguments.length-2;if(De===1)ie.children=K;else if(1<De){for(var oe=Array(De),ze=0;ze<De;ze++)oe[ze]=arguments[ze+2];ie.children=oe}if(O&&O.defaultProps)for(Q in De=O.defaultProps,De)ie[Q]===void 0&&(ie[Q]=De[Q]);return{$$typeof:n,type:O,key:Pe,ref:q,props:ie,_owner:fe.current}}function x(O,H){return{$$typeof:n,type:O.type,key:H,ref:O.ref,props:O.props,_owner:O._owner}}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function M(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return H[K]})}var U=/\/+/g;function A(O,H){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):H.toString(36)}function pe(O,H,K,Q,ie){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var q=!1;if(O===null)q=!0;else switch(Pe){case"string":case"number":q=!0;break;case"object":switch(O.$$typeof){case n:case e:q=!0}}if(q)return q=O,ie=ie(q),O=Q===""?"."+A(q,0):Q,ee(ie)?(K="",O!=null&&(K=O.replace(U,"$&/")+"/"),pe(ie,H,K,"",function(ze){return ze})):ie!=null&&(D(ie)&&(ie=x(ie,K+(!ie.key||q&&q.key===ie.key?"":(""+ie.key).replace(U,"$&/")+"/")+O)),H.push(ie)),1;if(q=0,Q=Q===""?".":Q+":",ee(O))for(var De=0;De<O.length;De++){Pe=O[De];var oe=Q+A(Pe,De);q+=pe(Pe,H,K,oe,ie)}else if(oe=w(O),typeof oe=="function")for(O=oe.call(O),De=0;!(Pe=O.next()).done;)Pe=Pe.value,oe=Q+A(Pe,De++),q+=pe(Pe,H,K,oe,ie);else if(Pe==="object")throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return q}function he(O,H,K){if(O==null)return O;var Q=[],ie=0;return pe(O,Q,"","",function(Pe){return H.call(K,Pe,ie++)}),Q}function ge(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var ve={current:null},J={transition:null},ye={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:J,ReactCurrentOwner:fe};return ut.Children={map:he,forEach:function(O,H,K){he(O,function(){H.apply(this,arguments)},K)},count:function(O){var H=0;return he(O,function(){H++}),H},toArray:function(O){return he(O,function(H){return H})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ut.Component=S,ut.Fragment=t,ut.Profiler=o,ut.PureComponent=V,ut.StrictMode=i,ut.Suspense=f,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,ut.cloneElement=function(O,H,K){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Q=P({},O.props),ie=O.key,Pe=O.ref,q=O._owner;if(H!=null){if(H.ref!==void 0&&(Pe=H.ref,q=fe.current),H.key!==void 0&&(ie=""+H.key),O.type&&O.type.defaultProps)var De=O.type.defaultProps;for(oe in H)$.call(H,oe)&&!b.hasOwnProperty(oe)&&(Q[oe]=H[oe]===void 0&&De!==void 0?De[oe]:H[oe])}var oe=arguments.length-2;if(oe===1)Q.children=K;else if(1<oe){De=Array(oe);for(var ze=0;ze<oe;ze++)De[ze]=arguments[ze+2];Q.children=De}return{$$typeof:n,type:O.type,key:ie,ref:Pe,props:Q,_owner:q}},ut.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},ut.createElement=C,ut.createFactory=function(O){var H=C.bind(null,O);return H.type=O,H},ut.createRef=function(){return{current:null}},ut.forwardRef=function(O){return{$$typeof:d,render:O}},ut.isValidElement=D,ut.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ge}},ut.memo=function(O,H){return{$$typeof:m,type:O,compare:H===void 0?null:H}},ut.startTransition=function(O){var H=J.transition;J.transition={};try{O()}finally{J.transition=H}},ut.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},ut.useCallback=function(O,H){return ve.current.useCallback(O,H)},ut.useContext=function(O){return ve.current.useContext(O)},ut.useDebugValue=function(){},ut.useDeferredValue=function(O){return ve.current.useDeferredValue(O)},ut.useEffect=function(O,H){return ve.current.useEffect(O,H)},ut.useId=function(){return ve.current.useId()},ut.useImperativeHandle=function(O,H,K){return ve.current.useImperativeHandle(O,H,K)},ut.useInsertionEffect=function(O,H){return ve.current.useInsertionEffect(O,H)},ut.useLayoutEffect=function(O,H){return ve.current.useLayoutEffect(O,H)},ut.useMemo=function(O,H){return ve.current.useMemo(O,H)},ut.useReducer=function(O,H,K){return ve.current.useReducer(O,H,K)},ut.useRef=function(O){return ve.current.useRef(O)},ut.useState=function(O){return ve.current.useState(O)},ut.useSyncExternalStore=function(O,H,K){return ve.current.useSyncExternalStore(O,H,K)},ut.useTransition=function(){return ve.current.useTransition()},ut.version="18.2.0",ut}var Xy;function Ur(){return Xy||(Xy=1,Cf.exports=WT()),Cf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function HT(){if(Zy)return Il;Zy=1;var n=Ur(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,m){var v,E={},w=null,k=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(k=f.ref);for(v in f)i.call(f,v)&&!a.hasOwnProperty(v)&&(E[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)E[v]===void 0&&(E[v]=f[v]);return{$$typeof:e,type:d,key:w,ref:k,props:E,_owner:o.current}}return Il.Fragment=t,Il.jsx=c,Il.jsxs=c,Il}var ev;function uo(){return ev||(ev=1,If.exports=HT()),If.exports}var Y=uo(),G=Ur();const rr=Kl(G);var Ac={},Pf={exports:{}},zn={},Af={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function qT(){return tv||(tv=1,function(n){function e(J,ye){var O=J.length;J.push(ye);e:for(;0<O;){var H=O-1>>>1,K=J[H];if(0<o(K,ye))J[H]=ye,J[O]=K,O=H;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var ye=J[0],O=J.pop();if(O!==ye){J[0]=O;e:for(var H=0,K=J.length,Q=K>>>1;H<Q;){var ie=2*(H+1)-1,Pe=J[ie],q=ie+1,De=J[q];if(0>o(Pe,O))q<K&&0>o(De,Pe)?(J[H]=De,J[q]=O,H=q):(J[H]=Pe,J[ie]=O,H=ie);else if(q<K&&0>o(De,O))J[H]=De,J[q]=O,H=q;else break e}}return ye}function o(J,ye){var O=J.sortIndex-ye.sortIndex;return O!==0?O:J.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],m=[],v=1,E=null,w=3,k=!1,P=!1,I=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(J){for(var ye=t(m);ye!==null;){if(ye.callback===null)i(m);else if(ye.startTime<=J)i(m),ye.sortIndex=ye.expirationTime,e(f,ye);else break;ye=t(m)}}function ee(J){if(I=!1,j(J),!P)if(t(f)!==null)P=!0,ge($);else{var ye=t(m);ye!==null&&ve(ee,ye.startTime-J)}}function $(J,ye){P=!1,I&&(I=!1,N(C),C=-1),k=!0;var O=w;try{for(j(ye),E=t(f);E!==null&&(!(E.expirationTime>ye)||J&&!M());){var H=E.callback;if(typeof H=="function"){E.callback=null,w=E.priorityLevel;var K=H(E.expirationTime<=ye);ye=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(f)&&i(f),j(ye)}else i(f);E=t(f)}if(E!==null)var Q=!0;else{var ie=t(m);ie!==null&&ve(ee,ie.startTime-ye),Q=!1}return Q}finally{E=null,w=O,k=!1}}var fe=!1,b=null,C=-1,x=5,D=-1;function M(){return!(n.unstable_now()-D<x)}function U(){if(b!==null){var J=n.unstable_now();D=J;var ye=!0;try{ye=b(!0,J)}finally{ye?A():(fe=!1,b=null)}}else fe=!1}var A;if(typeof V=="function")A=function(){V(U)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,he=pe.port2;pe.port1.onmessage=U,A=function(){he.postMessage(null)}}else A=function(){S(U,0)};function ge(J){b=J,fe||(fe=!0,A())}function ve(J,ye){C=S(function(){J(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){P||k||(P=!0,ge($))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(J){switch(w){case 1:case 2:case 3:var ye=3;break;default:ye=w}var O=w;w=ye;try{return J()}finally{w=O}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,ye){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var O=w;w=J;try{return ye()}finally{w=O}},n.unstable_scheduleCallback=function(J,ye,O){var H=n.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,J){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=O+K,J={id:v++,callback:ye,priorityLevel:J,startTime:O,expirationTime:K,sortIndex:-1},O>H?(J.sortIndex=O,e(m,J),t(f)===null&&J===t(m)&&(I?(N(C),C=-1):I=!0,ve(ee,O-H))):(J.sortIndex=K,e(f,J),P||k||(P=!0,ge($))),J},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(J){var ye=w;return function(){var O=w;w=ye;try{return J.apply(this,arguments)}finally{w=O}}}}(Rf)),Rf}var nv;function GT(){return nv||(nv=1,Af.exports=qT()),Af.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function KT(){if(rv)return zn;rv=1;var n=Ur(),e=GT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function w(r){return f.call(E,r)?!0:f.call(v,r)?!1:m.test(r)?E[r]=!0:(v[r]=!0,!1)}function k(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,s,l,h){if(s===null||typeof s>"u"||k(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function I(r,s,l,h,p,y,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){S[r]=new I(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];S[s]=new I(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){S[r]=new I(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){S[r]=new I(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){S[r]=new I(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){S[r]=new I(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){S[r]=new I(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){S[r]=new I(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){S[r]=new I(r,5,!1,r.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function V(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(N,V);S[s]=new I(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(N,V);S[s]=new I(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(N,V);S[s]=new I(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){S[r]=new I(r,1,!1,r.toLowerCase(),null,!1,!1)}),S.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){S[r]=new I(r,1,!1,r.toLowerCase(),null,!0,!0)});function j(r,s,l,h){var p=S.hasOwnProperty(s)?S[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,l,p,h)&&(l=null),h||p===null?w(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),fe=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),M=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),J=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=J&&r[J]||r["@@iterator"],typeof r=="function"?r:null)}var O=Object.assign,H;function K(r){if(H===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);H=s&&s[1]||""}return`
`+H+r}var Q=!1;function ie(r,s){if(!r||Q)return"";Q=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(se){var h=se}Reflect.construct(r,[],s)}else{try{s.call()}catch(se){h=se}r.call(s.prototype)}else{try{throw Error()}catch(se){h=se}r()}}catch(se){if(se&&h&&typeof se.stack=="string"){for(var p=se.stack.split(`
`),y=h.stack.split(`
`),T=p.length-1,F=y.length-1;1<=T&&0<=F&&p[T]!==y[F];)F--;for(;1<=T&&0<=F;T--,F--)if(p[T]!==y[F]){if(T!==1||F!==1)do if(T--,F--,0>F||p[T]!==y[F]){var z=`
`+p[T].replace(" at new "," at ");return r.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",r.displayName)),z}while(1<=T&&0<=F);break}}}finally{Q=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?K(r):""}function Pe(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=ie(r.type,!1),r;case 11:return r=ie(r.type.render,!1),r;case 1:return r=ie(r.type,!0),r;default:return""}}function q(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case fe:return"Portal";case x:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case pe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case M:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case U:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case he:return s=r.displayName||null,s!==null?s:q(r.type)||"Memo";case ge:s=r._payload,r=r._init;try{return q(r(s))}catch{}}return null}function De(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ze(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(r){var s=ze(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function He(r){r._valueTracker||(r._valueTracker=me(r))}function Le(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=ze(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function it(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Et(r,s){var l=s.checked;return O({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Je(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=oe(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ft(r,s){s=s.checked,s!=null&&j(r,"checked",s,!1)}function nt(r,s){ft(r,s);var l=oe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?St(r,s.type,l):s.hasOwnProperty("defaultValue")&&St(r,s.type,oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Pt(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function St(r,s,l){(s!=="number"||it(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ot=Array.isArray;function Ft(r,s,l,h){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+oe(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function _n(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return O({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function jt(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(ot(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:oe(l)}}function qe(r,s){var l=oe(s.value),h=oe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function lt(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function pt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?pt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var W,le=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,p)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(W=W||document.createElement("div"),W.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=W.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function re(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];Object.keys(Ie).forEach(function(r){ke.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Ie[s]=Ie[r]})});function Me(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Ie.hasOwnProperty(r)&&Ie[r]?(""+s).trim():s+"px"}function Se(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Me(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var Te=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ue(r,s){if(s){if(Te[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ce(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ne(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var de=null,we=null,Oe=null;function Ke(r){if(r=ul(r)){if(typeof de!="function")throw Error(t(280));var s=r.stateNode;s&&(s=$u(s),de(r.stateNode,r.type,s))}}function Xe(r){we?Oe?Oe.push(r):Oe=[r]:we=r}function mt(){if(we){var r=we,s=Oe;if(Oe=we=null,Ke(r),s)for(r=0;r<s.length;r++)Ke(s[r])}}function _t(r,s){return r(s)}function qn(){}var Qt=!1;function Gn(r,s,l){if(Qt)return r(s,l);Qt=!0;try{return _t(r,s,l)}finally{Qt=!1,(we!==null||Oe!==null)&&(qn(),mt())}}function Ut(r,s){var l=r.stateNode;if(l===null)return null;var h=$u(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var _o=!1;if(d)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){_o=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{_o=!1}function As(r,s,l,h,p,y,T,F,z){var se=Array.prototype.slice.call(arguments,3);try{s.apply(l,se)}catch(Ae){this.onError(Ae)}}var Rs=!1,wo=null,_r=!1,Ba=null,Jh={onError:function(r){Rs=!0,wo=r}};function Eo(r,s,l,h,p,y,T,F,z){Rs=!1,wo=null,As.apply(Jh,arguments)}function fu(r,s,l,h,p,y,T,F,z){if(Eo.apply(this,arguments),Rs){if(Rs){var se=wo;Rs=!1,wo=null}else throw Error(t(198));_r||(_r=!0,Ba=se)}}function wr(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function ks(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Er(r){if(wr(r)!==r)throw Error(t(188))}function pu(r){var s=r.alternate;if(!s){if(s=wr(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Er(p),r;if(y===h)return Er(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var T=!1,F=p.child;F;){if(F===l){T=!0,l=p,h=y;break}if(F===h){T=!0,h=p,l=y;break}F=F.sibling}if(!T){for(F=y.child;F;){if(F===l){T=!0,l=y,h=p;break}if(F===h){T=!0,h=y,l=p;break}F=F.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function Wa(r){return r=pu(r),r!==null?So(r):null}function So(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=So(r);if(s!==null)return s;r=r.sibling}return null}var To=e.unstable_scheduleCallback,Ha=e.unstable_cancelCallback,mu=e.unstable_shouldYield,Xh=e.unstable_requestPaint,kt=e.unstable_now,gu=e.unstable_getCurrentPriorityLevel,xs=e.unstable_ImmediatePriority,Di=e.unstable_UserBlockingPriority,ir=e.unstable_NormalPriority,qa=e.unstable_LowPriority,yu=e.unstable_IdlePriority,bs=null,Kn=null;function vu(r){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(bs,r,void 0,(r.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:wu,Ga=Math.log,_u=Math.LN2;function wu(r){return r>>>=0,r===0?32:31-(Ga(r)/_u|0)|0}var Io=64,Co=4194304;function Oi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ds(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,y=r.pingedLanes,T=l&268435455;if(T!==0){var F=T&~p;F!==0?h=Oi(F):(y&=T,y!==0&&(h=Oi(y)))}else T=l&~p,T!==0?h=Oi(T):y!==0&&(h=Oi(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&p)===0&&(p=h&-h,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-xn(s),p=1<<l,h|=r[l],s&=~p;return h}function Zh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var T=31-xn(y),F=1<<T,z=p[T];z===-1?((F&l)===0||(F&h)!==0)&&(p[T]=Zh(F,s)):z<=s&&(r.expiredLanes|=F),y&=~F}}function Qn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Os(){var r=Io;return Io<<=1,(Io&4194240)===0&&(Io=64),r}function Ni(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Li(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-xn(s),r[s]=l}function Rt(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-xn(l),y=1<<p;s[p]=0,h[p]=-1,r[p]=-1,l&=~y}}function Mi(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-xn(l),p=1<<h;p&s|r[h]&s&&(r[h]|=s),l&=~p}}var dt=0;function Vi(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Eu,Po,Su,Tu,Iu,Ka=!1,Br=[],fn=null,Sr=null,Tr=null,Fi=new Map,sr=new Map,Wr=[],ed="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cu(r,s){switch(r){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Fi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(s.pointerId)}}function Nn(r,s,l,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},s!==null&&(s=ul(s),s!==null&&Po(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function td(r,s,l,h,p){switch(s){case"focusin":return fn=Nn(fn,r,s,l,h,p),!0;case"dragenter":return Sr=Nn(Sr,r,s,l,h,p),!0;case"mouseover":return Tr=Nn(Tr,r,s,l,h,p),!0;case"pointerover":var y=p.pointerId;return Fi.set(y,Nn(Fi.get(y)||null,r,s,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,sr.set(y,Nn(sr.get(y)||null,r,s,l,h,p)),!0}return!1}function Pu(r){var s=Fs(r.target);if(s!==null){var l=wr(s);if(l!==null){if(s=l.tag,s===13){if(s=ks(l),s!==null){r.blockedOn=s,Iu(r.priority,function(){Su(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function si(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Ao(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);be=h,l.target.dispatchEvent(h),be=null}else return s=ul(l),s!==null&&Po(s),r.blockedOn=l,!1;s.shift()}return!0}function Ns(r,s,l){si(r)&&l.delete(s)}function Au(){Ka=!1,fn!==null&&si(fn)&&(fn=null),Sr!==null&&si(Sr)&&(Sr=null),Tr!==null&&si(Tr)&&(Tr=null),Fi.forEach(Ns),sr.forEach(Ns)}function Ir(r,s){r.blockedOn===s&&(r.blockedOn=null,Ka||(Ka=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Au)))}function Cr(r){function s(p){return Ir(p,r)}if(0<Br.length){Ir(Br[0],r);for(var l=1;l<Br.length;l++){var h=Br[l];h.blockedOn===r&&(h.blockedOn=null)}}for(fn!==null&&Ir(fn,r),Sr!==null&&Ir(Sr,r),Tr!==null&&Ir(Tr,r),Fi.forEach(s),sr.forEach(s),l=0;l<Wr.length;l++)h=Wr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Wr.length&&(l=Wr[0],l.blockedOn===null);)Pu(l),l.blockedOn===null&&Wr.shift()}var oi=ee.ReactCurrentBatchConfig,ji=!0;function Lt(r,s,l,h){var p=dt,y=oi.transition;oi.transition=null;try{dt=1,Qa(r,s,l,h)}finally{dt=p,oi.transition=y}}function nd(r,s,l,h){var p=dt,y=oi.transition;oi.transition=null;try{dt=4,Qa(r,s,l,h)}finally{dt=p,oi.transition=y}}function Qa(r,s,l,h){if(ji){var p=Ao(r,s,l,h);if(p===null)fd(r,s,h,Ls,l),Cu(r,h);else if(td(p,r,s,l,h))h.stopPropagation();else if(Cu(r,h),s&4&&-1<ed.indexOf(r)){for(;p!==null;){var y=ul(p);if(y!==null&&Eu(y),y=Ao(r,s,l,h),y===null&&fd(r,s,h,Ls,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else fd(r,s,h,null,l)}}var Ls=null;function Ao(r,s,l,h){if(Ls=null,r=ne(h),r=Fs(r),r!==null)if(s=wr(r),s===null)r=null;else if(l=s.tag,l===13){if(r=ks(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ls=r,null}function Ya(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gu()){case xs:return 1;case Di:return 4;case ir:case qa:return 16;case yu:return 536870912;default:return 16}default:return 16}}var Yn=null,Ro=null,Ln=null;function Ja(){if(Ln)return Ln;var r,s=Ro,l=s.length,h,p="value"in Yn?Yn.value:Yn.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var T=l-r;for(h=1;h<=T&&s[l-h]===p[y-h];h++);return Ln=p.slice(r,1<h?1-h:void 0)}function ko(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Hr(){return!0}function Xa(){return!1}function pn(r){function s(l,h,p,y,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var F in r)r.hasOwnProperty(F)&&(l=r[F],this[F]=l?l(y):y[F]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Hr:Xa,this.isPropagationStopped=Xa,this}return O(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),s}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=pn(Pr),qr=O({},Pr,{view:0,detail:0}),rd=pn(qr),bo,ai,Ui,Ms=O({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ui&&(Ui&&r.type==="mousemove"?(bo=r.screenX-Ui.screenX,ai=r.screenY-Ui.screenY):ai=bo=0,Ui=r),bo)},movementY:function(r){return"movementY"in r?r.movementY:ai}}),Do=pn(Ms),Za=O({},Ms,{dataTransfer:0}),Ru=pn(Za),Oo=O({},qr,{relatedTarget:0}),No=pn(Oo),ku=O({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),li=pn(ku),xu=O({},Pr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),bu=pn(xu),Du=O({},Pr,{data:0}),el=pn(Du),Lo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Ou[r])?!!s[r]:!1}function Gr(){return Nu}var u=O({},qr,{key:function(r){if(r.key){var s=Lo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ko(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(r){return r.type==="keypress"?ko(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ko(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=pn(u),_=O({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=pn(_),X=O({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),ae=pn(X),Ne=O({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),At=pn(Ne),en=O({},Ms,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gt=pn(en),on=[9,13,27,32],Yt=d&&"CompositionEvent"in window,or=null;d&&"documentMode"in document&&(or=document.documentMode);var Jn=d&&"TextEvent"in window&&!or,Vs=d&&(!Yt||or&&8<or&&11>=or),Mo=" ",Wm=!1;function Hm(r,s){switch(r){case"keyup":return on.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Vo=!1;function US(r,s){switch(r){case"compositionend":return qm(s);case"keypress":return s.which!==32?null:(Wm=!0,Mo);case"textInput":return r=s.data,r===Mo&&Wm?null:r;default:return null}}function zS(r,s){if(Vo)return r==="compositionend"||!Yt&&Hm(r,s)?(r=Ja(),Ln=Ro=Yn=null,Vo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vs&&s.locale!=="ko"?null:s.data;default:return null}}var $S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!$S[r.type]:s==="textarea"}function Km(r,s,l,h){Xe(h),s=ju(s,"onChange"),0<s.length&&(l=new xo("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var tl=null,nl=null;function BS(r){dg(r,0)}function Lu(r){var s=$o(r);if(Le(s))return r}function WS(r,s){if(r==="change")return s}var Qm=!1;if(d){var id;if(d){var sd="oninput"in document;if(!sd){var Ym=document.createElement("div");Ym.setAttribute("oninput","return;"),sd=typeof Ym.oninput=="function"}id=sd}else id=!1;Qm=id&&(!document.documentMode||9<document.documentMode)}function Jm(){tl&&(tl.detachEvent("onpropertychange",Xm),nl=tl=null)}function Xm(r){if(r.propertyName==="value"&&Lu(nl)){var s=[];Km(s,nl,r,ne(r)),Gn(BS,s)}}function HS(r,s,l){r==="focusin"?(Jm(),tl=s,nl=l,tl.attachEvent("onpropertychange",Xm)):r==="focusout"&&Jm()}function qS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Lu(nl)}function GS(r,s){if(r==="click")return Lu(s)}function KS(r,s){if(r==="input"||r==="change")return Lu(s)}function QS(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ar=typeof Object.is=="function"?Object.is:QS;function rl(r,s){if(Ar(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!Ar(r[p],s[p]))return!1}return!0}function Zm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function eg(r,s){var l=Zm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zm(l)}}function tg(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?tg(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ng(){for(var r=window,s=it();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=it(r.document)}return s}function od(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function YS(r){var s=ng(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&tg(l.ownerDocument.documentElement,l)){if(h!==null&&od(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!r.extend&&y>h&&(p=h,h=y,y=p),p=eg(l,y);var T=eg(l,h);p&&T&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),y>h?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var JS=d&&"documentMode"in document&&11>=document.documentMode,Fo=null,ad=null,il=null,ld=!1;function rg(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ld||Fo==null||Fo!==it(h)||(h=Fo,"selectionStart"in h&&od(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),il&&rl(il,h)||(il=h,h=ju(ad,"onSelect"),0<h.length&&(s=new xo("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=Fo)))}function Mu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var jo={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},ud={},ig={};d&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Vu(r){if(ud[r])return ud[r];if(!jo[r])return r;var s=jo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in ig)return ud[r]=s[l];return r}var sg=Vu("animationend"),og=Vu("animationiteration"),ag=Vu("animationstart"),lg=Vu("transitionend"),ug=new Map,cg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(r,s){ug.set(r,s),a(s,[r])}for(var cd=0;cd<cg.length;cd++){var hd=cg[cd],XS=hd.toLowerCase(),ZS=hd[0].toUpperCase()+hd.slice(1);zi(XS,"on"+ZS)}zi(sg,"onAnimationEnd"),zi(og,"onAnimationIteration"),zi(ag,"onAnimationStart"),zi("dblclick","onDoubleClick"),zi("focusin","onFocus"),zi("focusout","onBlur"),zi(lg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eT=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function hg(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,fu(h,s,void 0,r),r.currentTarget=null}function dg(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var T=h.length-1;0<=T;T--){var F=h[T],z=F.instance,se=F.currentTarget;if(F=F.listener,z!==y&&p.isPropagationStopped())break e;hg(p,F,se),y=z}else for(T=0;T<h.length;T++){if(F=h[T],z=F.instance,se=F.currentTarget,F=F.listener,z!==y&&p.isPropagationStopped())break e;hg(p,F,se),y=z}}}if(_r)throw r=Ba,_r=!1,Ba=null,r}function bt(r,s){var l=s[_d];l===void 0&&(l=s[_d]=new Set);var h=r+"__bubble";l.has(h)||(fg(s,r,2,!1),l.add(h))}function dd(r,s,l){var h=0;s&&(h|=4),fg(l,r,h,s)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function ol(r){if(!r[Fu]){r[Fu]=!0,i.forEach(function(l){l!=="selectionchange"&&(eT.has(l)||dd(l,!1,r),dd(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Fu]||(s[Fu]=!0,dd("selectionchange",!1,s))}}function fg(r,s,l,h){switch(Ya(s)){case 1:var p=Lt;break;case 4:p=nd;break;default:p=Qa}l=p.bind(null,s,l,r),p=void 0,!_o||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function fd(r,s,l,h,p){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var F=h.stateNode.containerInfo;if(F===p||F.nodeType===8&&F.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var z=T.tag;if((z===3||z===4)&&(z=T.stateNode.containerInfo,z===p||z.nodeType===8&&z.parentNode===p))return;T=T.return}for(;F!==null;){if(T=Fs(F),T===null)return;if(z=T.tag,z===5||z===6){h=y=T;continue e}F=F.parentNode}}h=h.return}Gn(function(){var se=y,Ae=ne(l),Re=[];e:{var Ce=ug.get(r);if(Ce!==void 0){var Ve=xo,$e=r;switch(r){case"keypress":if(ko(l)===0)break e;case"keydown":case"keyup":Ve=g;break;case"focusin":$e="focus",Ve=No;break;case"focusout":$e="blur",Ve=No;break;case"beforeblur":case"afterblur":Ve=No;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Do;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=ae;break;case sg:case og:case ag:Ve=li;break;case lg:Ve=At;break;case"scroll":Ve=rd;break;case"wheel":Ve=gt;break;case"copy":case"cut":case"paste":Ve=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=R}var Be=(s&4)!==0,qt=!Be&&r==="scroll",Z=Be?Ce!==null?Ce+"Capture":null:Ce;Be=[];for(var B=se,te;B!==null;){te=B;var xe=te.stateNode;if(te.tag===5&&xe!==null&&(te=xe,Z!==null&&(xe=Ut(B,Z),xe!=null&&Be.push(al(B,xe,te)))),qt)break;B=B.return}0<Be.length&&(Ce=new Ve(Ce,$e,null,l,Ae),Re.push({event:Ce,listeners:Be}))}}if((s&7)===0){e:{if(Ce=r==="mouseover"||r==="pointerover",Ve=r==="mouseout"||r==="pointerout",Ce&&l!==be&&($e=l.relatedTarget||l.fromElement)&&(Fs($e)||$e[ui]))break e;if((Ve||Ce)&&(Ce=Ae.window===Ae?Ae:(Ce=Ae.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ve?($e=l.relatedTarget||l.toElement,Ve=se,$e=$e?Fs($e):null,$e!==null&&(qt=wr($e),$e!==qt||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Ve=null,$e=se),Ve!==$e)){if(Be=Do,xe="onMouseLeave",Z="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Be=R,xe="onPointerLeave",Z="onPointerEnter",B="pointer"),qt=Ve==null?Ce:$o(Ve),te=$e==null?Ce:$o($e),Ce=new Be(xe,B+"leave",Ve,l,Ae),Ce.target=qt,Ce.relatedTarget=te,xe=null,Fs(Ae)===se&&(Be=new Be(Z,B+"enter",$e,l,Ae),Be.target=te,Be.relatedTarget=qt,xe=Be),qt=xe,Ve&&$e)t:{for(Be=Ve,Z=$e,B=0,te=Be;te;te=Uo(te))B++;for(te=0,xe=Z;xe;xe=Uo(xe))te++;for(;0<B-te;)Be=Uo(Be),B--;for(;0<te-B;)Z=Uo(Z),te--;for(;B--;){if(Be===Z||Z!==null&&Be===Z.alternate)break t;Be=Uo(Be),Z=Uo(Z)}Be=null}else Be=null;Ve!==null&&pg(Re,Ce,Ve,Be,!1),$e!==null&&qt!==null&&pg(Re,qt,$e,Be,!0)}}e:{if(Ce=se?$o(se):window,Ve=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ce.type==="file")var We=WS;else if(Gm(Ce))if(Qm)We=KS;else{We=qS;var Qe=HS}else(Ve=Ce.nodeName)&&Ve.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(We=GS);if(We&&(We=We(r,se))){Km(Re,We,l,Ae);break e}Qe&&Qe(r,Ce,se),r==="focusout"&&(Qe=Ce._wrapperState)&&Qe.controlled&&Ce.type==="number"&&St(Ce,"number",Ce.value)}switch(Qe=se?$o(se):window,r){case"focusin":(Gm(Qe)||Qe.contentEditable==="true")&&(Fo=Qe,ad=se,il=null);break;case"focusout":il=ad=Fo=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,rg(Re,l,Ae);break;case"selectionchange":if(JS)break;case"keydown":case"keyup":rg(Re,l,Ae)}var Ye;if(Yt)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Vo?Hm(r,l)&&(tt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(tt="onCompositionStart");tt&&(Vs&&l.locale!=="ko"&&(Vo||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Vo&&(Ye=Ja()):(Yn=Ae,Ro="value"in Yn?Yn.value:Yn.textContent,Vo=!0)),Qe=ju(se,tt),0<Qe.length&&(tt=new el(tt,r,null,l,Ae),Re.push({event:tt,listeners:Qe}),Ye?tt.data=Ye:(Ye=qm(l),Ye!==null&&(tt.data=Ye)))),(Ye=Jn?US(r,l):zS(r,l))&&(se=ju(se,"onBeforeInput"),0<se.length&&(Ae=new el("onBeforeInput","beforeinput",null,l,Ae),Re.push({event:Ae,listeners:se}),Ae.data=Ye))}dg(Re,s)})}function al(r,s,l){return{instance:r,listener:s,currentTarget:l}}function ju(r,s){for(var l=s+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Ut(r,l),y!=null&&h.unshift(al(r,y,p)),y=Ut(r,s),y!=null&&h.push(al(r,y,p))),r=r.return}return h}function Uo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function pg(r,s,l,h,p){for(var y=s._reactName,T=[];l!==null&&l!==h;){var F=l,z=F.alternate,se=F.stateNode;if(z!==null&&z===h)break;F.tag===5&&se!==null&&(F=se,p?(z=Ut(l,y),z!=null&&T.unshift(al(l,z,F))):p||(z=Ut(l,y),z!=null&&T.push(al(l,z,F)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var tT=/\r\n?/g,nT=/\u0000|\uFFFD/g;function mg(r){return(typeof r=="string"?r:""+r).replace(tT,`
`).replace(nT,"")}function Uu(r,s,l){if(s=mg(s),mg(r)!==s&&l)throw Error(t(425))}function zu(){}var pd=null,md=null;function gd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yd=typeof setTimeout=="function"?setTimeout:void 0,rT=typeof clearTimeout=="function"?clearTimeout:void 0,gg=typeof Promise=="function"?Promise:void 0,iT=typeof queueMicrotask=="function"?queueMicrotask:typeof gg<"u"?function(r){return gg.resolve(null).then(r).catch(sT)}:yd;function sT(r){setTimeout(function(){throw r})}function vd(r,s){var l=s,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),Cr(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Cr(s)}function $i(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function yg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Kr="__reactFiber$"+zo,ll="__reactProps$"+zo,ui="__reactContainer$"+zo,_d="__reactEvents$"+zo,oT="__reactListeners$"+zo,aT="__reactHandles$"+zo;function Fs(r){var s=r[Kr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[ui]||l[Kr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=yg(r);r!==null;){if(l=r[Kr])return l;r=yg(r)}return s}r=l,l=r.parentNode}return null}function ul(r){return r=r[Kr]||r[ui],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function $o(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function $u(r){return r[ll]||null}var wd=[],Bo=-1;function Bi(r){return{current:r}}function Dt(r){0>Bo||(r.current=wd[Bo],wd[Bo]=null,Bo--)}function xt(r,s){Bo++,wd[Bo]=r.current,r.current=s}var Wi={},wn=Bi(Wi),Mn=Bi(!1),js=Wi;function Wo(r,s){var l=r.type.contextTypes;if(!l)return Wi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function Vn(r){return r=r.childContextTypes,r!=null}function Bu(){Dt(Mn),Dt(wn)}function vg(r,s,l){if(wn.current!==Wi)throw Error(t(168));xt(wn,s),xt(Mn,l)}function _g(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,De(r)||"Unknown",p));return O({},l,h)}function Wu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Wi,js=wn.current,xt(wn,r),xt(Mn,Mn.current),!0}function wg(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=_g(r,s,js),h.__reactInternalMemoizedMergedChildContext=r,Dt(Mn),Dt(wn),xt(wn,r)):Dt(Mn),xt(Mn,l)}var ci=null,Hu=!1,Ed=!1;function Eg(r){ci===null?ci=[r]:ci.push(r)}function lT(r){Hu=!0,Eg(r)}function Hi(){if(!Ed&&ci!==null){Ed=!0;var r=0,s=dt;try{var l=ci;for(dt=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}ci=null,Hu=!1}catch(p){throw ci!==null&&(ci=ci.slice(r+1)),To(xs,Hi),p}finally{dt=s,Ed=!1}}return null}var Ho=[],qo=0,qu=null,Gu=0,ar=[],lr=0,Us=null,hi=1,di="";function zs(r,s){Ho[qo++]=Gu,Ho[qo++]=qu,qu=r,Gu=s}function Sg(r,s,l){ar[lr++]=hi,ar[lr++]=di,ar[lr++]=Us,Us=r;var h=hi;r=di;var p=32-xn(h)-1;h&=~(1<<p),l+=1;var y=32-xn(s)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,hi=1<<32-xn(s)+p|l<<p|h,di=y+r}else hi=1<<y|l<<p|h,di=r}function Sd(r){r.return!==null&&(zs(r,1),Sg(r,1,0))}function Td(r){for(;r===qu;)qu=Ho[--qo],Ho[qo]=null,Gu=Ho[--qo],Ho[qo]=null;for(;r===Us;)Us=ar[--lr],ar[lr]=null,di=ar[--lr],ar[lr]=null,hi=ar[--lr],ar[lr]=null}var Xn=null,Zn=null,Mt=!1,Rr=null;function Tg(r,s){var l=dr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function Ig(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Xn=r,Zn=$i(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Xn=r,Zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Us!==null?{id:hi,overflow:di}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=dr(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,Xn=r,Zn=null,!0):!1;default:return!1}}function Id(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Cd(r){if(Mt){var s=Zn;if(s){var l=s;if(!Ig(r,s)){if(Id(r))throw Error(t(418));s=$i(l.nextSibling);var h=Xn;s&&Ig(r,s)?Tg(h,l):(r.flags=r.flags&-4097|2,Mt=!1,Xn=r)}}else{if(Id(r))throw Error(t(418));r.flags=r.flags&-4097|2,Mt=!1,Xn=r}}}function Cg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Xn=r}function Ku(r){if(r!==Xn)return!1;if(!Mt)return Cg(r),Mt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!gd(r.type,r.memoizedProps)),s&&(s=Zn)){if(Id(r))throw Pg(),Error(t(418));for(;s;)Tg(r,s),s=$i(s.nextSibling)}if(Cg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){Zn=$i(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}Zn=null}}else Zn=Xn?$i(r.stateNode.nextSibling):null;return!0}function Pg(){for(var r=Zn;r;)r=$i(r.nextSibling)}function Go(){Zn=Xn=null,Mt=!1}function Pd(r){Rr===null?Rr=[r]:Rr.push(r)}var uT=ee.ReactCurrentBatchConfig;function kr(r,s){if(r&&r.defaultProps){s=O({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}var Qu=Bi(null),Yu=null,Ko=null,Ad=null;function Rd(){Ad=Ko=Yu=null}function kd(r){var s=Qu.current;Dt(Qu),r._currentValue=s}function xd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Qo(r,s){Yu=r,Ad=Ko=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Fn=!0),r.firstContext=null)}function ur(r){var s=r._currentValue;if(Ad!==r)if(r={context:r,memoizedValue:s,next:null},Ko===null){if(Yu===null)throw Error(t(308));Ko=r,Yu.dependencies={lanes:0,firstContext:r}}else Ko=Ko.next=r;return s}var $s=null;function bd(r){$s===null?$s=[r]:$s.push(r)}function Ag(r,s,l,h){var p=s.interleaved;return p===null?(l.next=l,bd(s)):(l.next=p.next,p.next=l),s.interleaved=l,fi(r,h)}function fi(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var qi=!1;function Dd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function pi(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Gi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,fi(r,l)}return p=h.interleaved,p===null?(s.next=s,bd(h)):(s.next=p.next,p.next=s),h.interleaved=s,fi(r,l)}function Ju(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Mi(r,l)}}function kg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Xu(r,s,l,h){var p=r.updateQueue;qi=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,F=p.shared.pending;if(F!==null){p.shared.pending=null;var z=F,se=z.next;z.next=null,T===null?y=se:T.next=se,T=z;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,F=Ae.lastBaseUpdate,F!==T&&(F===null?Ae.firstBaseUpdate=se:F.next=se,Ae.lastBaseUpdate=z))}if(y!==null){var Re=p.baseState;T=0,Ae=se=z=null,F=y;do{var Ce=F.lane,Ve=F.eventTime;if((h&Ce)===Ce){Ae!==null&&(Ae=Ae.next={eventTime:Ve,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var $e=r,Be=F;switch(Ce=s,Ve=l,Be.tag){case 1:if($e=Be.payload,typeof $e=="function"){Re=$e.call(Ve,Re,Ce);break e}Re=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Be.payload,Ce=typeof $e=="function"?$e.call(Ve,Re,Ce):$e,Ce==null)break e;Re=O({},Re,Ce);break e;case 2:qi=!0}}F.callback!==null&&F.lane!==0&&(r.flags|=64,Ce=p.effects,Ce===null?p.effects=[F]:Ce.push(F))}else Ve={eventTime:Ve,lane:Ce,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ae===null?(se=Ae=Ve,z=Re):Ae=Ae.next=Ve,T|=Ce;if(F=F.next,F===null){if(F=p.shared.pending,F===null)break;Ce=F,F=Ce.next,Ce.next=null,p.lastBaseUpdate=Ce,p.shared.pending=null}}while(!0);if(Ae===null&&(z=Re),p.baseState=z,p.firstBaseUpdate=se,p.lastBaseUpdate=Ae,s=p.shared.interleaved,s!==null){p=s;do T|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);Hs|=T,r.lanes=T,r.memoizedState=Re}}function xg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var bg=new n.Component().refs;function Od(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:O({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Zu={isMounted:function(r){return(r=r._reactInternals)?wr(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=On(),p=Ji(r),y=pi(h,p);y.payload=s,l!=null&&(y.callback=l),s=Gi(r,y,p),s!==null&&(Dr(s,r,p,h),Ju(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=On(),p=Ji(r),y=pi(h,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Gi(r,y,p),s!==null&&(Dr(s,r,p,h),Ju(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=On(),h=Ji(r),p=pi(l,h);p.tag=2,s!=null&&(p.callback=s),s=Gi(r,p,h),s!==null&&(Dr(s,r,h,l),Ju(s,r,h))}};function Dg(r,s,l,h,p,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):s.prototype&&s.prototype.isPureReactComponent?!rl(l,h)||!rl(p,y):!0}function Og(r,s,l){var h=!1,p=Wi,y=s.contextType;return typeof y=="object"&&y!==null?y=ur(y):(p=Vn(s)?js:wn.current,h=s.contextTypes,y=(h=h!=null)?Wo(r,p):Wi),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),s}function Ng(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&Zu.enqueueReplaceState(s,s.state,null)}function Nd(r,s,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs=bg,Dd(r);var y=s.contextType;typeof y=="object"&&y!==null?p.context=ur(y):(y=Vn(s)?js:wn.current,p.context=Wo(r,y)),p.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Od(r,s,y,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Zu.enqueueReplaceState(p,p.state,null),Xu(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function cl(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(T){var F=p.refs;F===bg&&(F=p.refs={}),T===null?delete F[y]:F[y]=T},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function ec(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Lg(r){var s=r._init;return s(r._payload)}function Mg(r){function s(Z,B){if(r){var te=Z.deletions;te===null?(Z.deletions=[B],Z.flags|=16):te.push(B)}}function l(Z,B){if(!r)return null;for(;B!==null;)s(Z,B),B=B.sibling;return null}function h(Z,B){for(Z=new Map;B!==null;)B.key!==null?Z.set(B.key,B):Z.set(B.index,B),B=B.sibling;return Z}function p(Z,B){return Z=Zi(Z,B),Z.index=0,Z.sibling=null,Z}function y(Z,B,te){return Z.index=te,r?(te=Z.alternate,te!==null?(te=te.index,te<B?(Z.flags|=2,B):te):(Z.flags|=2,B)):(Z.flags|=1048576,B)}function T(Z){return r&&Z.alternate===null&&(Z.flags|=2),Z}function F(Z,B,te,xe){return B===null||B.tag!==6?(B=vf(te,Z.mode,xe),B.return=Z,B):(B=p(B,te),B.return=Z,B)}function z(Z,B,te,xe){var We=te.type;return We===b?Ae(Z,B,te.props.children,xe,te.key):B!==null&&(B.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===ge&&Lg(We)===B.type)?(xe=p(B,te.props),xe.ref=cl(Z,B,te),xe.return=Z,xe):(xe=_c(te.type,te.key,te.props,null,Z.mode,xe),xe.ref=cl(Z,B,te),xe.return=Z,xe)}function se(Z,B,te,xe){return B===null||B.tag!==4||B.stateNode.containerInfo!==te.containerInfo||B.stateNode.implementation!==te.implementation?(B=_f(te,Z.mode,xe),B.return=Z,B):(B=p(B,te.children||[]),B.return=Z,B)}function Ae(Z,B,te,xe,We){return B===null||B.tag!==7?(B=Qs(te,Z.mode,xe,We),B.return=Z,B):(B=p(B,te),B.return=Z,B)}function Re(Z,B,te){if(typeof B=="string"&&B!==""||typeof B=="number")return B=vf(""+B,Z.mode,te),B.return=Z,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case $:return te=_c(B.type,B.key,B.props,null,Z.mode,te),te.ref=cl(Z,null,B),te.return=Z,te;case fe:return B=_f(B,Z.mode,te),B.return=Z,B;case ge:var xe=B._init;return Re(Z,xe(B._payload),te)}if(ot(B)||ye(B))return B=Qs(B,Z.mode,te,null),B.return=Z,B;ec(Z,B)}return null}function Ce(Z,B,te,xe){var We=B!==null?B.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return We!==null?null:F(Z,B,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case $:return te.key===We?z(Z,B,te,xe):null;case fe:return te.key===We?se(Z,B,te,xe):null;case ge:return We=te._init,Ce(Z,B,We(te._payload),xe)}if(ot(te)||ye(te))return We!==null?null:Ae(Z,B,te,xe,null);ec(Z,te)}return null}function Ve(Z,B,te,xe,We){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return Z=Z.get(te)||null,F(B,Z,""+xe,We);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case $:return Z=Z.get(xe.key===null?te:xe.key)||null,z(B,Z,xe,We);case fe:return Z=Z.get(xe.key===null?te:xe.key)||null,se(B,Z,xe,We);case ge:var Qe=xe._init;return Ve(Z,B,te,Qe(xe._payload),We)}if(ot(xe)||ye(xe))return Z=Z.get(te)||null,Ae(B,Z,xe,We,null);ec(B,xe)}return null}function $e(Z,B,te,xe){for(var We=null,Qe=null,Ye=B,tt=B=0,un=null;Ye!==null&&tt<te.length;tt++){Ye.index>tt?(un=Ye,Ye=null):un=Ye.sibling;var wt=Ce(Z,Ye,te[tt],xe);if(wt===null){Ye===null&&(Ye=un);break}r&&Ye&&wt.alternate===null&&s(Z,Ye),B=y(wt,B,tt),Qe===null?We=wt:Qe.sibling=wt,Qe=wt,Ye=un}if(tt===te.length)return l(Z,Ye),Mt&&zs(Z,tt),We;if(Ye===null){for(;tt<te.length;tt++)Ye=Re(Z,te[tt],xe),Ye!==null&&(B=y(Ye,B,tt),Qe===null?We=Ye:Qe.sibling=Ye,Qe=Ye);return Mt&&zs(Z,tt),We}for(Ye=h(Z,Ye);tt<te.length;tt++)un=Ve(Ye,Z,tt,te[tt],xe),un!==null&&(r&&un.alternate!==null&&Ye.delete(un.key===null?tt:un.key),B=y(un,B,tt),Qe===null?We=un:Qe.sibling=un,Qe=un);return r&&Ye.forEach(function(es){return s(Z,es)}),Mt&&zs(Z,tt),We}function Be(Z,B,te,xe){var We=ye(te);if(typeof We!="function")throw Error(t(150));if(te=We.call(te),te==null)throw Error(t(151));for(var Qe=We=null,Ye=B,tt=B=0,un=null,wt=te.next();Ye!==null&&!wt.done;tt++,wt=te.next()){Ye.index>tt?(un=Ye,Ye=null):un=Ye.sibling;var es=Ce(Z,Ye,wt.value,xe);if(es===null){Ye===null&&(Ye=un);break}r&&Ye&&es.alternate===null&&s(Z,Ye),B=y(es,B,tt),Qe===null?We=es:Qe.sibling=es,Qe=es,Ye=un}if(wt.done)return l(Z,Ye),Mt&&zs(Z,tt),We;if(Ye===null){for(;!wt.done;tt++,wt=te.next())wt=Re(Z,wt.value,xe),wt!==null&&(B=y(wt,B,tt),Qe===null?We=wt:Qe.sibling=wt,Qe=wt);return Mt&&zs(Z,tt),We}for(Ye=h(Z,Ye);!wt.done;tt++,wt=te.next())wt=Ve(Ye,Z,tt,wt.value,xe),wt!==null&&(r&&wt.alternate!==null&&Ye.delete(wt.key===null?tt:wt.key),B=y(wt,B,tt),Qe===null?We=wt:Qe.sibling=wt,Qe=wt);return r&&Ye.forEach(function($T){return s(Z,$T)}),Mt&&zs(Z,tt),We}function qt(Z,B,te,xe){if(typeof te=="object"&&te!==null&&te.type===b&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case $:e:{for(var We=te.key,Qe=B;Qe!==null;){if(Qe.key===We){if(We=te.type,We===b){if(Qe.tag===7){l(Z,Qe.sibling),B=p(Qe,te.props.children),B.return=Z,Z=B;break e}}else if(Qe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===ge&&Lg(We)===Qe.type){l(Z,Qe.sibling),B=p(Qe,te.props),B.ref=cl(Z,Qe,te),B.return=Z,Z=B;break e}l(Z,Qe);break}else s(Z,Qe);Qe=Qe.sibling}te.type===b?(B=Qs(te.props.children,Z.mode,xe,te.key),B.return=Z,Z=B):(xe=_c(te.type,te.key,te.props,null,Z.mode,xe),xe.ref=cl(Z,B,te),xe.return=Z,Z=xe)}return T(Z);case fe:e:{for(Qe=te.key;B!==null;){if(B.key===Qe)if(B.tag===4&&B.stateNode.containerInfo===te.containerInfo&&B.stateNode.implementation===te.implementation){l(Z,B.sibling),B=p(B,te.children||[]),B.return=Z,Z=B;break e}else{l(Z,B);break}else s(Z,B);B=B.sibling}B=_f(te,Z.mode,xe),B.return=Z,Z=B}return T(Z);case ge:return Qe=te._init,qt(Z,B,Qe(te._payload),xe)}if(ot(te))return $e(Z,B,te,xe);if(ye(te))return Be(Z,B,te,xe);ec(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,B!==null&&B.tag===6?(l(Z,B.sibling),B=p(B,te),B.return=Z,Z=B):(l(Z,B),B=vf(te,Z.mode,xe),B.return=Z,Z=B),T(Z)):l(Z,B)}return qt}var Yo=Mg(!0),Vg=Mg(!1),hl={},Qr=Bi(hl),dl=Bi(hl),fl=Bi(hl);function Bs(r){if(r===hl)throw Error(t(174));return r}function Ld(r,s){switch(xt(fl,s),xt(dl,r),xt(Qr,hl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:L(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=L(s,r)}Dt(Qr),xt(Qr,s)}function Jo(){Dt(Qr),Dt(dl),Dt(fl)}function Fg(r){Bs(fl.current);var s=Bs(Qr.current),l=L(s,r.type);s!==l&&(xt(dl,r),xt(Qr,l))}function Md(r){dl.current===r&&(Dt(Qr),Dt(dl))}var zt=Bi(0);function tc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vd=[];function Fd(){for(var r=0;r<Vd.length;r++)Vd[r]._workInProgressVersionPrimary=null;Vd.length=0}var nc=ee.ReactCurrentDispatcher,jd=ee.ReactCurrentBatchConfig,Ws=0,$t=null,tn=null,an=null,rc=!1,pl=!1,ml=0,cT=0;function En(){throw Error(t(321))}function Ud(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Ar(r[l],s[l]))return!1;return!0}function zd(r,s,l,h,p,y){if(Ws=y,$t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,nc.current=r===null||r.memoizedState===null?pT:mT,r=l(h,p),pl){y=0;do{if(pl=!1,ml=0,25<=y)throw Error(t(301));y+=1,an=tn=null,s.updateQueue=null,nc.current=gT,r=l(h,p)}while(pl)}if(nc.current=oc,s=tn!==null&&tn.next!==null,Ws=0,an=tn=$t=null,rc=!1,s)throw Error(t(300));return r}function $d(){var r=ml!==0;return ml=0,r}function Yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?$t.memoizedState=an=r:an=an.next=r,an}function cr(){if(tn===null){var r=$t.alternate;r=r!==null?r.memoizedState:null}else r=tn.next;var s=an===null?$t.memoizedState:an.next;if(s!==null)an=s,tn=r;else{if(r===null)throw Error(t(310));tn=r,r={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},an===null?$t.memoizedState=an=r:an=an.next=r}return an}function gl(r,s){return typeof s=="function"?s(r):s}function Bd(r){var s=cr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=tn,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var F=T=null,z=null,se=y;do{var Ae=se.lane;if((Ws&Ae)===Ae)z!==null&&(z=z.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),h=se.hasEagerState?se.eagerState:r(h,se.action);else{var Re={lane:Ae,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};z===null?(F=z=Re,T=h):z=z.next=Re,$t.lanes|=Ae,Hs|=Ae}se=se.next}while(se!==null&&se!==y);z===null?T=h:z.next=F,Ar(h,s.memoizedState)||(Fn=!0),s.memoizedState=h,s.baseState=T,s.baseQueue=z,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do y=p.lane,$t.lanes|=y,Hs|=y,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Wd(r){var s=cr(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do y=r(y,T.action),T=T.next;while(T!==p);Ar(y,s.memoizedState)||(Fn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function jg(){}function Ug(r,s){var l=$t,h=cr(),p=s(),y=!Ar(h.memoizedState,p);if(y&&(h.memoizedState=p,Fn=!0),h=h.queue,Hd(Bg.bind(null,l,h,r),[r]),h.getSnapshot!==s||y||an!==null&&an.memoizedState.tag&1){if(l.flags|=2048,yl(9,$g.bind(null,l,h,p,s),void 0,null),ln===null)throw Error(t(349));(Ws&30)!==0||zg(l,s,p)}return p}function zg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=$t.updateQueue,s===null?(s={lastEffect:null,stores:null},$t.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function $g(r,s,l,h){s.value=l,s.getSnapshot=h,Wg(s)&&Hg(r)}function Bg(r,s,l){return l(function(){Wg(s)&&Hg(r)})}function Wg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Ar(r,l)}catch{return!0}}function Hg(r){var s=fi(r,1);s!==null&&Dr(s,r,1,-1)}function qg(r){var s=Yr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:r},s.queue=r,r=r.dispatch=fT.bind(null,$t,r),[s.memoizedState,r]}function yl(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=$t.updateQueue,s===null?(s={lastEffect:null,stores:null},$t.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function Gg(){return cr().memoizedState}function ic(r,s,l,h){var p=Yr();$t.flags|=r,p.memoizedState=yl(1|s,l,void 0,h===void 0?null:h)}function sc(r,s,l,h){var p=cr();h=h===void 0?null:h;var y=void 0;if(tn!==null){var T=tn.memoizedState;if(y=T.destroy,h!==null&&Ud(h,T.deps)){p.memoizedState=yl(s,l,y,h);return}}$t.flags|=r,p.memoizedState=yl(1|s,l,y,h)}function Kg(r,s){return ic(8390656,8,r,s)}function Hd(r,s){return sc(2048,8,r,s)}function Qg(r,s){return sc(4,2,r,s)}function Yg(r,s){return sc(4,4,r,s)}function Jg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Xg(r,s,l){return l=l!=null?l.concat([r]):null,sc(4,4,Jg.bind(null,s,r),l)}function qd(){}function Zg(r,s){var l=cr();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ud(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function ey(r,s){var l=cr();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Ud(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function ty(r,s,l){return(Ws&21)===0?(r.baseState&&(r.baseState=!1,Fn=!0),r.memoizedState=l):(Ar(l,s)||(l=Os(),$t.lanes|=l,Hs|=l,r.baseState=!0),s)}function hT(r,s){var l=dt;dt=l!==0&&4>l?l:4,r(!0);var h=jd.transition;jd.transition={};try{r(!1),s()}finally{dt=l,jd.transition=h}}function ny(){return cr().memoizedState}function dT(r,s,l){var h=Ji(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},ry(r))iy(s,l);else if(l=Ag(r,s,l,h),l!==null){var p=On();Dr(l,r,h,p),sy(l,s,h)}}function fT(r,s,l){var h=Ji(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(ry(r))iy(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,F=y(T,l);if(p.hasEagerState=!0,p.eagerState=F,Ar(F,T)){var z=s.interleaved;z===null?(p.next=p,bd(s)):(p.next=z.next,z.next=p),s.interleaved=p;return}}catch{}finally{}l=Ag(r,s,p,h),l!==null&&(p=On(),Dr(l,r,h,p),sy(l,s,h))}}function ry(r){var s=r.alternate;return r===$t||s!==null&&s===$t}function iy(r,s){pl=rc=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function sy(r,s,l){if((l&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Mi(r,l)}}var oc={readContext:ur,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},pT={readContext:ur,useCallback:function(r,s){return Yr().memoizedState=[r,s===void 0?null:s],r},useContext:ur,useEffect:Kg,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,ic(4194308,4,Jg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return ic(4194308,4,r,s)},useInsertionEffect:function(r,s){return ic(4,2,r,s)},useMemo:function(r,s){var l=Yr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=Yr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=dT.bind(null,$t,r),[h.memoizedState,r]},useRef:function(r){var s=Yr();return r={current:r},s.memoizedState=r},useState:qg,useDebugValue:qd,useDeferredValue:function(r){return Yr().memoizedState=r},useTransition:function(){var r=qg(!1),s=r[0];return r=hT.bind(null,r[1]),Yr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=$t,p=Yr();if(Mt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),ln===null)throw Error(t(349));(Ws&30)!==0||zg(h,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Kg(Bg.bind(null,h,y,r),[r]),h.flags|=2048,yl(9,$g.bind(null,h,y,l,s),void 0,null),l},useId:function(){var r=Yr(),s=ln.identifierPrefix;if(Mt){var l=di,h=hi;l=(h&~(1<<32-xn(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=ml++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=cT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},mT={readContext:ur,useCallback:Zg,useContext:ur,useEffect:Hd,useImperativeHandle:Xg,useInsertionEffect:Qg,useLayoutEffect:Yg,useMemo:ey,useReducer:Bd,useRef:Gg,useState:function(){return Bd(gl)},useDebugValue:qd,useDeferredValue:function(r){var s=cr();return ty(s,tn.memoizedState,r)},useTransition:function(){var r=Bd(gl)[0],s=cr().memoizedState;return[r,s]},useMutableSource:jg,useSyncExternalStore:Ug,useId:ny,unstable_isNewReconciler:!1},gT={readContext:ur,useCallback:Zg,useContext:ur,useEffect:Hd,useImperativeHandle:Xg,useInsertionEffect:Qg,useLayoutEffect:Yg,useMemo:ey,useReducer:Wd,useRef:Gg,useState:function(){return Wd(gl)},useDebugValue:qd,useDeferredValue:function(r){var s=cr();return tn===null?s.memoizedState=r:ty(s,tn.memoizedState,r)},useTransition:function(){var r=Wd(gl)[0],s=cr().memoizedState;return[r,s]},useMutableSource:jg,useSyncExternalStore:Ug,useId:ny,unstable_isNewReconciler:!1};function Xo(r,s){try{var l="",h=s;do l+=Pe(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:p,digest:null}}function Gd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function Kd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var yT=typeof WeakMap=="function"?WeakMap:Map;function oy(r,s,l){l=pi(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){fc||(fc=!0,cf=h),Kd(r,s)},l}function ay(r,s,l){l=pi(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){Kd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Kd(r,s),typeof h!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function ly(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new yT;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),r=bT.bind(null,r,s,l),s.then(r,r))}function uy(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function cy(r,s,l,h,p){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=pi(-1,1),s.tag=2,Gi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var vT=ee.ReactCurrentOwner,Fn=!1;function Dn(r,s,l,h){s.child=r===null?Vg(s,null,l,h):Yo(s,r.child,l,h)}function hy(r,s,l,h,p){l=l.render;var y=s.ref;return Qo(s,p),h=zd(r,s,l,h,y,p),l=$d(),r!==null&&!Fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,mi(r,s,p)):(Mt&&l&&Sd(s),s.flags|=1,Dn(r,s,h,p),s.child)}function dy(r,s,l,h,p){if(r===null){var y=l.type;return typeof y=="function"&&!yf(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,fy(r,s,y,h,p)):(r=_c(l.type,null,h,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&p)===0){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:rl,l(T,h)&&r.ref===s.ref)return mi(r,s,p)}return s.flags|=1,r=Zi(y,h),r.ref=s.ref,r.return=s,s.child=r}function fy(r,s,l,h,p){if(r!==null){var y=r.memoizedProps;if(rl(y,h)&&r.ref===s.ref)if(Fn=!1,s.pendingProps=h=y,(r.lanes&p)!==0)(r.flags&131072)!==0&&(Fn=!0);else return s.lanes=r.lanes,mi(r,s,p)}return Qd(r,s,l,h,p)}function py(r,s,l){var h=s.pendingProps,p=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(ea,er),er|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,xt(ea,er),er|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,xt(ea,er),er|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,xt(ea,er),er|=h;return Dn(r,s,p,l),s.child}function my(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Qd(r,s,l,h,p){var y=Vn(l)?js:wn.current;return y=Wo(s,y),Qo(s,p),l=zd(r,s,l,h,y,p),h=$d(),r!==null&&!Fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,mi(r,s,p)):(Mt&&h&&Sd(s),s.flags|=1,Dn(r,s,l,p),s.child)}function gy(r,s,l,h,p){if(Vn(l)){var y=!0;Wu(s)}else y=!1;if(Qo(s,p),s.stateNode===null)lc(r,s),Og(s,l,h),Nd(s,l,h,p),h=!0;else if(r===null){var T=s.stateNode,F=s.memoizedProps;T.props=F;var z=T.context,se=l.contextType;typeof se=="object"&&se!==null?se=ur(se):(se=Vn(l)?js:wn.current,se=Wo(s,se));var Ae=l.getDerivedStateFromProps,Re=typeof Ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";Re||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==h||z!==se)&&Ng(s,T,h,se),qi=!1;var Ce=s.memoizedState;T.state=Ce,Xu(s,h,T,p),z=s.memoizedState,F!==h||Ce!==z||Mn.current||qi?(typeof Ae=="function"&&(Od(s,l,Ae,h),z=s.memoizedState),(F=qi||Dg(s,l,F,h,Ce,z,se))?(Re||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=z),T.props=h,T.state=z,T.context=se,h=F):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{T=s.stateNode,Rg(r,s),F=s.memoizedProps,se=s.type===s.elementType?F:kr(s.type,F),T.props=se,Re=s.pendingProps,Ce=T.context,z=l.contextType,typeof z=="object"&&z!==null?z=ur(z):(z=Vn(l)?js:wn.current,z=Wo(s,z));var Ve=l.getDerivedStateFromProps;(Ae=typeof Ve=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==Re||Ce!==z)&&Ng(s,T,h,z),qi=!1,Ce=s.memoizedState,T.state=Ce,Xu(s,h,T,p);var $e=s.memoizedState;F!==Re||Ce!==$e||Mn.current||qi?(typeof Ve=="function"&&(Od(s,l,Ve,h),$e=s.memoizedState),(se=qi||Dg(s,l,se,h,Ce,$e,z)||!1)?(Ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,$e,z),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,$e,z)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||F===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=$e),T.props=h,T.state=$e,T.context=z,h=se):(typeof T.componentDidUpdate!="function"||F===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&Ce===r.memoizedState||(s.flags|=1024),h=!1)}return Yd(r,s,l,h,y,p)}function Yd(r,s,l,h,p,y){my(r,s);var T=(s.flags&128)!==0;if(!h&&!T)return p&&wg(s,l,!1),mi(r,s,y);h=s.stateNode,vT.current=s;var F=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&T?(s.child=Yo(s,r.child,null,y),s.child=Yo(s,null,F,y)):Dn(r,s,F,y),s.memoizedState=h.state,p&&wg(s,l,!0),s.child}function yy(r){var s=r.stateNode;s.pendingContext?vg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&vg(r,s.context,!1),Ld(r,s.containerInfo)}function vy(r,s,l,h,p){return Go(),Pd(p),s.flags|=256,Dn(r,s,l,h),s.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Xd(r){return{baseLanes:r,cachePool:null,transitions:null}}function _y(r,s,l){var h=s.pendingProps,p=zt.current,y=!1,T=(s.flags&128)!==0,F;if((F=T)||(F=r!==null&&r.memoizedState===null?!1:(p&2)!==0),F?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),xt(zt,p&1),r===null)return Cd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=h.children,r=h.fallback,y?(h=s.mode,y=s.child,T={mode:"hidden",children:T},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=T):y=wc(T,h,0,null),r=Qs(r,h,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Xd(l),s.memoizedState=Jd,r):Zd(s,T));if(p=r.memoizedState,p!==null&&(F=p.dehydrated,F!==null))return _T(r,s,T,h,F,p,l);if(y){y=h.fallback,T=s.mode,p=r.child,F=p.sibling;var z={mode:"hidden",children:h.children};return(T&1)===0&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=z,s.deletions=null):(h=Zi(p,z),h.subtreeFlags=p.subtreeFlags&14680064),F!==null?y=Zi(F,y):(y=Qs(y,T,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,T=r.child.memoizedState,T=T===null?Xd(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},y.memoizedState=T,y.childLanes=r.childLanes&~l,s.memoizedState=Jd,h}return y=r.child,r=y.sibling,h=Zi(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Zd(r,s){return s=wc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function ac(r,s,l,h){return h!==null&&Pd(h),Yo(s,r.child,null,l),r=Zd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function _T(r,s,l,h,p,y,T){if(l)return s.flags&256?(s.flags&=-257,h=Gd(Error(t(422))),ac(r,s,T,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=h.fallback,p=s.mode,h=wc({mode:"visible",children:h.children},p,0,null),y=Qs(y,p,T,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&Yo(s,r.child,null,T),s.child.memoizedState=Xd(T),s.memoizedState=Jd,y);if((s.mode&1)===0)return ac(r,s,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var F=h.dgst;return h=F,y=Error(t(419)),h=Gd(y,h,void 0),ac(r,s,T,h)}if(F=(T&r.childLanes)!==0,Fn||F){if(h=ln,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,fi(r,p),Dr(h,r,p,-1))}return gf(),h=Gd(Error(t(421))),ac(r,s,T,h)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=DT.bind(null,r),p._reactRetry=s,null):(r=y.treeContext,Zn=$i(p.nextSibling),Xn=s,Mt=!0,Rr=null,r!==null&&(ar[lr++]=hi,ar[lr++]=di,ar[lr++]=Us,hi=r.id,di=r.overflow,Us=s),s=Zd(s,h.children),s.flags|=4096,s)}function wy(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),xd(r.return,s,l)}function ef(r,s,l,h,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function Ey(r,s,l){var h=s.pendingProps,p=h.revealOrder,y=h.tail;if(Dn(r,s,h.children,l),h=zt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wy(r,l,s);else if(r.tag===19)wy(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(xt(zt,h),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&tc(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),ef(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&tc(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}ef(s,!0,l,null,y);break;case"together":ef(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function lc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function mi(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Hs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=Zi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=Zi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function wT(r,s,l){switch(s.tag){case 3:yy(s),Go();break;case 5:Fg(s);break;case 1:Vn(s.type)&&Wu(s);break;case 4:Ld(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;xt(Qu,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(xt(zt,zt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?_y(r,s,l):(xt(zt,zt.current&1),r=mi(r,s,l),r!==null?r.sibling:null);xt(zt,zt.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(r.flags&128)!==0){if(h)return Ey(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xt(zt,zt.current),h)break;return null;case 22:case 23:return s.lanes=0,py(r,s,l)}return mi(r,s,l)}var Sy,tf,Ty,Iy;Sy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},tf=function(){},Ty=function(r,s,l,h){var p=r.memoizedProps;if(p!==h){r=s.stateNode,Bs(Qr.current);var y=null;switch(l){case"input":p=Et(r,p),h=Et(r,h),y=[];break;case"select":p=O({},p,{value:void 0}),h=O({},h,{value:void 0}),y=[];break;case"textarea":p=_n(r,p),h=_n(r,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=zu)}ue(l,h);var T;l=null;for(se in p)if(!h.hasOwnProperty(se)&&p.hasOwnProperty(se)&&p[se]!=null)if(se==="style"){var F=p[se];for(T in F)F.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(o.hasOwnProperty(se)?y||(y=[]):(y=y||[]).push(se,null));for(se in h){var z=h[se];if(F=p!=null?p[se]:void 0,h.hasOwnProperty(se)&&z!==F&&(z!=null||F!=null))if(se==="style")if(F){for(T in F)!F.hasOwnProperty(T)||z&&z.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in z)z.hasOwnProperty(T)&&F[T]!==z[T]&&(l||(l={}),l[T]=z[T])}else l||(y||(y=[]),y.push(se,l)),l=z;else se==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,F=F?F.__html:void 0,z!=null&&F!==z&&(y=y||[]).push(se,z)):se==="children"?typeof z!="string"&&typeof z!="number"||(y=y||[]).push(se,""+z):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(o.hasOwnProperty(se)?(z!=null&&se==="onScroll"&&bt("scroll",r),y||F===z||(y=[])):(y=y||[]).push(se,z))}l&&(y=y||[]).push("style",l);var se=y;(s.updateQueue=se)&&(s.flags|=4)}},Iy=function(r,s,l,h){l!==h&&(s.flags|=4)};function vl(r,s){if(!Mt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Sn(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function ET(r,s,l){var h=s.pendingProps;switch(Td(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(s),null;case 1:return Vn(s.type)&&Bu(),Sn(s),null;case 3:return h=s.stateNode,Jo(),Dt(Mn),Dt(wn),Fd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Ku(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rr!==null&&(ff(Rr),Rr=null))),tf(r,s),Sn(s),null;case 5:Md(s);var p=Bs(fl.current);if(l=s.type,r!==null&&s.stateNode!=null)Ty(r,s,l,h,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Sn(s),null}if(r=Bs(Qr.current),Ku(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Kr]=s,h[ll]=y,r=(s.mode&1)!==0,l){case"dialog":bt("cancel",h),bt("close",h);break;case"iframe":case"object":case"embed":bt("load",h);break;case"video":case"audio":for(p=0;p<sl.length;p++)bt(sl[p],h);break;case"source":bt("error",h);break;case"img":case"image":case"link":bt("error",h),bt("load",h);break;case"details":bt("toggle",h);break;case"input":Je(h,y),bt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},bt("invalid",h);break;case"textarea":jt(h,y),bt("invalid",h)}ue(l,y),p=null;for(var T in y)if(y.hasOwnProperty(T)){var F=y[T];T==="children"?typeof F=="string"?h.textContent!==F&&(y.suppressHydrationWarning!==!0&&Uu(h.textContent,F,r),p=["children",F]):typeof F=="number"&&h.textContent!==""+F&&(y.suppressHydrationWarning!==!0&&Uu(h.textContent,F,r),p=["children",""+F]):o.hasOwnProperty(T)&&F!=null&&T==="onScroll"&&bt("scroll",h)}switch(l){case"input":He(h),Pt(h,y,!0);break;case"textarea":He(h),lt(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=zu)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=pt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(l,{is:h.is}):(r=T.createElement(l),l==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,l),r[Kr]=s,r[ll]=h,Sy(r,s,!1,!1),s.stateNode=r;e:{switch(T=ce(l,h),l){case"dialog":bt("cancel",r),bt("close",r),p=h;break;case"iframe":case"object":case"embed":bt("load",r),p=h;break;case"video":case"audio":for(p=0;p<sl.length;p++)bt(sl[p],r);p=h;break;case"source":bt("error",r),p=h;break;case"img":case"image":case"link":bt("error",r),bt("load",r),p=h;break;case"details":bt("toggle",r),p=h;break;case"input":Je(r,h),p=Et(r,h),bt("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=O({},h,{value:void 0}),bt("invalid",r);break;case"textarea":jt(r,h),p=_n(r,h),bt("invalid",r);break;default:p=h}ue(l,p),F=p;for(y in F)if(F.hasOwnProperty(y)){var z=F[y];y==="style"?Se(r,z):y==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&le(r,z)):y==="children"?typeof z=="string"?(l!=="textarea"||z!=="")&&re(r,z):typeof z=="number"&&re(r,""+z):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?z!=null&&y==="onScroll"&&bt("scroll",r):z!=null&&j(r,y,z,T))}switch(l){case"input":He(r),Pt(r,h,!1);break;case"textarea":He(r),lt(r);break;case"option":h.value!=null&&r.setAttribute("value",""+oe(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Ft(r,!!h.multiple,y,!1):h.defaultValue!=null&&Ft(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=zu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Sn(s),null;case 6:if(r&&s.stateNode!=null)Iy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Bs(fl.current),Bs(Qr.current),Ku(s)){if(h=s.stateNode,l=s.memoizedProps,h[Kr]=s,(y=h.nodeValue!==l)&&(r=Xn,r!==null))switch(r.tag){case 3:Uu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Uu(h.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Kr]=s,s.stateNode=h}return Sn(s),null;case 13:if(Dt(zt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Mt&&Zn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Pg(),Go(),s.flags|=98560,y=!1;else if(y=Ku(s),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Kr]=s}else Go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Sn(s),y=!1}else Rr!==null&&(ff(Rr),Rr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(zt.current&1)!==0?nn===0&&(nn=3):gf())),s.updateQueue!==null&&(s.flags|=4),Sn(s),null);case 4:return Jo(),tf(r,s),r===null&&ol(s.stateNode.containerInfo),Sn(s),null;case 10:return kd(s.type._context),Sn(s),null;case 17:return Vn(s.type)&&Bu(),Sn(s),null;case 19:if(Dt(zt),y=s.memoizedState,y===null)return Sn(s),null;if(h=(s.flags&128)!==0,T=y.rendering,T===null)if(h)vl(y,!1);else{if(nn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=tc(r),T!==null){for(s.flags|=128,vl(y,!1),h=T.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,r=h,y.flags&=14680066,T=y.alternate,T===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=T.childLanes,y.lanes=T.lanes,y.child=T.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=T.memoizedProps,y.memoizedState=T.memoizedState,y.updateQueue=T.updateQueue,y.type=T.type,r=T.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return xt(zt,zt.current&1|2),s.child}r=r.sibling}y.tail!==null&&kt()>ta&&(s.flags|=128,h=!0,vl(y,!1),s.lanes=4194304)}else{if(!h)if(r=tc(T),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),vl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!Mt)return Sn(s),null}else 2*kt()-y.renderingStartTime>ta&&l!==1073741824&&(s.flags|=128,h=!0,vl(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(l=y.last,l!==null?l.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=kt(),s.sibling=null,l=zt.current,xt(zt,h?l&1|2:l&1),s):(Sn(s),null);case 22:case 23:return mf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(er&1073741824)!==0&&(Sn(s),s.subtreeFlags&6&&(s.flags|=8192)):Sn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ST(r,s){switch(Td(s),s.tag){case 1:return Vn(s.type)&&Bu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Jo(),Dt(Mn),Dt(wn),Fd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Md(s),null;case 13:if(Dt(zt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Dt(zt),null;case 4:return Jo(),null;case 10:return kd(s.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var uc=!1,Tn=!1,TT=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Zo(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Wt(r,s,h)}else l.current=null}function nf(r,s,l){try{l()}catch(h){Wt(r,s,h)}}var Cy=!1;function IT(r,s){if(pd=ji,r=ng(),od(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var T=0,F=-1,z=-1,se=0,Ae=0,Re=r,Ce=null;t:for(;;){for(var Ve;Re!==l||p!==0&&Re.nodeType!==3||(F=T+p),Re!==y||h!==0&&Re.nodeType!==3||(z=T+h),Re.nodeType===3&&(T+=Re.nodeValue.length),(Ve=Re.firstChild)!==null;)Ce=Re,Re=Ve;for(;;){if(Re===r)break t;if(Ce===l&&++se===p&&(F=T),Ce===y&&++Ae===h&&(z=T),(Ve=Re.nextSibling)!==null)break;Re=Ce,Ce=Re.parentNode}Re=Ve}l=F===-1||z===-1?null:{start:F,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(md={focusedElem:r,selectionRange:l},ji=!1,Ue=s;Ue!==null;)if(s=Ue,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Ue=r;else for(;Ue!==null;){s=Ue;try{var $e=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Be=$e.memoizedProps,qt=$e.memoizedState,Z=s.stateNode,B=Z.getSnapshotBeforeUpdate(s.elementType===s.type?Be:kr(s.type,Be),qt);Z.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var te=s.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){Wt(s,s.return,xe)}if(r=s.sibling,r!==null){r.return=s.return,Ue=r;break}Ue=s.return}return $e=Cy,Cy=!1,$e}function _l(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&nf(s,l,y)}p=p.next}while(p!==h)}}function cc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function rf(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function Py(r){var s=r.alternate;s!==null&&(r.alternate=null,Py(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Kr],delete s[ll],delete s[_d],delete s[oT],delete s[aT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ay(r){return r.tag===5||r.tag===3||r.tag===4}function Ry(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ay(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sf(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=zu));else if(h!==4&&(r=r.child,r!==null))for(sf(r,s,l),r=r.sibling;r!==null;)sf(r,s,l),r=r.sibling}function of(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(of(r,s,l),r=r.sibling;r!==null;)of(r,s,l),r=r.sibling}var mn=null,xr=!1;function Ki(r,s,l){for(l=l.child;l!==null;)ky(r,s,l),l=l.sibling}function ky(r,s,l){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(bs,l)}catch{}switch(l.tag){case 5:Tn||Zo(l,s);case 6:var h=mn,p=xr;mn=null,Ki(r,s,l),mn=h,xr=p,mn!==null&&(xr?(r=mn,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):mn.removeChild(l.stateNode));break;case 18:mn!==null&&(xr?(r=mn,l=l.stateNode,r.nodeType===8?vd(r.parentNode,l):r.nodeType===1&&vd(r,l),Cr(r)):vd(mn,l.stateNode));break;case 4:h=mn,p=xr,mn=l.stateNode.containerInfo,xr=!0,Ki(r,s,l),mn=h,xr=p;break;case 0:case 11:case 14:case 15:if(!Tn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,T=y.destroy;y=y.tag,T!==void 0&&((y&2)!==0||(y&4)!==0)&&nf(l,s,T),p=p.next}while(p!==h)}Ki(r,s,l);break;case 1:if(!Tn&&(Zo(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(F){Wt(l,s,F)}Ki(r,s,l);break;case 21:Ki(r,s,l);break;case 22:l.mode&1?(Tn=(h=Tn)||l.memoizedState!==null,Ki(r,s,l),Tn=h):Ki(r,s,l);break;default:Ki(r,s,l)}}function xy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new TT),s.forEach(function(h){var p=OT.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function br(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=r,T=s,F=T;e:for(;F!==null;){switch(F.tag){case 5:mn=F.stateNode,xr=!1;break e;case 3:mn=F.stateNode.containerInfo,xr=!0;break e;case 4:mn=F.stateNode.containerInfo,xr=!0;break e}F=F.return}if(mn===null)throw Error(t(160));ky(y,T,p),mn=null,xr=!1;var z=p.alternate;z!==null&&(z.return=null),p.return=null}catch(se){Wt(p,s,se)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)by(s,r),s=s.sibling}function by(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(br(s,r),Jr(r),h&4){try{_l(3,r,r.return),cc(3,r)}catch(Be){Wt(r,r.return,Be)}try{_l(5,r,r.return)}catch(Be){Wt(r,r.return,Be)}}break;case 1:br(s,r),Jr(r),h&512&&l!==null&&Zo(l,l.return);break;case 5:if(br(s,r),Jr(r),h&512&&l!==null&&Zo(l,l.return),r.flags&32){var p=r.stateNode;try{re(p,"")}catch(Be){Wt(r,r.return,Be)}}if(h&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,T=l!==null?l.memoizedProps:y,F=r.type,z=r.updateQueue;if(r.updateQueue=null,z!==null)try{F==="input"&&y.type==="radio"&&y.name!=null&&ft(p,y),ce(F,T);var se=ce(F,y);for(T=0;T<z.length;T+=2){var Ae=z[T],Re=z[T+1];Ae==="style"?Se(p,Re):Ae==="dangerouslySetInnerHTML"?le(p,Re):Ae==="children"?re(p,Re):j(p,Ae,Re,se)}switch(F){case"input":nt(p,y);break;case"textarea":qe(p,y);break;case"select":var Ce=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Ve=y.value;Ve!=null?Ft(p,!!y.multiple,Ve,!1):Ce!==!!y.multiple&&(y.defaultValue!=null?Ft(p,!!y.multiple,y.defaultValue,!0):Ft(p,!!y.multiple,y.multiple?[]:"",!1))}p[ll]=y}catch(Be){Wt(r,r.return,Be)}}break;case 6:if(br(s,r),Jr(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(Be){Wt(r,r.return,Be)}}break;case 3:if(br(s,r),Jr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Cr(s.containerInfo)}catch(Be){Wt(r,r.return,Be)}break;case 4:br(s,r),Jr(r);break;case 13:br(s,r),Jr(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(uf=kt())),h&4&&xy(r);break;case 22:if(Ae=l!==null&&l.memoizedState!==null,r.mode&1?(Tn=(se=Tn)||Ae,br(s,r),Tn=se):br(s,r),Jr(r),h&8192){if(se=r.memoizedState!==null,(r.stateNode.isHidden=se)&&!Ae&&(r.mode&1)!==0)for(Ue=r,Ae=r.child;Ae!==null;){for(Re=Ue=Ae;Ue!==null;){switch(Ce=Ue,Ve=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:_l(4,Ce,Ce.return);break;case 1:Zo(Ce,Ce.return);var $e=Ce.stateNode;if(typeof $e.componentWillUnmount=="function"){h=Ce,l=Ce.return;try{s=h,$e.props=s.memoizedProps,$e.state=s.memoizedState,$e.componentWillUnmount()}catch(Be){Wt(h,l,Be)}}break;case 5:Zo(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){Ny(Re);continue}}Ve!==null?(Ve.return=Ce,Ue=Ve):Ny(Re)}Ae=Ae.sibling}e:for(Ae=null,Re=r;;){if(Re.tag===5){if(Ae===null){Ae=Re;try{p=Re.stateNode,se?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(F=Re.stateNode,z=Re.memoizedProps.style,T=z!=null&&z.hasOwnProperty("display")?z.display:null,F.style.display=Me("display",T))}catch(Be){Wt(r,r.return,Be)}}}else if(Re.tag===6){if(Ae===null)try{Re.stateNode.nodeValue=se?"":Re.memoizedProps}catch(Be){Wt(r,r.return,Be)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===r)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===r)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===r)break e;Ae===Re&&(Ae=null),Re=Re.return}Ae===Re&&(Ae=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:br(s,r),Jr(r),h&4&&xy(r);break;case 21:break;default:br(s,r),Jr(r)}}function Jr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Ay(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(re(p,""),h.flags&=-33);var y=Ry(r);of(r,y,p);break;case 3:case 4:var T=h.stateNode.containerInfo,F=Ry(r);sf(r,F,T);break;default:throw Error(t(161))}}catch(z){Wt(r,r.return,z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CT(r,s,l){Ue=r,Dy(r)}function Dy(r,s,l){for(var h=(r.mode&1)!==0;Ue!==null;){var p=Ue,y=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||uc;if(!T){var F=p.alternate,z=F!==null&&F.memoizedState!==null||Tn;F=uc;var se=Tn;if(uc=T,(Tn=z)&&!se)for(Ue=p;Ue!==null;)T=Ue,z=T.child,T.tag===22&&T.memoizedState!==null?Ly(p):z!==null?(z.return=T,Ue=z):Ly(p);for(;y!==null;)Ue=y,Dy(y),y=y.sibling;Ue=p,uc=F,Tn=se}Oy(r)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Ue=y):Oy(r)}}function Oy(r){for(;Ue!==null;){var s=Ue;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Tn||cc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Tn)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:kr(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&xg(s,y,h);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}xg(s,T,l)}break;case 5:var F=s.stateNode;if(l===null&&s.flags&4){l=F;var z=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&l.focus();break;case"img":z.src&&(l.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var se=s.alternate;if(se!==null){var Ae=se.memoizedState;if(Ae!==null){var Re=Ae.dehydrated;Re!==null&&Cr(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Tn||s.flags&512&&rf(s)}catch(Ce){Wt(s,s.return,Ce)}}if(s===r){Ue=null;break}if(l=s.sibling,l!==null){l.return=s.return,Ue=l;break}Ue=s.return}}function Ny(r){for(;Ue!==null;){var s=Ue;if(s===r){Ue=null;break}var l=s.sibling;if(l!==null){l.return=s.return,Ue=l;break}Ue=s.return}}function Ly(r){for(;Ue!==null;){var s=Ue;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{cc(4,s)}catch(z){Wt(s,l,z)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(z){Wt(s,p,z)}}var y=s.return;try{rf(s)}catch(z){Wt(s,y,z)}break;case 5:var T=s.return;try{rf(s)}catch(z){Wt(s,T,z)}}}catch(z){Wt(s,s.return,z)}if(s===r){Ue=null;break}var F=s.sibling;if(F!==null){F.return=s.return,Ue=F;break}Ue=s.return}}var PT=Math.ceil,hc=ee.ReactCurrentDispatcher,af=ee.ReactCurrentOwner,hr=ee.ReactCurrentBatchConfig,vt=0,ln=null,Jt=null,gn=0,er=0,ea=Bi(0),nn=0,wl=null,Hs=0,dc=0,lf=0,El=null,jn=null,uf=0,ta=1/0,gi=null,fc=!1,cf=null,Qi=null,pc=!1,Yi=null,mc=0,Sl=0,hf=null,gc=-1,yc=0;function On(){return(vt&6)!==0?kt():gc!==-1?gc:gc=kt()}function Ji(r){return(r.mode&1)===0?1:(vt&2)!==0&&gn!==0?gn&-gn:uT.transition!==null?(yc===0&&(yc=Os()),yc):(r=dt,r!==0||(r=window.event,r=r===void 0?16:Ya(r.type)),r)}function Dr(r,s,l,h){if(50<Sl)throw Sl=0,hf=null,Error(t(185));Li(r,l,h),((vt&2)===0||r!==ln)&&(r===ln&&((vt&2)===0&&(dc|=l),nn===4&&Xi(r,gn)),Un(r,h),l===1&&vt===0&&(s.mode&1)===0&&(ta=kt()+500,Hu&&Hi()))}function Un(r,s){var l=r.callbackNode;ii(r,s);var h=Ds(r,r===ln?gn:0);if(h===0)l!==null&&Ha(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&Ha(l),s===1)r.tag===0?lT(Vy.bind(null,r)):Eg(Vy.bind(null,r)),iT(function(){(vt&6)===0&&Hi()}),l=null;else{switch(Vi(h)){case 1:l=xs;break;case 4:l=Di;break;case 16:l=ir;break;case 536870912:l=yu;break;default:l=ir}l=Hy(l,My.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function My(r,s){if(gc=-1,yc=0,(vt&6)!==0)throw Error(t(327));var l=r.callbackNode;if(na()&&r.callbackNode!==l)return null;var h=Ds(r,r===ln?gn:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=vc(r,h);else{s=h;var p=vt;vt|=2;var y=jy();(ln!==r||gn!==s)&&(gi=null,ta=kt()+500,Gs(r,s));do try{kT();break}catch(F){Fy(r,F)}while(!0);Rd(),hc.current=y,vt=p,Jt!==null?s=0:(ln=null,gn=0,s=nn)}if(s!==0){if(s===2&&(p=Qn(r),p!==0&&(h=p,s=df(r,p))),s===1)throw l=wl,Gs(r,0),Xi(r,h),Un(r,kt()),l;if(s===6)Xi(r,h);else{if(p=r.current.alternate,(h&30)===0&&!AT(p)&&(s=vc(r,h),s===2&&(y=Qn(r),y!==0&&(h=y,s=df(r,y))),s===1))throw l=wl,Gs(r,0),Xi(r,h),Un(r,kt()),l;switch(r.finishedWork=p,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Ks(r,jn,gi);break;case 3:if(Xi(r,h),(h&130023424)===h&&(s=uf+500-kt(),10<s)){if(Ds(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){On(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=yd(Ks.bind(null,r,jn,gi),s);break}Ks(r,jn,gi);break;case 4:if(Xi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,p=-1;0<h;){var T=31-xn(h);y=1<<T,T=s[T],T>p&&(p=T),h&=~y}if(h=p,h=kt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*PT(h/1960))-h,10<h){r.timeoutHandle=yd(Ks.bind(null,r,jn,gi),h);break}Ks(r,jn,gi);break;case 5:Ks(r,jn,gi);break;default:throw Error(t(329))}}}return Un(r,kt()),r.callbackNode===l?My.bind(null,r):null}function df(r,s){var l=El;return r.current.memoizedState.isDehydrated&&(Gs(r,s).flags|=256),r=vc(r,s),r!==2&&(s=jn,jn=l,s!==null&&ff(s)),r}function ff(r){jn===null?jn=r:jn.push.apply(jn,r)}function AT(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Ar(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xi(r,s){for(s&=~lf,s&=~dc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-xn(s),h=1<<l;r[l]=-1,s&=~h}}function Vy(r){if((vt&6)!==0)throw Error(t(327));na();var s=Ds(r,0);if((s&1)===0)return Un(r,kt()),null;var l=vc(r,s);if(r.tag!==0&&l===2){var h=Qn(r);h!==0&&(s=h,l=df(r,h))}if(l===1)throw l=wl,Gs(r,0),Xi(r,s),Un(r,kt()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Ks(r,jn,gi),Un(r,kt()),null}function pf(r,s){var l=vt;vt|=1;try{return r(s)}finally{vt=l,vt===0&&(ta=kt()+500,Hu&&Hi())}}function qs(r){Yi!==null&&Yi.tag===0&&(vt&6)===0&&na();var s=vt;vt|=1;var l=hr.transition,h=dt;try{if(hr.transition=null,dt=1,r)return r()}finally{dt=h,hr.transition=l,vt=s,(vt&6)===0&&Hi()}}function mf(){er=ea.current,Dt(ea)}function Gs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,rT(l)),Jt!==null)for(l=Jt.return;l!==null;){var h=l;switch(Td(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Bu();break;case 3:Jo(),Dt(Mn),Dt(wn),Fd();break;case 5:Md(h);break;case 4:Jo();break;case 13:Dt(zt);break;case 19:Dt(zt);break;case 10:kd(h.type._context);break;case 22:case 23:mf()}l=l.return}if(ln=r,Jt=r=Zi(r.current,null),gn=er=s,nn=0,wl=null,lf=dc=Hs=0,jn=El=null,$s!==null){for(s=0;s<$s.length;s++)if(l=$s[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var T=y.next;y.next=p,h.next=T}l.pending=h}$s=null}return r}function Fy(r,s){do{var l=Jt;try{if(Rd(),nc.current=oc,rc){for(var h=$t.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}rc=!1}if(Ws=0,an=tn=$t=null,pl=!1,ml=0,af.current=null,l===null||l.return===null){nn=1,wl=s,Jt=null;break}e:{var y=r,T=l.return,F=l,z=s;if(s=gn,F.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var se=z,Ae=F,Re=Ae.tag;if((Ae.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ce=Ae.alternate;Ce?(Ae.updateQueue=Ce.updateQueue,Ae.memoizedState=Ce.memoizedState,Ae.lanes=Ce.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ve=uy(T);if(Ve!==null){Ve.flags&=-257,cy(Ve,T,F,y,s),Ve.mode&1&&ly(y,se,s),s=Ve,z=se;var $e=s.updateQueue;if($e===null){var Be=new Set;Be.add(z),s.updateQueue=Be}else $e.add(z);break e}else{if((s&1)===0){ly(y,se,s),gf();break e}z=Error(t(426))}}else if(Mt&&F.mode&1){var qt=uy(T);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),cy(qt,T,F,y,s),Pd(Xo(z,F));break e}}y=z=Xo(z,F),nn!==4&&(nn=2),El===null?El=[y]:El.push(y),y=T;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var Z=oy(y,z,s);kg(y,Z);break e;case 1:F=z;var B=y.type,te=y.stateNode;if((y.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Qi===null||!Qi.has(te)))){y.flags|=65536,s&=-s,y.lanes|=s;var xe=ay(y,F,s);kg(y,xe);break e}}y=y.return}while(y!==null)}zy(l)}catch(We){s=We,Jt===l&&l!==null&&(Jt=l=l.return);continue}break}while(!0)}function jy(){var r=hc.current;return hc.current=oc,r===null?oc:r}function gf(){(nn===0||nn===3||nn===2)&&(nn=4),ln===null||(Hs&268435455)===0&&(dc&268435455)===0||Xi(ln,gn)}function vc(r,s){var l=vt;vt|=2;var h=jy();(ln!==r||gn!==s)&&(gi=null,Gs(r,s));do try{RT();break}catch(p){Fy(r,p)}while(!0);if(Rd(),vt=l,hc.current=h,Jt!==null)throw Error(t(261));return ln=null,gn=0,nn}function RT(){for(;Jt!==null;)Uy(Jt)}function kT(){for(;Jt!==null&&!mu();)Uy(Jt)}function Uy(r){var s=Wy(r.alternate,r,er);r.memoizedProps=r.pendingProps,s===null?zy(r):Jt=s,af.current=null}function zy(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=ET(l,s,er),l!==null){Jt=l;return}}else{if(l=ST(l,s),l!==null){l.flags&=32767,Jt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{nn=6,Jt=null;return}}if(s=s.sibling,s!==null){Jt=s;return}Jt=s=r}while(s!==null);nn===0&&(nn=5)}function Ks(r,s,l){var h=dt,p=hr.transition;try{hr.transition=null,dt=1,xT(r,s,l,h)}finally{hr.transition=p,dt=h}return null}function xT(r,s,l,h){do na();while(Yi!==null);if((vt&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(Rt(r,y),r===ln&&(Jt=ln=null,gn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||pc||(pc=!0,Hy(ir,function(){return na(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=hr.transition,hr.transition=null;var T=dt;dt=1;var F=vt;vt|=4,af.current=null,IT(r,l),by(l,r),YS(md),ji=!!pd,md=pd=null,r.current=l,CT(l),Xh(),vt=F,dt=T,hr.transition=y}else r.current=l;if(pc&&(pc=!1,Yi=r,mc=p),y=r.pendingLanes,y===0&&(Qi=null),vu(l.stateNode),Un(r,kt()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(fc)throw fc=!1,r=cf,cf=null,r;return(mc&1)!==0&&r.tag!==0&&na(),y=r.pendingLanes,(y&1)!==0?r===hf?Sl++:(Sl=0,hf=r):Sl=0,Hi(),null}function na(){if(Yi!==null){var r=Vi(mc),s=hr.transition,l=dt;try{if(hr.transition=null,dt=16>r?16:r,Yi===null)var h=!1;else{if(r=Yi,Yi=null,mc=0,(vt&6)!==0)throw Error(t(331));var p=vt;for(vt|=4,Ue=r.current;Ue!==null;){var y=Ue,T=y.child;if((Ue.flags&16)!==0){var F=y.deletions;if(F!==null){for(var z=0;z<F.length;z++){var se=F[z];for(Ue=se;Ue!==null;){var Ae=Ue;switch(Ae.tag){case 0:case 11:case 15:_l(8,Ae,y)}var Re=Ae.child;if(Re!==null)Re.return=Ae,Ue=Re;else for(;Ue!==null;){Ae=Ue;var Ce=Ae.sibling,Ve=Ae.return;if(Py(Ae),Ae===se){Ue=null;break}if(Ce!==null){Ce.return=Ve,Ue=Ce;break}Ue=Ve}}}var $e=y.alternate;if($e!==null){var Be=$e.child;if(Be!==null){$e.child=null;do{var qt=Be.sibling;Be.sibling=null,Be=qt}while(Be!==null)}}Ue=y}}if((y.subtreeFlags&2064)!==0&&T!==null)T.return=y,Ue=T;else e:for(;Ue!==null;){if(y=Ue,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:_l(9,y,y.return)}var Z=y.sibling;if(Z!==null){Z.return=y.return,Ue=Z;break e}Ue=y.return}}var B=r.current;for(Ue=B;Ue!==null;){T=Ue;var te=T.child;if((T.subtreeFlags&2064)!==0&&te!==null)te.return=T,Ue=te;else e:for(T=B;Ue!==null;){if(F=Ue,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:cc(9,F)}}catch(We){Wt(F,F.return,We)}if(F===T){Ue=null;break e}var xe=F.sibling;if(xe!==null){xe.return=F.return,Ue=xe;break e}Ue=F.return}}if(vt=p,Hi(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(bs,r)}catch{}h=!0}return h}finally{dt=l,hr.transition=s}}return!1}function $y(r,s,l){s=Xo(l,s),s=oy(r,s,1),r=Gi(r,s,1),s=On(),r!==null&&(Li(r,1,s),Un(r,s))}function Wt(r,s,l){if(r.tag===3)$y(r,r,l);else for(;s!==null;){if(s.tag===3){$y(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Qi===null||!Qi.has(h))){r=Xo(l,r),r=ay(s,r,1),s=Gi(s,r,1),r=On(),s!==null&&(Li(s,1,r),Un(s,r));break}}s=s.return}}function bT(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=On(),r.pingedLanes|=r.suspendedLanes&l,ln===r&&(gn&l)===l&&(nn===4||nn===3&&(gn&130023424)===gn&&500>kt()-uf?Gs(r,0):lf|=l),Un(r,s)}function By(r,s){s===0&&((r.mode&1)===0?s=1:(s=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var l=On();r=fi(r,s),r!==null&&(Li(r,s,l),Un(r,l))}function DT(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),By(r,l)}function OT(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),By(r,l)}var Wy;Wy=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Mn.current)Fn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return Fn=!1,wT(r,s,l);Fn=(r.flags&131072)!==0}else Fn=!1,Mt&&(s.flags&1048576)!==0&&Sg(s,Gu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;lc(r,s),r=s.pendingProps;var p=Wo(s,wn.current);Qo(s,l),p=zd(null,s,h,r,p,l);var y=$d();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Vn(h)?(y=!0,Wu(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Dd(s),p.updater=Zu,s.stateNode=p,p._reactInternals=s,Nd(s,h,r,l),s=Yd(null,s,h,!0,y,l)):(s.tag=0,Mt&&y&&Sd(s),Dn(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(lc(r,s),r=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=LT(h),r=kr(h,r),p){case 0:s=Qd(null,s,h,r,l);break e;case 1:s=gy(null,s,h,r,l);break e;case 11:s=hy(null,s,h,r,l);break e;case 14:s=dy(null,s,h,kr(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:kr(h,p),Qd(r,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:kr(h,p),gy(r,s,h,p,l);case 3:e:{if(yy(s),r===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,p=y.element,Rg(r,s),Xu(s,h,null,l);var T=s.memoizedState;if(h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Xo(Error(t(423)),s),s=vy(r,s,h,l,p);break e}else if(h!==p){p=Xo(Error(t(424)),s),s=vy(r,s,h,l,p);break e}else for(Zn=$i(s.stateNode.containerInfo.firstChild),Xn=s,Mt=!0,Rr=null,l=Vg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Go(),h===p){s=mi(r,s,l);break e}Dn(r,s,h,l)}s=s.child}return s;case 5:return Fg(s),r===null&&Cd(s),h=s.type,p=s.pendingProps,y=r!==null?r.memoizedProps:null,T=p.children,gd(h,p)?T=null:y!==null&&gd(h,y)&&(s.flags|=32),my(r,s),Dn(r,s,T,l),s.child;case 6:return r===null&&Cd(s),null;case 13:return _y(r,s,l);case 4:return Ld(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Yo(s,null,h,l):Dn(r,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:kr(h,p),hy(r,s,h,p,l);case 7:return Dn(r,s,s.pendingProps,l),s.child;case 8:return Dn(r,s,s.pendingProps.children,l),s.child;case 12:return Dn(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,y=s.memoizedProps,T=p.value,xt(Qu,h._currentValue),h._currentValue=T,y!==null)if(Ar(y.value,T)){if(y.children===p.children&&!Mn.current){s=mi(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var F=y.dependencies;if(F!==null){T=y.child;for(var z=F.firstContext;z!==null;){if(z.context===h){if(y.tag===1){z=pi(-1,l&-l),z.tag=2;var se=y.updateQueue;if(se!==null){se=se.shared;var Ae=se.pending;Ae===null?z.next=z:(z.next=Ae.next,Ae.next=z),se.pending=z}}y.lanes|=l,z=y.alternate,z!==null&&(z.lanes|=l),xd(y.return,l,s),F.lanes|=l;break}z=z.next}}else if(y.tag===10)T=y.type===s.type?null:y.child;else if(y.tag===18){if(T=y.return,T===null)throw Error(t(341));T.lanes|=l,F=T.alternate,F!==null&&(F.lanes|=l),xd(T,l,s),T=y.sibling}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}Dn(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Qo(s,l),p=ur(p),h=h(p),s.flags|=1,Dn(r,s,h,l),s.child;case 14:return h=s.type,p=kr(h,s.pendingProps),p=kr(h.type,p),dy(r,s,h,p,l);case 15:return fy(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:kr(h,p),lc(r,s),s.tag=1,Vn(h)?(r=!0,Wu(s)):r=!1,Qo(s,l),Og(s,h,p),Nd(s,h,p,l),Yd(null,s,h,!0,r,l);case 19:return Ey(r,s,l);case 22:return py(r,s,l)}throw Error(t(156,s.tag))};function Hy(r,s){return To(r,s)}function NT(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(r,s,l,h){return new NT(r,s,l,h)}function yf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function LT(r){if(typeof r=="function")return yf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===U)return 11;if(r===he)return 14}return 2}function Zi(r,s){var l=r.alternate;return l===null?(l=dr(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function _c(r,s,l,h,p,y){var T=2;if(h=r,typeof r=="function")yf(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case b:return Qs(l.children,p,y,s);case C:T=8,p|=8;break;case x:return r=dr(12,l,s,p|2),r.elementType=x,r.lanes=y,r;case A:return r=dr(13,l,s,p),r.elementType=A,r.lanes=y,r;case pe:return r=dr(19,l,s,p),r.elementType=pe,r.lanes=y,r;case ve:return wc(l,p,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:T=10;break e;case M:T=9;break e;case U:T=11;break e;case he:T=14;break e;case ge:T=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=dr(T,l,s,p),s.elementType=r,s.type=h,s.lanes=y,s}function Qs(r,s,l,h){return r=dr(7,r,h,s),r.lanes=l,r}function wc(r,s,l,h){return r=dr(22,r,h,s),r.elementType=ve,r.lanes=l,r.stateNode={isHidden:!1},r}function vf(r,s,l){return r=dr(6,r,null,s),r.lanes=l,r}function _f(r,s,l){return s=dr(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function MT(r,s,l,h,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ni(0),this.expirationTimes=Ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function wf(r,s,l,h,p,y,T,F,z){return r=new MT(r,s,l,F,z),s===1?(s=1,y===!0&&(s|=8)):s=0,y=dr(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(y),r}function VT(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function qy(r){if(!r)return Wi;r=r._reactInternals;e:{if(wr(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Vn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(Vn(l))return _g(r,l,s)}return s}function Gy(r,s,l,h,p,y,T,F,z){return r=wf(l,h,!0,r,p,y,T,F,z),r.context=qy(null),l=r.current,h=On(),p=Ji(l),y=pi(h,p),y.callback=s??null,Gi(l,y,p),r.current.lanes=p,Li(r,p,h),Un(r,h),r}function Ec(r,s,l,h){var p=s.current,y=On(),T=Ji(p);return l=qy(l),s.context===null?s.context=l:s.pendingContext=l,s=pi(y,T),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Gi(p,s,T),r!==null&&(Dr(r,p,T,y),Ju(r,p,T)),T}function Sc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ky(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Ef(r,s){Ky(r,s),(r=r.alternate)&&Ky(r,s)}function FT(){return null}var Qy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Sf(r){this._internalRoot=r}Tc.prototype.render=Sf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Ec(r,s,null,null)},Tc.prototype.unmount=Sf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;qs(function(){Ec(null,r,null,null)}),s[ui]=null}};function Tc(r){this._internalRoot=r}Tc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Tu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Wr.length&&s!==0&&s<Wr[l].priority;l++);Wr.splice(l,0,r),l===0&&Pu(r)}};function Tf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ic(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Yy(){}function jT(r,s,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var se=Sc(T);y.call(se)}}var T=Gy(s,h,r,0,null,!1,!1,"",Yy);return r._reactRootContainer=T,r[ui]=T.current,ol(r.nodeType===8?r.parentNode:r),qs(),T}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var F=h;h=function(){var se=Sc(z);F.call(se)}}var z=wf(r,0,!1,null,null,!1,!1,"",Yy);return r._reactRootContainer=z,r[ui]=z.current,ol(r.nodeType===8?r.parentNode:r),qs(function(){Ec(s,z,l,h)}),z}function Cc(r,s,l,h,p){var y=l._reactRootContainer;if(y){var T=y;if(typeof p=="function"){var F=p;p=function(){var z=Sc(T);F.call(z)}}Ec(s,T,r,p)}else T=jT(l,s,r,p,h);return Sc(T)}Eu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=Oi(s.pendingLanes);l!==0&&(Mi(s,l|1),Un(s,kt()),(vt&6)===0&&(ta=kt()+500,Hi()))}break;case 13:qs(function(){var h=fi(r,1);if(h!==null){var p=On();Dr(h,r,1,p)}}),Ef(r,1)}},Po=function(r){if(r.tag===13){var s=fi(r,134217728);if(s!==null){var l=On();Dr(s,r,134217728,l)}Ef(r,134217728)}},Su=function(r){if(r.tag===13){var s=Ji(r),l=fi(r,s);if(l!==null){var h=On();Dr(l,r,s,h)}Ef(r,s)}},Tu=function(){return dt},Iu=function(r,s){var l=dt;try{return dt=r,s()}finally{dt=l}},de=function(r,s,l){switch(s){case"input":if(nt(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var p=$u(h);if(!p)throw Error(t(90));Le(h),nt(h,p)}}}break;case"textarea":qe(r,l);break;case"select":s=l.value,s!=null&&Ft(r,!!l.multiple,s,!1)}},_t=pf,qn=qs;var UT={usingClientEntryPoint:!1,Events:[ul,$o,$u,Xe,mt,pf]},Tl={findFiberByHostInstance:Fs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zT={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Wa(r),r===null?null:r.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||FT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{bs=Pc.inject(zT),Kn=Pc}catch{}}return zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UT,zn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tf(s))throw Error(t(200));return VT(r,s,null,l)},zn.createRoot=function(r,s){if(!Tf(r))throw Error(t(299));var l=!1,h="",p=Qy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=wf(r,1,!1,null,null,l,!1,h,p),r[ui]=s.current,ol(r.nodeType===8?r.parentNode:r),new Sf(s)},zn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Wa(s),r=r===null?null:r.stateNode,r},zn.flushSync=function(r){return qs(r)},zn.hydrate=function(r,s,l){if(!Ic(s))throw Error(t(200));return Cc(null,r,s,!0,l)},zn.hydrateRoot=function(r,s,l){if(!Tf(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",T=Qy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=Gy(s,null,r,1,l??null,p,!1,y,T),r[ui]=s.current,ol(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new Tc(s)},zn.render=function(r,s,l){if(!Ic(s))throw Error(t(200));return Cc(null,r,s,!1,l)},zn.unmountComponentAtNode=function(r){if(!Ic(r))throw Error(t(40));return r._reactRootContainer?(qs(function(){Cc(null,null,r,!1,function(){r._reactRootContainer=null,r[ui]=null})}),!0):!1},zn.unstable_batchedUpdates=pf,zn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!Ic(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Cc(r,s,l,!1,h)},zn.version="18.2.0-next-9e3b772b8-20220608",zn}var iv;function QT(){if(iv)return Pf.exports;iv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pf.exports=KT(),Pf.exports}var sv;function YT(){if(sv)return Ac;sv=1;var n=QT();return Ac.createRoot=n.createRoot,Ac.hydrateRoot=n.hydrateRoot,Ac}var JT=YT(),Cl={},ov;function XT(){if(ov)return Cl;ov=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.parse=c,Cl.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function c(w,k){const P=new a,I=w.length;if(I<2)return P;const S=(k==null?void 0:k.decode)||v;let N=0;do{const V=w.indexOf("=",N);if(V===-1)break;const j=w.indexOf(";",N),ee=j===-1?I:j;if(V>ee){N=w.lastIndexOf(";",V-1)+1;continue}const $=d(w,N,V),fe=f(w,V,$),b=w.slice($,fe);if(P[b]===void 0){let C=d(w,V+1,ee),x=f(w,ee,C);const D=S(w.slice(C,x));P[b]=D}N=ee+1}while(N<I);return P}function d(w,k,P){do{const I=w.charCodeAt(k);if(I!==32&&I!==9)return k}while(++k<P);return P}function f(w,k,P){for(;k>P;){const I=w.charCodeAt(--k);if(I!==32&&I!==9)return k+1}return P}function m(w,k,P){const I=(P==null?void 0:P.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const S=I(k);if(!e.test(S))throw new TypeError(`argument val is invalid: ${k}`);let N=w+"="+S;if(!P)return N;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);N+="; Max-Age="+P.maxAge}if(P.domain){if(!t.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);N+="; Domain="+P.domain}if(P.path){if(!i.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);N+="; Path="+P.path}if(P.expires){if(!E(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);N+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&(N+="; HttpOnly"),P.secure&&(N+="; Secure"),P.partitioned&&(N+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":N+="; Priority=Low";break;case"medium":N+="; Priority=Medium";break;case"high":N+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"none":N+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return N}function v(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function E(w){return o.call(w)==="[object Date]"}return Cl}XT();var av="popstate";function ZT(n={}){function e(i,o){let{pathname:a,search:c,hash:d}=i.location;return ep("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:$l(o)}return t1(e,t,null,n)}function Vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Fr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e1(){return Math.random().toString(36).substring(2,10)}function lv(n,e){return{usr:n.state,key:n.key,idx:e}}function ep(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ba(e):e,state:t,key:e&&e.key||i||e1()}}function $l({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ba(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function t1(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,c=o.history,d="POP",f=null,m=v();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let S=v(),N=S==null?null:S-m;m=S,f&&f({action:d,location:I.location,delta:N})}function w(S,N){d="PUSH";let V=ep(I.location,S,N);m=v()+1;let j=lv(V,m),ee=I.createHref(V);try{c.pushState(j,"",ee)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(ee)}a&&f&&f({action:d,location:I.location,delta:1})}function k(S,N){d="REPLACE";let V=ep(I.location,S,N);m=v();let j=lv(V,m),ee=I.createHref(V);c.replaceState(j,"",ee),a&&f&&f({action:d,location:I.location,delta:0})}function P(S){return n1(S)}let I={get action(){return d},get location(){return n(o,c)},listen(S){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(av,E),f=S,()=>{o.removeEventListener(av,E),f=null}},createHref(S){return e(o,S)},createURL:P,encodeLocation(S){let N=P(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:w,replace:k,go(S){return c.go(S)}};return I}function n1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Vt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:$l(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Tw(n,e,t="/"){return r1(n,e,t,!1)}function r1(n,e,t,i){let o=typeof e=="string"?ba(e):e,a=Ii(o.pathname||"/",t);if(a==null)return null;let c=Iw(n);i1(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=m1(a);d=f1(c[f],m,i)}return d}function Iw(n,e=[],t=[],i=""){let o=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Vt(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let m=Ei([i,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(Vt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Iw(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:h1(m,a.index),routesMeta:v})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,c);else for(let f of Cw(a.path))o(a,c,f)}),e}function Cw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let c=Cw(i.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function i1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:d1(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var s1=/^:[\w-]+$/,o1=3,a1=2,l1=1,u1=10,c1=-2,uv=n=>n==="*";function h1(n,e){let t=n.split("/"),i=t.length;return t.some(uv)&&(i+=c1),e&&(i+=a1),t.filter(o=>!uv(o)).reduce((o,a)=>o+(s1.test(a)?o1:a===""?l1:u1),i)}function d1(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function f1(n,e,t=!1){let{routesMeta:i}=n,o={},a="/",c=[];for(let d=0;d<i.length;++d){let f=i[d],m=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",E=Yc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),w=f.route;if(!E&&m&&t&&!i[i.length-1].route.index&&(E=Yc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Ei([a,E.pathname]),pathnameBase:_1(Ei([a,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(a=Ei([a,E.pathnameBase]))}return c}function Yc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=p1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:E},w)=>{if(v==="*"){let P=d[w]||"";c=a.slice(0,a.length-P.length).replace(/(.)\/+$/,"$1")}const k=d[w];return E&&!k?m[v]=void 0:m[v]=(k||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function p1(n,e=!1,t=!0){Fr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function m1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function g1(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?ba(n):n;return{pathname:t?t.startsWith("/")?t:y1(t,e):e,search:w1(i),hash:E1(o)}}function y1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function kf(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Vp(n){let e=v1(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Fp(n,e,t,i=!1){let o;typeof n=="string"?o=ba(n):(o={...n},Vt(!o.pathname||!o.pathname.includes("?"),kf("?","pathname","search",o)),Vt(!o.pathname||!o.pathname.includes("#"),kf("#","pathname","hash",o)),Vt(!o.search||!o.search.includes("#"),kf("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),E-=1;o.pathname=w.join("/")}d=E>=0?e[E]:"/"}let f=g1(o,d),m=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Ei=n=>n.join("/").replace(/\/\/+/g,"/"),_1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),w1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,E1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function S1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Pw=["POST","PUT","PATCH","DELETE"];new Set(Pw);var T1=["GET",...Pw];new Set(T1);var Da=G.createContext(null);Da.displayName="DataRouter";var _h=G.createContext(null);_h.displayName="DataRouterState";var Aw=G.createContext({isTransitioning:!1});Aw.displayName="ViewTransition";var I1=G.createContext(new Map);I1.displayName="Fetchers";var C1=G.createContext(null);C1.displayName="Await";var zr=G.createContext(null);zr.displayName="Navigation";var Ql=G.createContext(null);Ql.displayName="Location";var $r=G.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var jp=G.createContext(null);jp.displayName="RouteError";function P1(n,{relative:e}={}){Vt(Oa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=G.useContext(zr),{hash:o,pathname:a,search:c}=Jl(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Ei([t,a])),i.createHref({pathname:d,search:c,hash:o})}function Oa(){return G.useContext(Ql)!=null}function Ts(){return Vt(Oa(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(Ql).location}var Rw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kw(n){G.useContext(zr).static||G.useLayoutEffect(n)}function Yl(){let{isDataRoute:n}=G.useContext($r);return n?j1():A1()}function A1(){Vt(Oa(),"useNavigate() may be used only in the context of a <Router> component.");let n=G.useContext(Da),{basename:e,navigator:t}=G.useContext(zr),{matches:i}=G.useContext($r),{pathname:o}=Ts(),a=JSON.stringify(Vp(i)),c=G.useRef(!1);return kw(()=>{c.current=!0}),G.useCallback((f,m={})=>{if(Fr(c.current,Rw),!c.current)return;if(typeof f=="number"){t.go(f);return}let v=Fp(f,JSON.parse(a),o,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ei([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,o,n])}G.createContext(null);function xw(){let{matches:n}=G.useContext($r),e=n[n.length-1];return e?e.params:{}}function Jl(n,{relative:e}={}){let{matches:t}=G.useContext($r),{pathname:i}=Ts(),o=JSON.stringify(Vp(t));return G.useMemo(()=>Fp(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function R1(n,e){return bw(n,e)}function bw(n,e,t,i){var V;Vt(Oa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=G.useContext(zr),{matches:c}=G.useContext($r),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let j=E&&E.path||"";Dw(m,!E||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let w=Ts(),k;if(e){let j=typeof e=="string"?ba(e):e;Vt(v==="/"||((V=j.pathname)==null?void 0:V.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${j.pathname}" was given in the \`location\` prop.`),k=j}else k=w;let P=k.pathname||"/",I=P;if(v!=="/"){let j=v.replace(/^\//,"").split("/");I="/"+P.replace(/^\//,"").split("/").slice(j.length).join("/")}let S=!a&&t&&t.matches&&t.matches.length>0?t.matches:Tw(n,{pathname:I});Fr(E||S!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Fr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=O1(S&&S.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:Ei([v,o.encodeLocation?o.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?v:Ei([v,o.encodeLocation?o.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,t,i);return e&&N?G.createElement(Ql.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},N):N}function k1(){let n=F1(),e=S1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=G.createElement(G.Fragment,null,G.createElement("p",null,"💿 Hey developer 👋"),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:o},t):null,c)}var x1=G.createElement(k1,null),b1=class extends G.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?G.createElement($r.Provider,{value:this.props.routeContext},G.createElement(jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function D1({routeContext:n,match:e,children:t}){let i=G.useContext(Da);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement($r.Provider,{value:n},t)}function O1(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Vt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:E}=t,w=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,v)=>{let E,w=!1,k=null,P=null;t&&(E=a&&m.route.id?a[m.route.id]:void 0,k=m.route.errorElement||x1,c&&(d<0&&v===0?(Dw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,P=null):d===v&&(w=!0,P=m.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,v+1)),S=()=>{let N;return E?N=k:w?N=P:m.route.Component?N=G.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=f,G.createElement(D1,{match:m,routeContext:{outlet:f,matches:I,isDataRoute:t!=null},children:N})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?G.createElement(b1,{location:t.location,revalidation:t.revalidation,component:k,error:E,children:S(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):S()},null)}function Up(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N1(n){let e=G.useContext(Da);return Vt(e,Up(n)),e}function L1(n){let e=G.useContext(_h);return Vt(e,Up(n)),e}function M1(n){let e=G.useContext($r);return Vt(e,Up(n)),e}function zp(n){let e=M1(n),t=e.matches[e.matches.length-1];return Vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function V1(){return zp("useRouteId")}function F1(){var i;let n=G.useContext(jp),e=L1("useRouteError"),t=zp("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function j1(){let{router:n}=N1("useNavigate"),e=zp("useNavigate"),t=G.useRef(!1);return kw(()=>{t.current=!0}),G.useCallback(async(o,a={})=>{Fr(t.current,Rw),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var cv={};function Dw(n,e,t){!e&&!cv[n]&&(cv[n]=!0,Fr(!1,t))}G.memo(U1);function U1({routes:n,future:e,state:t}){return bw(n,void 0,t,e)}function tp({to:n,replace:e,state:t,relative:i}){Vt(Oa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=G.useContext(zr);Fr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=G.useContext($r),{pathname:c}=Ts(),d=Yl(),f=Fp(n,Vp(a),c,i==="path"),m=JSON.stringify(f);return G.useEffect(()=>{d(JSON.parse(m),{replace:e,state:t,relative:i})},[d,m,i,e,t]),null}function os(n){Vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z1({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:a=!1}){Vt(!Oa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=G.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof t=="string"&&(t=ba(t));let{pathname:f="/",search:m="",hash:v="",state:E=null,key:w="default"}=t,k=G.useMemo(()=>{let P=Ii(f,c);return P==null?null:{location:{pathname:P,search:m,hash:v,state:E,key:w},navigationType:i}},[c,f,m,v,E,w,i]);return Fr(k!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:G.createElement(zr.Provider,{value:d},G.createElement(Ql.Provider,{children:e,value:k}))}function Ow({children:n,location:e}){return R1(np(n),e)}function np(n,e=[]){let t=[];return G.Children.forEach(n,(i,o)=>{if(!G.isValidElement(i))return;let a=[...e,o];if(i.type===G.Fragment){t.push.apply(t,np(i.props.children,a));return}Vt(i.type===os,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=np(i.props.children,a)),t.push(c)}),t}var Vc="get",Fc="application/x-www-form-urlencoded";function wh(n){return n!=null&&typeof n.tagName=="string"}function $1(n){return wh(n)&&n.tagName.toLowerCase()==="button"}function B1(n){return wh(n)&&n.tagName.toLowerCase()==="form"}function W1(n){return wh(n)&&n.tagName.toLowerCase()==="input"}function H1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function q1(n,e){return n.button===0&&(!e||e==="_self")&&!H1(n)}var Rc=null;function G1(){if(Rc===null)try{new FormData(document.createElement("form"),0),Rc=!1}catch{Rc=!0}return Rc}var K1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xf(n){return n!=null&&!K1.has(n)?(Fr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fc}"`),null):n}function Q1(n,e){let t,i,o,a,c;if(B1(n)){let d=n.getAttribute("action");i=d?Ii(d,e):null,t=n.getAttribute("method")||Vc,o=xf(n.getAttribute("enctype"))||Fc,a=new FormData(n)}else if($1(n)||W1(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(i=f?Ii(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Vc,o=xf(n.getAttribute("formenctype"))||xf(d.getAttribute("enctype"))||Fc,a=new FormData(d,n),!G1()){let{name:m,type:v,value:E}=n;if(v==="image"){let w=m?`${m}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else m&&a.append(m,E)}}else{if(wh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vc,i=null,o=Fc,c=n}return a&&o==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:a,body:c}}function $p(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Y1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function X1(n,e,t){let i=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await Y1(a,t);return c.links?c.links():[]}return[]}));return nI(i.flat(1).filter(J1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function hv(n,e,t,i,o,a){let c=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>c(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var E;let v=i.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(c(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Z1(n,e,{includeHydrateFallback:t}={}){return eI(n.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function eI(n){return[...new Set(n)]}function tI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function nI(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let a=JSON.stringify(tI(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rI=new Set([100,101,204,205]);function iI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ii(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Nw(){let n=G.useContext(Da);return $p(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function sI(){let n=G.useContext(_h);return $p(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bp=G.createContext(void 0);Bp.displayName="FrameworkContext";function Lw(){let n=G.useContext(Bp);return $p(n,"You must render this element inside a <HydratedRouter> element"),n}function oI(n,e){let t=G.useContext(Bp),[i,o]=G.useState(!1),[a,c]=G.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:E}=e,w=G.useRef(null);G.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let I=N=>{N.forEach(V=>{c(V.isIntersecting)})},S=new IntersectionObserver(I,{threshold:.5});return w.current&&S.observe(w.current),()=>{S.disconnect()}}},[n]),G.useEffect(()=>{if(i){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[i]);let k=()=>{o(!0)},P=()=>{o(!1),c(!1)};return t?n!=="intent"?[a,w,{}]:[a,w,{onFocus:Pl(d,k),onBlur:Pl(f,P),onMouseEnter:Pl(m,k),onMouseLeave:Pl(v,P),onTouchStart:Pl(E,k)}]:[!1,w,{}]}function Pl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function aI({page:n,...e}){let{router:t}=Nw(),i=G.useMemo(()=>Tw(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?G.createElement(uI,{page:n,matches:i,...e}):null}function lI(n){let{manifest:e,routeModules:t}=Lw(),[i,o]=G.useState([]);return G.useEffect(()=>{let a=!1;return X1(n,e,t).then(c=>{a||o(c)}),()=>{a=!0}},[n,e,t]),i}function uI({page:n,matches:e,...t}){let i=Ts(),{manifest:o,routeModules:a}=Lw(),{basename:c}=Nw(),{loaderData:d,matches:f}=sI(),m=G.useMemo(()=>hv(n,e,f,o,i,"data"),[n,e,f,o,i]),v=G.useMemo(()=>hv(n,e,f,o,i,"assets"),[n,e,f,o,i]),E=G.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let P=new Set,I=!1;if(e.forEach(N=>{var j;let V=o.routes[N.route.id];!V||!V.hasLoader||(!m.some(ee=>ee.route.id===N.route.id)&&N.route.id in d&&((j=a[N.route.id])!=null&&j.shouldRevalidate)||V.hasClientLoader?I=!0:P.add(N.route.id))}),P.size===0)return[];let S=iI(n,c);return I&&P.size>0&&S.searchParams.set("_routes",e.filter(N=>P.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[c,d,i,o,m,e,n,a]),w=G.useMemo(()=>Z1(v,o),[v,o]),k=lI(v);return G.createElement(G.Fragment,null,E.map(P=>G.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),w.map(P=>G.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),k.map(({key:P,link:I})=>G.createElement("link",{key:P,...I})))}function cI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Mw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mw&&(window.__reactRouterVersion="7.6.0")}catch{}function hI({basename:n,children:e,window:t}){let i=G.useRef();i.current==null&&(i.current=ZT({window:t,v5Compat:!0}));let o=i.current,[a,c]=G.useState({action:o.action,location:o.location}),d=G.useCallback(f=>{G.startTransition(()=>c(f))},[c]);return G.useLayoutEffect(()=>o.listen(d),[o,d]),G.createElement(z1,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var Vw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fw=G.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:a,replace:c,state:d,target:f,to:m,preventScrollReset:v,viewTransition:E,...w},k){let{basename:P}=G.useContext(zr),I=typeof m=="string"&&Vw.test(m),S,N=!1;if(typeof m=="string"&&I&&(S=m,Mw))try{let x=new URL(window.location.href),D=m.startsWith("//")?new URL(x.protocol+m):new URL(m),M=Ii(D.pathname,P);D.origin===x.origin&&M!=null?m=M+D.search+D.hash:N=!0}catch{Fr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=P1(m,{relative:o}),[j,ee,$]=oI(i,w),fe=mI(m,{replace:c,state:d,target:f,preventScrollReset:v,relative:o,viewTransition:E});function b(x){e&&e(x),x.defaultPrevented||fe(x)}let C=G.createElement("a",{...w,...$,href:S||V,onClick:N||a?e:b,ref:cI(k,ee),target:f,"data-discover":!I&&t==="render"?"true":void 0});return j&&!I?G.createElement(G.Fragment,null,C,G.createElement(aI,{page:V})):C});Fw.displayName="Link";var dI=G.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:f,...m},v){let E=Jl(c,{relative:m.relative}),w=Ts(),k=G.useContext(_h),{navigator:P,basename:I}=G.useContext(zr),S=k!=null&&wI(E)&&d===!0,N=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,V=w.pathname,j=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(V=V.toLowerCase(),j=j?j.toLowerCase():null,N=N.toLowerCase()),j&&I&&(j=Ii(j,I)||j);const ee=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let $=V===N||!o&&V.startsWith(N)&&V.charAt(ee)==="/",fe=j!=null&&(j===N||!o&&j.startsWith(N)&&j.charAt(N.length)==="/"),b={isActive:$,isPending:fe,isTransitioning:S},C=$?e:void 0,x;typeof i=="function"?x=i(b):x=[i,$?"active":null,fe?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(b):a;return G.createElement(Fw,{...m,"aria-current":C,className:x,ref:v,style:D,to:c,viewTransition:d},typeof f=="function"?f(b):f)});dI.displayName="NavLink";var fI=G.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:a,method:c=Vc,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:E,...w},k)=>{let P=vI(),I=_I(d,{relative:m}),S=c.toLowerCase()==="get"?"get":"post",N=typeof d=="string"&&Vw.test(d),V=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let ee=j.nativeEvent.submitter,$=(ee==null?void 0:ee.getAttribute("formmethod"))||c;P(ee||j.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:o,state:a,relative:m,preventScrollReset:v,viewTransition:E})};return G.createElement("form",{ref:k,method:S,action:I,onSubmit:i?f:V,...w,"data-discover":!N&&n==="render"?"true":void 0})});fI.displayName="Form";function pI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jw(n){let e=G.useContext(Da);return Vt(e,pI(n)),e}function mI(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:c}={}){let d=Yl(),f=Ts(),m=Jl(n,{relative:a});return G.useCallback(v=>{if(q1(v,e)){v.preventDefault();let E=t!==void 0?t:$l(f)===$l(m);d(n,{replace:E,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[f,d,m,t,i,e,n,o,a,c])}var gI=0,yI=()=>`__${String(++gI)}__`;function vI(){let{router:n}=jw("useSubmit"),{basename:e}=G.useContext(zr),t=V1();return G.useCallback(async(i,o={})=>{let{action:a,method:c,encType:d,formData:f,body:m}=Q1(i,e);if(o.navigate===!1){let v=o.fetcherKey||yI();await n.fetch(v,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function _I(n,{relative:e}={}){let{basename:t}=G.useContext(zr),i=G.useContext($r);Vt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Jl(n||".",{relative:e})},c=Ts();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ei([t,a.pathname])),$l(a)}function wI(n,e={}){let t=G.useContext(Aw);Vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jw("useViewTransitionState"),o=Jl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Yc(o.pathname,c)!=null||Yc(o.pathname,a)!=null}[...rI];const EI=()=>{};var dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},SI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,d=c?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,v=a>>2,E=(a&3)<<4|d>>4;let w=(d&15)<<2|m>>6,k=m&63;f||(k=64,c||(w=64)),i.push(t[v],t[E],t[w],t[k])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Uw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||E==null)throw new TI;const w=a<<2|d>>4;if(i.push(w),m!==64){const k=d<<4&240|m>>2;if(i.push(k),E!==64){const P=m<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(n){const e=Uw(n);return zw.encodeByteArray(e,!0)},Jc=function(n){return II(n).replace(/\./g,"")},$w=function(n){try{return zw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=()=>CI().__FIREBASE_DEFAULTS__,AI=()=>{if(typeof process>"u"||typeof dv>"u")return;const n=dv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$w(n[1]);return e&&JSON.parse(e)},Eh=()=>{try{return EI()||PI()||AI()||RI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bw=n=>{var e,t;return(t=(e=Eh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kI=n=>{const e=Bw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ww=()=>{var n;return(n=Eh())===null||n===void 0?void 0:n.config},Hw=n=>{var e;return(e=Eh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){return n.endsWith(".cloudworkstations.dev")}async function qw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Jc(JSON.stringify(t)),Jc(JSON.stringify(c)),""].join(".")}const Nl={};function DI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nl))Nl[e]?n.emulator.push(e):n.prod.push(e);return n}function OI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let fv=!1;function Sh(n,e){if(typeof window>"u"||typeof document>"u"||!Xl(window.location.host)||Nl[n]===e||Nl[n]||fv)return;Nl[n]=e;function t(w){return`__firebase__banner__${w}`}const i="__firebase__banner",a=DI().prod.length>0;function c(){const w=document.getElementById(i);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,k){w.setAttribute("width","24"),w.setAttribute("id",k),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{fv=!0,c()},w}function v(w,k){w.setAttribute("id",k),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function E(){const w=OI(i),k=t("text"),P=document.getElementById(k)||document.createElement("span"),I=t("learnmore"),S=document.getElementById(I)||document.createElement("a"),N=t("preprendIcon"),V=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const j=w.element;d(j),v(S,I);const ee=m();f(V,N),j.append(V,P,S,ee),document.body.appendChild(j)}a?(P.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function LI(){var n;const e=(n=Eh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function FI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jI(){const n=Rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UI(){return!LI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zI(){try{return typeof indexedDB=="object"}catch{return!1}}function $I(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="FirebaseError";class xi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=BI,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?WI(a,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new xi(o,d,i)}}function WI(n,e){return n.replace(HI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const HI=/\{\$([^}]+)}/g;function qI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ci(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],c=e[o];if(pv(a)&&pv(c)){if(!Ci(a,c))return!1}else if(a!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function pv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function kl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function xl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function GI(n,e){const t=new KI(n,e);return t.subscribe.bind(t)}class KI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");QI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=bf),o.error===void 0&&(o.error=bf),o.complete===void 0&&(o.complete=bf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n){return n&&n._delegate?n._delegate:n}class eo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XI(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JI(n){return n===Js?void 0:n}function XI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ct||(ct={}));const eC={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},tC=ct.INFO,nC={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},rC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=nC[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wp{constructor(e){this.name=e,this._logLevel=tC,this._logHandler=rC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const iC=(n,e)=>e.some(t=>n instanceof t);let mv,gv;function sC(){return mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oC(){return gv||(gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gw=new WeakMap,rp=new WeakMap,Kw=new WeakMap,Df=new WeakMap,Hp=new WeakMap;function aC(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(ls(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Gw.set(t,n)}).catch(()=>{}),Hp.set(e,n),e}function lC(n){if(rp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});rp.set(n,e)}let ip={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Kw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uC(n){ip=n(ip)}function cC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Of(this),e,...t);return Kw.set(i,e.sort?e.sort():[e]),ls(i)}:oC().includes(n)?function(...e){return n.apply(Of(this),e),ls(Gw.get(this))}:function(...e){return ls(n.apply(Of(this),e))}}function hC(n){return typeof n=="function"?cC(n):(n instanceof IDBTransaction&&lC(n),iC(n,sC())?new Proxy(n,ip):n)}function ls(n){if(n instanceof IDBRequest)return aC(n);if(Df.has(n))return Df.get(n);const e=hC(n);return e!==n&&(Df.set(n,e),Hp.set(e,n)),e}const Of=n=>Hp.get(n);function dC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),d=ls(c);return i&&c.addEventListener("upgradeneeded",f=>{i(ls(c.result),f.oldVersion,f.newVersion,ls(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const fC=["get","getKey","getAll","getAllKeys","count"],pC=["put","add","delete","clear"],Nf=new Map;function yv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nf.get(e))return Nf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=pC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||fC.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,o?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return Nf.set(e,a),a}uC(n=>({...n,get:(e,t,i)=>yv(e,t)||n.get(e,t,i),has:(e,t)=>!!yv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function gC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",vv="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Wp("@firebase/app"),yC="@firebase/app-compat",vC="@firebase/analytics-compat",_C="@firebase/analytics",wC="@firebase/app-check-compat",EC="@firebase/app-check",SC="@firebase/auth",TC="@firebase/auth-compat",IC="@firebase/database",CC="@firebase/data-connect",PC="@firebase/database-compat",AC="@firebase/functions",RC="@firebase/functions-compat",kC="@firebase/installations",xC="@firebase/installations-compat",bC="@firebase/messaging",DC="@firebase/messaging-compat",OC="@firebase/performance",NC="@firebase/performance-compat",LC="@firebase/remote-config",MC="@firebase/remote-config-compat",VC="@firebase/storage",FC="@firebase/storage-compat",jC="@firebase/firestore",UC="@firebase/vertexai",zC="@firebase/firestore-compat",$C="firebase",BC="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",WC={[sp]:"fire-core",[yC]:"fire-core-compat",[_C]:"fire-analytics",[vC]:"fire-analytics-compat",[EC]:"fire-app-check",[wC]:"fire-app-check-compat",[SC]:"fire-auth",[TC]:"fire-auth-compat",[IC]:"fire-rtdb",[CC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[AC]:"fire-fn",[RC]:"fire-fn-compat",[kC]:"fire-iid",[xC]:"fire-iid-compat",[bC]:"fire-fcm",[DC]:"fire-fcm-compat",[OC]:"fire-perf",[NC]:"fire-perf-compat",[LC]:"fire-rc",[MC]:"fire-rc-compat",[VC]:"fire-gcs",[FC]:"fire-gcs-compat",[jC]:"fire-fst",[zC]:"fire-fst-compat",[UC]:"fire-vertex","fire-js":"fire-js",[$C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,HC=new Map,ap=new Map;function _v(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ga(n){const e=n.name;if(ap.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,n);for(const t of Xc.values())_v(t,n);for(const t of HC.values())_v(t,n);return!0}function qp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new Zl("app","Firebase",qC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=BC;function Qw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw us.create("bad-app-name",{appName:String(o)});if(t||(t=Ww()),!t)throw us.create("no-options");const a=Xc.get(o);if(a){if(Ci(t,a.options)&&Ci(i,a.config))return a;throw us.create("duplicate-app",{appName:o})}const c=new ZI(o);for(const f of ap.values())c.addComponent(f);const d=new GC(t,i,c);return Xc.set(o,d),d}function Yw(n=op){const e=Xc.get(n);if(!e&&n===op&&Ww())return Qw();if(!e)throw us.create("no-app",{appName:n});return e}function cs(n,e,t){var i;let o=(i=WC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(d.join(" "));return}ga(new eo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="firebase-heartbeat-database",QC=1,Bl="firebase-heartbeat-store";let Lf=null;function Jw(){return Lf||(Lf=dC(KC,QC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bl)}catch(t){console.warn(t)}}}}).catch(n=>{throw us.create("idb-open",{originalErrorMessage:n.message})})),Lf}async function YC(n){try{const t=(await Jw()).transaction(Bl),i=await t.objectStore(Bl).get(Xw(n));return await t.done,i}catch(e){if(e instanceof xi)Pi.warn(e.message);else{const t=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function wv(n,e){try{const i=(await Jw()).transaction(Bl,"readwrite");await i.objectStore(Bl).put(e,Xw(n)),await i.done}catch(t){if(t instanceof xi)Pi.warn(t.message);else{const i=us.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(i.message)}}}function Xw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=1024,XC=30;class ZC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ev();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>XC){const c=nP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ev(),{heartbeatsToSend:i,unsentEntries:o}=eP(this._heartbeatsCache.heartbeats),a=Jc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pi.warn(t),""}}}function Ev(){return new Date().toISOString().substring(0,10)}function eP(n,e=JC){const t=[];let i=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Sv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class tP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zI()?$I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return wv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return wv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sv(n){return Jc(JSON.stringify({version:2,heartbeats:n})).length}function nP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n){ga(new eo("platform-logger",e=>new mC(e),"PRIVATE")),ga(new eo("heartbeat",e=>new ZC(e),"PRIVATE")),cs(sp,vv,n),cs(sp,vv,"esm2017"),cs("fire-js","")}rP("");var iP="firebase",sP="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(iP,sP,"app");function Gp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function Zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oP=Zw,e0=new Zl("auth","Firebase",Zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Wp("@firebase/auth");function aP(n,...e){Zc.logLevel<=ct.WARN&&Zc.warn(`Auth (${Na}): ${n}`,...e)}function jc(n,...e){Zc.logLevel<=ct.ERROR&&Zc.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,...e){throw Qp(n,...e)}function Vr(n,...e){return Qp(n,...e)}function Kp(n,e,t){const i=Object.assign(Object.assign({},oP()),{[e]:t});return new Zl("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return Kp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lP(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&gr(n,"argument-error"),Kp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return e0.create(n,...e)}function Ze(n,e,...t){if(!n)throw Qp(e,...t)}function _i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jc(e),new Error(e)}function Ai(n,e){n||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function uP(){return Tv()==="http:"||Tv()==="https:"}function Tv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uP()||VI()||"connection"in navigator)?navigator.onLine:!0}function hP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ai(t>e,"Short delay should be less than long delay!"),this.isMobile=NI()||FI()}get(){return cP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(n,e){Ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pP=new tu(3e4,6e4);function co(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function bi(n,e,t,i,o={}){return n0(n,o,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=eu(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return MI()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(m.credentials="include"),t0.fetch()(await r0(n,n.config.apiHost,t,d),m)})}async function n0(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},dP),e);try{const o=new gP(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw kc(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw kc(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw kc(n,"user-disabled",c);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Kp(n,v,m);gr(n,v)}}catch(o){if(o instanceof xi)throw o;gr(n,"network-request-failed",{message:String(o)})}}async function Th(n,e,t,i,o={}){const a=await bi(n,e,t,i,o);return"mfaPendingCredential"in a&&gr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function r0(n,e,t,i){const o=`${e}${t}?${i}`,a=n,c=a.config.emulator?Yp(n.config,o):`${n.config.apiScheme}://${o}`;return fP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function mP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vr(this.auth,"network-request-failed")),pP.get())})}}function kc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Vr(n,e,i);return o.customData._tokenResponse=t,o}function Iv(n){return n!==void 0&&n.enterprise!==void 0}class yP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vP(n,e){return bi(n,"GET","/v2/recaptchaConfig",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e){return bi(n,"POST","/v1/accounts:delete",e)}async function eh(n,e){return bi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wP(n,e=!1){const t=sn(n),i=await t.getIdToken(e),o=Jp(i);Ze(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Ll(Mf(o.auth_time)),issuedAtTime:Ll(Mf(o.iat)),expirationTime:Ll(Mf(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Mf(n){return Number(n)*1e3}function Jp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=$w(t);return o?JSON.parse(o):(jc("Failed to decode base64 JWT payload"),null)}catch(o){return jc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Cv(n){const e=Jp(n);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof xi&&EP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function EP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(n){var e;const t=n.auth,i=await n.getIdToken(),o=await ya(n,eh(t,{idToken:i}));Ze(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?i0(a.providerUserInfo):[],d=IP(n.providerData,c),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new up(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function TP(n){const e=sn(n);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function i0(n){return n.map(e=>{var{providerId:t}=e,i=Gp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e){const t=await n0(n,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await r0(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",t0.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function PP(n,e){return bi(n,"POST","/v2/accounts:revokeToken",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ze(e.length!==0,"internal-error");const t=Cv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await CP(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,c=new da;return i&&(Ze(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ze(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ze(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,e){Ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new up(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ya(this,this.stsTokenManager.getToken(this.auth,e));return Ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wP(this,e)}reload(){return TP(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await th(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await ya(this,_P(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,c,d,f,m,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,w=(o=t.email)!==null&&o!==void 0?o:void 0,k=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,P=(c=t.photoURL)!==null&&c!==void 0?c:void 0,I=(d=t.tenantId)!==null&&d!==void 0?d:void 0,S=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,N=(m=t.createdAt)!==null&&m!==void 0?m:void 0,V=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:j,emailVerified:ee,isAnonymous:$,providerData:fe,stsTokenManager:b}=t;Ze(j&&b,e,"internal-error");const C=da.fromJSON(this.name,b);Ze(typeof j=="string",e,"internal-error"),ts(E,e.name),ts(w,e.name),Ze(typeof ee=="boolean",e,"internal-error"),Ze(typeof $=="boolean",e,"internal-error"),ts(k,e.name),ts(P,e.name),ts(I,e.name),ts(S,e.name),ts(N,e.name),ts(V,e.name);const x=new Lr({uid:j,auth:e,email:w,emailVerified:ee,displayName:E,isAnonymous:$,photoURL:P,phoneNumber:k,tenantId:I,stsTokenManager:C,createdAt:N,lastLoginAt:V});return fe&&Array.isArray(fe)&&(x.providerData=fe.map(D=>Object.assign({},D))),S&&(x._redirectEventId=S),x}static async _fromIdTokenResponse(e,t,i=!1){const o=new da;o.updateFromServerResponse(t);const a=new Lr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await th(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ze(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?i0(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new da;d.updateFromIdToken(i);const f=new Lr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new up(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function wi(n){Ai(n instanceof Function,"Expected a class definition");let e=Pv.get(n);return e?(Ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Pv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}s0.type="NONE";const Av=s0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n,e,t){return`firebase:${n}:${e}:${t}`}class fa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Uc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Uc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eh(this.auth,{idToken:e}).catch(()=>{});return t?Lr._fromGetAccountInfoResponse(this.auth,t,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new fa(wi(Av),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||wi(Av);const c=Uc(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(c);if(v){let E;if(typeof v=="string"){const w=await eh(e,{idToken:v}).catch(()=>{});if(!w)break;E=await Lr._fromGetAccountInfoResponse(e,w,v)}else E=Lr._fromJSON(e,v);m!==a&&(d=E),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new fa(a,e,i):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new fa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h0(e))return"Blackberry";if(d0(e))return"Webos";if(a0(e))return"Safari";if((e.includes("chrome/")||l0(e))&&!e.includes("edge/"))return"Chrome";if(c0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function o0(n=Rn()){return/firefox\//i.test(n)}function a0(n=Rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l0(n=Rn()){return/crios\//i.test(n)}function u0(n=Rn()){return/iemobile/i.test(n)}function c0(n=Rn()){return/android/i.test(n)}function h0(n=Rn()){return/blackberry/i.test(n)}function d0(n=Rn()){return/webos/i.test(n)}function Xp(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AP(n=Rn()){var e;return Xp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RP(){return jI()&&document.documentMode===10}function f0(n=Rn()){return Xp(n)||c0(n)||d0(n)||h0(n)||/windows phone/i.test(n)||u0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e=[]){let t;switch(n){case"Browser":t=Rv(Rn());break;case"Worker":t=`${Rv(Rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e={}){return bi(n,"GET","/v2/passwordPolicy",co(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=6;class DP{constructor(e){var t,i,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:bP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kv(this),this.idTokenSubscription=new kv(this),this.beforeStateQueue=new kP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eh(this,{idToken:e}),i=await Lr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(hs(this));const t=e?sn(e):null;return t&&Ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xP(this),t=new DP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await PP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wi(e)||this._popupRedirectResolver;Ze(t,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[wi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&aP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ho(n){return sn(n)}class kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=GI(t=>this.observer=t)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NP(n){Ih=n}function m0(n){return Ih.loadJS(n)}function LP(){return Ih.recaptchaEnterpriseScript}function MP(){return Ih.gapiScript}function VP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class FP{constructor(){this.enterprise=new jP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const UP="recaptcha-enterprise",g0="NO_RECAPTCHA";class zP{constructor(e){this.type=UP,this.auth=ho(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{vP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new yP(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function o(a,c,d){const f=window.grecaptcha;Iv(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(g0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FP().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!t&&Iv(window.grecaptcha))o(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=LP();f.length!==0&&(f+=d),m0(f).then(()=>{o(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function xv(n,e,t,i=!1,o=!1){const a=new zP(n);let c;if(o)c=g0;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bv(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await xv(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n,e){const t=qp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ci(a,e??{}))return o;gr(o,"already-initialized")}return t.initialize({options:e})}function BP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(wi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WP(n,e,t){const i=ho(n);Ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=y0(e),{host:c,port:d}=HP(e),f=d===null?"":`:${d}`,m={url:`${a}//${c}${f}/`},v=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ze(Ci(m,i.config.emulator)&&Ci(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Xl(c)?(Sh("Auth",!0),qw(`${a}//${c}${f}`)):qP()}function y0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function HP(n){const e=y0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:Dv(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:Dv(c)}}}function Dv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function GP(n,e){return bi(n,"POST","/v1/accounts:update",e)}async function KP(n,e){return bi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(n,e){return Th(n,"POST","/v1/accounts:signInWithPassword",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e){return Th(n,"POST","/v1/accounts:signInWithEmailLink",co(n,e))}async function JP(n,e){return Th(n,"POST","/v1/accounts:signInWithEmailLink",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Zp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Wl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Wl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bv(e,t,"signInWithPassword",QP);case"emailLink":return YP(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bv(e,i,"signUpPassword",KP);case"emailLink":return JP(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(n,e){return Th(n,"POST","/v1/accounts:signInWithIdp",co(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="http://localhost";class to extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Gp(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new to(i,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,pa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pa(e,t)}buildRequest(){const e={requestUri:XP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eA(n){const e=kl(xl(n)).link,t=e?kl(xl(e)).deep_link_id:null,i=kl(xl(n)).deep_link_id;return(i?kl(xl(i)).link:null)||i||t||e||n}class em{constructor(e){var t,i,o,a,c,d;const f=kl(xl(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(i=f.oobCode)!==null&&i!==void 0?i:null,E=ZP((o=f.mode)!==null&&o!==void 0?o:null);Ze(m&&v&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=eA(e);try{return new em(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.providerId=La.PROVIDER_ID}static credential(e,t){return Wl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=em.parseLink(t);return Ze(i,"argument-error"),Wl._fromEmailAndCode(e,i.code,i.tenantId)}}La.PROVIDER_ID="password";La.EMAIL_PASSWORD_SIGN_IN_METHOD="password";La.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends tm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends nu{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return to._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends nu{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends nu{constructor(){super("twitter.com")}static credential(e,t){return to._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ss.credential(t,i)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Lr._fromIdTokenResponse(e,i,o),c=Ov(i);return new va({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ov(i);return new va({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ov(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends xi{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new nh(e,t,i,o)}}function v0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(n,a,e,i):a})}async function tA(n,e,t=!1){const i=await ya(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return va._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(n,e,t=!1){const{auth:i}=n;if(pr(i.app))return Promise.reject(hs(i));const o="reauthenticate";try{const a=await ya(n,v0(i,o,e,n),t);Ze(a.idToken,i,"internal-error");const c=Jp(a.idToken);Ze(c,i,"internal-error");const{sub:d}=c;return Ze(n.uid===d,i,"user-mismatch"),va._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&gr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(n,e,t=!1){if(pr(n.app))return Promise.reject(hs(n));const i="signIn",o=await v0(n,i,e),a=await va._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function rA(n,e){return _0(ho(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(n){const e=ho(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sA(n,e,t){return pr(n.app)?Promise.reject(hs(n)):rA(sn(n),La.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iA(n),i})}function oA(n,e){return aA(sn(n),null,e)}async function aA(n,e,t){const{auth:i}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(a.password=t);const c=await ya(n,GP(i,a));await n._updateTokensIfNecessary(c,!0)}function lA(n,e,t,i){return sn(n).onIdTokenChanged(e,t,i)}function uA(n,e,t){return sn(n).beforeAuthStateChanged(e,t)}function cA(n,e,t,i){return sn(n).onAuthStateChanged(e,t,i)}function hA(n){return sn(n).signOut()}const rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1e3,fA=10;class E0 extends w0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);RP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},dA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}E0.type="LOCAL";const pA=E0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends w0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}S0.type="SESSION";const T0=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ch(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async m=>m(t.origin,a)),f=await mA(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const m=nm("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const w=E;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(w.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function yA(n){ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function vA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _A(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function wA(){return I0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firebaseLocalStorageDb",EA=1,ih="firebaseLocalStorage",P0="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ph(n,e){return n.transaction([ih],e?"readwrite":"readonly").objectStore(ih)}function SA(){const n=indexedDB.deleteDatabase(C0);return new ru(n).toPromise()}function cp(){const n=indexedDB.open(C0,EA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ih,{keyPath:P0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ih)?e(i):(i.close(),await SA(),e(await cp()))})})}async function Nv(n,e,t){const i=Ph(n,!0).put({[P0]:e,value:t});return new ru(i).toPromise()}async function TA(n,e){const t=Ph(n,!1).get(e),i=await new ru(t).toPromise();return i===void 0?null:i.value}function Lv(n,e){const t=Ph(n,!0).delete(e);return new ru(t).toPromise()}const IA=800,CA=3;class A0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>CA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(wA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vA(),!this.activeServiceWorker)return;this.sender=new gA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_A()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await Nv(e,rh,"1"),await Lv(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>TA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Ph(o,!1).getAll();return new ru(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A0.type="LOCAL";const PA=A0;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n,e){return e?wi(e):(Ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AA(n){return _0(n.auth,new rm(n),n.bypassAuthState)}function RA(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),nA(t,new rm(n),n.bypassAuthState)}async function kA(n){const{auth:e,user:t}=n;return Ze(t,e,"internal-error"),tA(t,new rm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AA;case"linkViaPopup":case"linkViaRedirect":return kA;case"reauthViaPopup":case"reauthViaRedirect":return RA;default:gr(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new tu(2e3,1e4);async function bA(n,e,t){if(pr(n.app))return Promise.reject(Vr(n,"operation-not-supported-in-this-environment"));const i=ho(n);lP(n,e,tm);const o=R0(i,t);return new Xs(i,"signInViaPopup",e,o).executeNotNull()}class Xs extends k0{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Ai(this.filter.length===1,"Popup operations only handle one event");const e=nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xA.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="pendingRedirect",zc=new Map;class OA extends k0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const i=await NA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NA(n,e){const t=VA(e),i=MA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function LA(n,e){zc.set(n._key(),e)}function MA(n){return wi(n._redirectPersistence)}function VA(n){return Uc(DA,n.config.apiKey,n.name)}async function FA(n,e,t=!1){if(pr(n.app))return Promise.reject(hs(n));const i=ho(n),o=R0(i,e),c=await new OA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=10*60*1e3;class UA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!x0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mv(e))}saveEventToCache(e){this.cachedEventUids.add(Mv(e)),this.lastProcessedEventTime=Date.now()}}function Mv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function x0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(n,e={}){return bi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WA=/^https?/;async function HA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $A(n);for(const t of e)try{if(qA(t))return}catch{}gr(n,"unauthorized-domain")}function qA(n){const e=lp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!WA.test(t))return!1;if(BA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new tu(3e4,6e4);function Vv(){const n=ei().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KA(n){return new Promise((e,t)=>{var i,o,a;function c(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),t(Vr(n,"network-request-failed"))},timeout:GA.get()})}if(!((o=(i=ei().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=ei().gapi)===null||a===void 0)&&a.load)c();else{const d=VP("iframefcb");return ei()[d]=()=>{gapi.load?c():t(Vr(n,"network-request-failed"))},m0(`${MP()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw $c=null,e})}let $c=null;function QA(n){return $c=$c||KA(n),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new tu(5e3,15e3),JA="__/auth/iframe",XA="emulator/auth/iframe",ZA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tR(n){const e=n.config;Ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Yp(e,XA):`https://${n.config.authDomain}/${JA}`,i={apiKey:e.apiKey,appName:n.name,v:Na},o=eR.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${eu(i).slice(1)}`}async function nR(n){const e=await QA(n),t=ei().gapi;return Ze(t,n,"internal-error"),e.open({where:document.body,url:tR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZA,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const c=Vr(n,"network-request-failed"),d=ei().setTimeout(()=>{a(c)},YA.get());function f(){ei().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iR=500,sR=600,oR="_blank",aR="http://localhost";class Fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lR(n,e,t,i=iR,o=sR){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},rR),{width:i.toString(),height:o.toString(),top:a,left:c}),m=Rn().toLowerCase();t&&(d=l0(m)?oR:t),o0(m)&&(e=e||aR,f.scrollbars="yes");const v=Object.entries(f).reduce((w,[k,P])=>`${w}${k}=${P},`,"");if(AP(m)&&d!=="_self")return uR(e||"",d),new Fv(null);const E=window.open(e||"",d,v);Ze(E,n,"popup-blocked");try{E.focus()}catch{}return new Fv(E)}function uR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="__/auth/handler",hR="emulator/auth/handler",dR=encodeURIComponent("fac");async function jv(n,e,t,i,o,a){Ze(n.config.authDomain,n,"auth-domain-config-required"),Ze(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Na,eventId:o};if(e instanceof tm){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",qI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof nu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${dR}=${encodeURIComponent(f)}`:"";return`${fR(n)}?${eu(d).slice(1)}${m}`}function fR({config:n}){return n.emulator?Yp(n,hR):`https://${n.authDomain}/${cR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="webStorageSupport";class pR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T0,this._completeRedirectFn=FA,this._overrideRedirectResult=LA}async _openPopup(e,t,i,o){var a;Ai((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await jv(e,t,i,lp(),o);return lR(e,c,nm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await jv(e,t,i,lp(),o);return yA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Ai(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await nR(e),i=new UA(e);return t.register("authEvent",o=>(Ze(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vf,{type:Vf},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Vf];c!==void 0&&t(!!c),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return f0()||a0()||Xp()}}const mR=pR;var Uv="@firebase/auth",zv="1.10.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(n){ga(new eo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ze(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p0(n)},m=new OP(i,o,a,f);return BP(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ga(new eo("auth-internal",e=>{const t=ho(e.getProvider("auth").getImmediate());return(i=>new gR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(Uv,zv,yR(n)),cs(Uv,zv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=5*60,wR=Hw("authIdTokenMaxAge")||_R;let $v=null;const ER=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>wR)return;const o=t==null?void 0:t.token;$v!==o&&($v=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function SR(n=Yw()){const e=qp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$P(n,{popupRedirectResolver:mR,persistence:[PA,pA,T0]}),i=Hw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=ER(a.toString());uA(t,c,()=>c(t.currentUser)),lA(t,d=>c(d))}}const o=Bw("auth");return o?WP(t,`http://${o}`):Sh("Auth",!1),t}function TR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}NP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Vr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",TR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,b0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,C){function x(){}x.prototype=C.prototype,b.D=C.prototype,b.prototype=new x,b.prototype.constructor=b,b.C=function(D,M,U){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return C.prototype[M].apply(D,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,C,x){x||(x=0);var D=Array(16);if(typeof C=="string")for(var M=0;16>M;++M)D[M]=C.charCodeAt(x++)|C.charCodeAt(x++)<<8|C.charCodeAt(x++)<<16|C.charCodeAt(x++)<<24;else for(M=0;16>M;++M)D[M]=C[x++]|C[x++]<<8|C[x++]<<16|C[x++]<<24;C=b.g[0],x=b.g[1],M=b.g[2];var U=b.g[3],A=C+(U^x&(M^U))+D[0]+3614090360&4294967295;C=x+(A<<7&4294967295|A>>>25),A=U+(M^C&(x^M))+D[1]+3905402710&4294967295,U=C+(A<<12&4294967295|A>>>20),A=M+(x^U&(C^x))+D[2]+606105819&4294967295,M=U+(A<<17&4294967295|A>>>15),A=x+(C^M&(U^C))+D[3]+3250441966&4294967295,x=M+(A<<22&4294967295|A>>>10),A=C+(U^x&(M^U))+D[4]+4118548399&4294967295,C=x+(A<<7&4294967295|A>>>25),A=U+(M^C&(x^M))+D[5]+1200080426&4294967295,U=C+(A<<12&4294967295|A>>>20),A=M+(x^U&(C^x))+D[6]+2821735955&4294967295,M=U+(A<<17&4294967295|A>>>15),A=x+(C^M&(U^C))+D[7]+4249261313&4294967295,x=M+(A<<22&4294967295|A>>>10),A=C+(U^x&(M^U))+D[8]+1770035416&4294967295,C=x+(A<<7&4294967295|A>>>25),A=U+(M^C&(x^M))+D[9]+2336552879&4294967295,U=C+(A<<12&4294967295|A>>>20),A=M+(x^U&(C^x))+D[10]+4294925233&4294967295,M=U+(A<<17&4294967295|A>>>15),A=x+(C^M&(U^C))+D[11]+2304563134&4294967295,x=M+(A<<22&4294967295|A>>>10),A=C+(U^x&(M^U))+D[12]+1804603682&4294967295,C=x+(A<<7&4294967295|A>>>25),A=U+(M^C&(x^M))+D[13]+4254626195&4294967295,U=C+(A<<12&4294967295|A>>>20),A=M+(x^U&(C^x))+D[14]+2792965006&4294967295,M=U+(A<<17&4294967295|A>>>15),A=x+(C^M&(U^C))+D[15]+1236535329&4294967295,x=M+(A<<22&4294967295|A>>>10),A=C+(M^U&(x^M))+D[1]+4129170786&4294967295,C=x+(A<<5&4294967295|A>>>27),A=U+(x^M&(C^x))+D[6]+3225465664&4294967295,U=C+(A<<9&4294967295|A>>>23),A=M+(C^x&(U^C))+D[11]+643717713&4294967295,M=U+(A<<14&4294967295|A>>>18),A=x+(U^C&(M^U))+D[0]+3921069994&4294967295,x=M+(A<<20&4294967295|A>>>12),A=C+(M^U&(x^M))+D[5]+3593408605&4294967295,C=x+(A<<5&4294967295|A>>>27),A=U+(x^M&(C^x))+D[10]+38016083&4294967295,U=C+(A<<9&4294967295|A>>>23),A=M+(C^x&(U^C))+D[15]+3634488961&4294967295,M=U+(A<<14&4294967295|A>>>18),A=x+(U^C&(M^U))+D[4]+3889429448&4294967295,x=M+(A<<20&4294967295|A>>>12),A=C+(M^U&(x^M))+D[9]+568446438&4294967295,C=x+(A<<5&4294967295|A>>>27),A=U+(x^M&(C^x))+D[14]+3275163606&4294967295,U=C+(A<<9&4294967295|A>>>23),A=M+(C^x&(U^C))+D[3]+4107603335&4294967295,M=U+(A<<14&4294967295|A>>>18),A=x+(U^C&(M^U))+D[8]+1163531501&4294967295,x=M+(A<<20&4294967295|A>>>12),A=C+(M^U&(x^M))+D[13]+2850285829&4294967295,C=x+(A<<5&4294967295|A>>>27),A=U+(x^M&(C^x))+D[2]+4243563512&4294967295,U=C+(A<<9&4294967295|A>>>23),A=M+(C^x&(U^C))+D[7]+1735328473&4294967295,M=U+(A<<14&4294967295|A>>>18),A=x+(U^C&(M^U))+D[12]+2368359562&4294967295,x=M+(A<<20&4294967295|A>>>12),A=C+(x^M^U)+D[5]+4294588738&4294967295,C=x+(A<<4&4294967295|A>>>28),A=U+(C^x^M)+D[8]+2272392833&4294967295,U=C+(A<<11&4294967295|A>>>21),A=M+(U^C^x)+D[11]+1839030562&4294967295,M=U+(A<<16&4294967295|A>>>16),A=x+(M^U^C)+D[14]+4259657740&4294967295,x=M+(A<<23&4294967295|A>>>9),A=C+(x^M^U)+D[1]+2763975236&4294967295,C=x+(A<<4&4294967295|A>>>28),A=U+(C^x^M)+D[4]+1272893353&4294967295,U=C+(A<<11&4294967295|A>>>21),A=M+(U^C^x)+D[7]+4139469664&4294967295,M=U+(A<<16&4294967295|A>>>16),A=x+(M^U^C)+D[10]+3200236656&4294967295,x=M+(A<<23&4294967295|A>>>9),A=C+(x^M^U)+D[13]+681279174&4294967295,C=x+(A<<4&4294967295|A>>>28),A=U+(C^x^M)+D[0]+3936430074&4294967295,U=C+(A<<11&4294967295|A>>>21),A=M+(U^C^x)+D[3]+3572445317&4294967295,M=U+(A<<16&4294967295|A>>>16),A=x+(M^U^C)+D[6]+76029189&4294967295,x=M+(A<<23&4294967295|A>>>9),A=C+(x^M^U)+D[9]+3654602809&4294967295,C=x+(A<<4&4294967295|A>>>28),A=U+(C^x^M)+D[12]+3873151461&4294967295,U=C+(A<<11&4294967295|A>>>21),A=M+(U^C^x)+D[15]+530742520&4294967295,M=U+(A<<16&4294967295|A>>>16),A=x+(M^U^C)+D[2]+3299628645&4294967295,x=M+(A<<23&4294967295|A>>>9),A=C+(M^(x|~U))+D[0]+4096336452&4294967295,C=x+(A<<6&4294967295|A>>>26),A=U+(x^(C|~M))+D[7]+1126891415&4294967295,U=C+(A<<10&4294967295|A>>>22),A=M+(C^(U|~x))+D[14]+2878612391&4294967295,M=U+(A<<15&4294967295|A>>>17),A=x+(U^(M|~C))+D[5]+4237533241&4294967295,x=M+(A<<21&4294967295|A>>>11),A=C+(M^(x|~U))+D[12]+1700485571&4294967295,C=x+(A<<6&4294967295|A>>>26),A=U+(x^(C|~M))+D[3]+2399980690&4294967295,U=C+(A<<10&4294967295|A>>>22),A=M+(C^(U|~x))+D[10]+4293915773&4294967295,M=U+(A<<15&4294967295|A>>>17),A=x+(U^(M|~C))+D[1]+2240044497&4294967295,x=M+(A<<21&4294967295|A>>>11),A=C+(M^(x|~U))+D[8]+1873313359&4294967295,C=x+(A<<6&4294967295|A>>>26),A=U+(x^(C|~M))+D[15]+4264355552&4294967295,U=C+(A<<10&4294967295|A>>>22),A=M+(C^(U|~x))+D[6]+2734768916&4294967295,M=U+(A<<15&4294967295|A>>>17),A=x+(U^(M|~C))+D[13]+1309151649&4294967295,x=M+(A<<21&4294967295|A>>>11),A=C+(M^(x|~U))+D[4]+4149444226&4294967295,C=x+(A<<6&4294967295|A>>>26),A=U+(x^(C|~M))+D[11]+3174756917&4294967295,U=C+(A<<10&4294967295|A>>>22),A=M+(C^(U|~x))+D[2]+718787259&4294967295,M=U+(A<<15&4294967295|A>>>17),A=x+(U^(M|~C))+D[9]+3951481745&4294967295,b.g[0]=b.g[0]+C&4294967295,b.g[1]=b.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+M&4294967295,b.g[3]=b.g[3]+U&4294967295}i.prototype.u=function(b,C){C===void 0&&(C=b.length);for(var x=C-this.blockSize,D=this.B,M=this.h,U=0;U<C;){if(M==0)for(;U<=x;)o(this,b,U),U+=this.blockSize;if(typeof b=="string"){for(;U<C;)if(D[M++]=b.charCodeAt(U++),M==this.blockSize){o(this,D),M=0;break}}else for(;U<C;)if(D[M++]=b[U++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=C},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var C=1;C<b.length-8;++C)b[C]=0;var x=8*this.o;for(C=b.length-8;C<b.length;++C)b[C]=x&255,x/=256;for(this.u(b),b=Array(16),C=x=0;4>C;++C)for(var D=0;32>D;D+=8)b[x++]=this.g[C]>>>D&255;return b};function a(b,C){var x=d;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=C(b)}function c(b,C){this.h=C;for(var x=[],D=!0,M=b.length-1;0<=M;M--){var U=b[M]|0;D&&U==C||(x[M]=U,D=!1)}this.g=x}var d={};function f(b){return-128<=b&&128>b?a(b,function(C){return new c([C|0],0>C?-1:0)}):new c([b|0],0>b?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return E;if(0>b)return S(m(-b));for(var C=[],x=1,D=0;b>=x;D++)C[D]=b/x|0,x*=4294967296;return new c(C,0)}function v(b,C){if(b.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b.charAt(0)=="-")return S(v(b.substring(1),C));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(C,8)),D=E,M=0;M<b.length;M+=8){var U=Math.min(8,b.length-M),A=parseInt(b.substring(M,M+U),C);8>U?(U=m(Math.pow(C,U)),D=D.j(U).add(m(A))):(D=D.j(x),D=D.add(m(A)))}return D}var E=f(0),w=f(1),k=f(16777216);n=c.prototype,n.m=function(){if(I(this))return-S(this).m();for(var b=0,C=1,x=0;x<this.g.length;x++){var D=this.i(x);b+=(0<=D?D:4294967296+D)*C,C*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(I(this))return"-"+S(this).toString(b);for(var C=m(Math.pow(b,6)),x=this,D="";;){var M=ee(x,C).g;x=N(x,M.j(C));var U=((0<x.g.length?x.g[0]:x.h)>>>0).toString(b);if(x=M,P(x))return U+D;for(;6>U.length;)U="0"+U;D=U+D}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(var C=0;C<b.g.length;C++)if(b.g[C]!=0)return!1;return!0}function I(b){return b.h==-1}n.l=function(b){return b=N(this,b),I(b)?-1:P(b)?0:1};function S(b){for(var C=b.g.length,x=[],D=0;D<C;D++)x[D]=~b.g[D];return new c(x,~b.h).add(w)}n.abs=function(){return I(this)?S(this):this},n.add=function(b){for(var C=Math.max(this.g.length,b.g.length),x=[],D=0,M=0;M<=C;M++){var U=D+(this.i(M)&65535)+(b.i(M)&65535),A=(U>>>16)+(this.i(M)>>>16)+(b.i(M)>>>16);D=A>>>16,U&=65535,A&=65535,x[M]=A<<16|U}return new c(x,x[x.length-1]&-2147483648?-1:0)};function N(b,C){return b.add(S(C))}n.j=function(b){if(P(this)||P(b))return E;if(I(this))return I(b)?S(this).j(S(b)):S(S(this).j(b));if(I(b))return S(this.j(S(b)));if(0>this.l(k)&&0>b.l(k))return m(this.m()*b.m());for(var C=this.g.length+b.g.length,x=[],D=0;D<2*C;D++)x[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<b.g.length;M++){var U=this.i(D)>>>16,A=this.i(D)&65535,pe=b.i(M)>>>16,he=b.i(M)&65535;x[2*D+2*M]+=A*he,V(x,2*D+2*M),x[2*D+2*M+1]+=U*he,V(x,2*D+2*M+1),x[2*D+2*M+1]+=A*pe,V(x,2*D+2*M+1),x[2*D+2*M+2]+=U*pe,V(x,2*D+2*M+2)}for(D=0;D<C;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=C;D<2*C;D++)x[D]=0;return new c(x,0)};function V(b,C){for(;(b[C]&65535)!=b[C];)b[C+1]+=b[C]>>>16,b[C]&=65535,C++}function j(b,C){this.g=b,this.h=C}function ee(b,C){if(P(C))throw Error("division by zero");if(P(b))return new j(E,E);if(I(b))return C=ee(S(b),C),new j(S(C.g),S(C.h));if(I(C))return C=ee(b,S(C)),new j(S(C.g),C.h);if(30<b.g.length){if(I(b)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var x=w,D=C;0>=D.l(b);)x=$(x),D=$(D);var M=fe(x,1),U=fe(D,1);for(D=fe(D,2),x=fe(x,2);!P(D);){var A=U.add(D);0>=A.l(b)&&(M=M.add(x),U=A),D=fe(D,1),x=fe(x,1)}return C=N(b,M.j(C)),new j(M,C)}for(M=E;0<=b.l(C);){for(x=Math.max(1,Math.floor(b.m()/C.m())),D=Math.ceil(Math.log(x)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),U=m(x),A=U.j(C);I(A)||0<A.l(b);)x-=D,U=m(x),A=U.j(C);P(U)&&(U=w),M=M.add(U),b=N(b,A)}return new j(M,b)}n.A=function(b){return ee(this,b).h},n.and=function(b){for(var C=Math.max(this.g.length,b.g.length),x=[],D=0;D<C;D++)x[D]=this.i(D)&b.i(D);return new c(x,this.h&b.h)},n.or=function(b){for(var C=Math.max(this.g.length,b.g.length),x=[],D=0;D<C;D++)x[D]=this.i(D)|b.i(D);return new c(x,this.h|b.h)},n.xor=function(b){for(var C=Math.max(this.g.length,b.g.length),x=[],D=0;D<C;D++)x[D]=this.i(D)^b.i(D);return new c(x,this.h^b.h)};function $(b){for(var C=b.g.length+1,x=[],D=0;D<C;D++)x[D]=b.i(D)<<1|b.i(D-1)>>>31;return new c(x,b.h)}function fe(b,C){var x=C>>5;C%=32;for(var D=b.g.length-x,M=[],U=0;U<D;U++)M[U]=0<C?b.i(U+x)>>>C|b.i(U+x+1)<<32-C:b.i(U+x);return new c(M,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,b0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,ds=c}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D0,bl,O0,Bc,hp,N0,L0,M0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof xc=="object"&&xc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var R=0;R<u.length-1;R++){var X=u[R];if(!(X in _))break e;_=_[X]}u=u[u.length-1],R=_[u],g=g(R),g!=R&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function a(u,g){u instanceof String&&(u+="");var _=0,R=!1,X={next:function(){if(!R&&_<u.length){var ae=_++;return{value:g(ae,u[ae]),done:!1}}return R=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}o("Array.prototype.values",function(u){return u||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,_){return u.call.apply(u.bind,arguments)}function E(u,g,_){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,R),u.apply(g,X)}}return function(){return u.apply(g,arguments)}}function w(u,g,_){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,w.apply(null,arguments)}function k(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function P(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(R,X,ae){for(var Ne=Array(arguments.length-2),At=2;At<arguments.length;At++)Ne[At-2]=arguments[At];return g.prototype[X].apply(R,Ne)}}function I(u){const g=u.length;if(0<g){const _=Array(g);for(let R=0;R<g;R++)_[R]=u[R];return _}return[]}function S(u,g){for(let _=1;_<arguments.length;_++){const R=arguments[_];if(f(R)){const X=u.length||0,ae=R.length||0;u.length=X+ae;for(let Ne=0;Ne<ae;Ne++)u[X+Ne]=R[Ne]}else u.push(R)}}class N{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function V(u){return/^[\s\xa0]*$/.test(u)}function j(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ee(u){return ee[" "](u),u}ee[" "]=function(){};var $=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function fe(u,g,_){for(const R in u)g.call(_,u[R],R,u)}function b(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function C(u){const g={};for(const _ in u)g[_]=u[_];return g}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,g){let _,R;for(let X=1;X<arguments.length;X++){R=arguments[X];for(_ in R)u[_]=R[_];for(let ae=0;ae<x.length;ae++)_=x[ae],Object.prototype.hasOwnProperty.call(R,_)&&(u[_]=R[_])}}function M(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function U(u){d.setTimeout(()=>{throw u},0)}function A(){var u=ye;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class pe{constructor(){this.h=this.g=null}add(g,_){const R=he.get();R.set(g,_),this.h?this.h.next=R:this.g=R,this.h=R}}var he=new N(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,J=!1,ye=new pe,O=()=>{const u=d.Promise.resolve(void 0);ve=()=>{u.then(H)}};var H=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){U(_)}var g=he;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}J=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return u}();function Pe(u,g){if(Q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if($){e:{try{ee(g.nodeName);var X=!0;break e}catch{}X=!1}X||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:q[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}P(Pe,Q);var q={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ze(u,g,_,R,X){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!R,this.ha=X,this.key=++oe,this.da=this.fa=!1}function me(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function He(u){this.src=u,this.g={},this.h=0}He.prototype.add=function(u,g,_,R,X){var ae=u.toString();u=this.g[ae],u||(u=this.g[ae]=[],this.h++);var Ne=it(u,g,R,X);return-1<Ne?(g=u[Ne],_||(g.fa=!1)):(g=new ze(g,this.src,ae,!!R,X),g.fa=_,u.push(g)),g};function Le(u,g){var _=g.type;if(_ in u.g){var R=u.g[_],X=Array.prototype.indexOf.call(R,g,void 0),ae;(ae=0<=X)&&Array.prototype.splice.call(R,X,1),ae&&(me(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function it(u,g,_,R){for(var X=0;X<u.length;++X){var ae=u[X];if(!ae.da&&ae.listener==g&&ae.capture==!!_&&ae.ha==R)return X}return-1}var Et="closure_lm_"+(1e6*Math.random()|0),Je={};function ft(u,g,_,R,X){if(Array.isArray(g)){for(var ae=0;ae<g.length;ae++)ft(u,g[ae],_,R,X);return null}return _=lt(_),u&&u[De]?u.K(g,_,m(R)?!!R.capture:!1,X):nt(u,g,_,!1,R,X)}function nt(u,g,_,R,X,ae){if(!g)throw Error("Invalid event type");var Ne=m(X)?!!X.capture:!!X,At=jt(u);if(At||(u[Et]=At=new He(u)),_=At.add(g,_,R,Ne,ae),_.proxy)return _;if(R=Pt(),_.proxy=R,R.src=u,R.listener=_,u.addEventListener)ie||(X=Ne),X===void 0&&(X=!1),u.addEventListener(g.toString(),R,X);else if(u.attachEvent)u.attachEvent(Ft(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Pt(){function u(_){return g.call(u.src,u.listener,_)}const g=_n;return u}function St(u,g,_,R,X){if(Array.isArray(g))for(var ae=0;ae<g.length;ae++)St(u,g[ae],_,R,X);else R=m(R)?!!R.capture:!!R,_=lt(_),u&&u[De]?(u=u.i,g=String(g).toString(),g in u.g&&(ae=u.g[g],_=it(ae,_,R,X),-1<_&&(me(ae[_]),Array.prototype.splice.call(ae,_,1),ae.length==0&&(delete u.g[g],u.h--)))):u&&(u=jt(u))&&(g=u.g[g.toString()],u=-1,g&&(u=it(g,_,R,X)),(_=-1<u?g[u]:null)&&ot(_))}function ot(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[De])Le(g.i,u);else{var _=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(_,R,u.capture):g.detachEvent?g.detachEvent(Ft(_),R):g.addListener&&g.removeListener&&g.removeListener(R),(_=jt(g))?(Le(_,u),_.h==0&&(_.src=null,g[Et]=null)):me(u)}}}function Ft(u){return u in Je?Je[u]:Je[u]="on"+u}function _n(u,g){if(u.da)u=!0;else{g=new Pe(g,this);var _=u.listener,R=u.ha||u.src;u.fa&&ot(u),u=_.call(R,g)}return u}function jt(u){return u=u[Et],u instanceof He?u:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(u){return typeof u=="function"?u:(u[qe]||(u[qe]=function(g){return u.handleEvent(g)}),u[qe])}function pt(){K.call(this),this.i=new He(this),this.M=this,this.F=null}P(pt,K),pt.prototype[De]=!0,pt.prototype.removeEventListener=function(u,g,_,R){St(this,u,g,_,R)};function L(u,g){var _,R=u.F;if(R)for(_=[];R;R=R.F)_.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new Q(g,u);else if(g instanceof Q)g.target=g.target||u;else{var X=g;g=new Q(R,u),D(g,X)}if(X=!0,_)for(var ae=_.length-1;0<=ae;ae--){var Ne=g.g=_[ae];X=W(Ne,R,!0,g)&&X}if(Ne=g.g=u,X=W(Ne,R,!0,g)&&X,X=W(Ne,R,!1,g)&&X,_)for(ae=0;ae<_.length;ae++)Ne=g.g=_[ae],X=W(Ne,R,!1,g)&&X}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],R=0;R<_.length;R++)me(_[R]);delete u.g[g],u.h--}}this.F=null},pt.prototype.K=function(u,g,_,R){return this.i.add(String(u),g,!1,_,R)},pt.prototype.L=function(u,g,_,R){return this.i.add(String(u),g,!0,_,R)};function W(u,g,_,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var X=!0,ae=0;ae<g.length;++ae){var Ne=g[ae];if(Ne&&!Ne.da&&Ne.capture==_){var At=Ne.listener,en=Ne.ha||Ne.src;Ne.fa&&Le(u.i,Ne),X=At.call(en,R)!==!1&&X}}return X&&!R.defaultPrevented}function le(u,g,_){if(typeof u=="function")_&&(u=w(u,_));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(u,g||0)}function re(u){u.g=le(()=>{u.g=null,u.i&&(u.i=!1,re(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ie extends K{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ke(u){K.call(this),this.h=u,this.g={}}P(ke,K);var Me=[];function Se(u){fe(u.g,function(g,_){this.g.hasOwnProperty(_)&&ot(g)},u),u.g={}}ke.prototype.N=function(){ke.aa.N.call(this),Se(this)},ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Te=d.JSON.stringify,ue=d.JSON.parse,ce=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function be(){}be.prototype.h=null;function ne(u){return u.h||(u.h=u.i())}function de(){}var we={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oe(){Q.call(this,"d")}P(Oe,Q);function Ke(){Q.call(this,"c")}P(Ke,Q);var Xe={},mt=null;function _t(){return mt=mt||new pt}Xe.La="serverreachability";function qn(u){Q.call(this,Xe.La,u)}P(qn,Q);function Qt(u){const g=_t();L(g,new qn(g))}Xe.STAT_EVENT="statevent";function Gn(u,g){Q.call(this,Xe.STAT_EVENT,u),this.stat=g}P(Gn,Q);function Ut(u){const g=_t();L(g,new Gn(g,u))}Xe.Ma="timingevent";function _o(u,g){Q.call(this,Xe.Ma,u),this.size=g}P(_o,Q);function vr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},g)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Rs(u,g,_,R,X,ae){u.info(function(){if(u.g)if(ae)for(var Ne="",At=ae.split("&"),en=0;en<At.length;en++){var gt=At[en].split("=");if(1<gt.length){var on=gt[0];gt=gt[1];var Yt=on.split("_");Ne=2<=Yt.length&&Yt[1]=="type"?Ne+(on+"="+gt+"&"):Ne+(on+"=redacted&")}}else Ne=null;else Ne=ae;return"XMLHTTP REQ ("+R+") [attempt "+X+"]: "+g+`
`+_+`
`+Ne})}function wo(u,g,_,R,X,ae,Ne){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+X+"]: "+g+`
`+_+`
`+ae+" "+Ne})}function _r(u,g,_,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Jh(u,_)+(R?" "+R:"")})}function Ba(u,g){u.info(function(){return"TIMEOUT: "+g})}As.prototype.info=function(){};function Jh(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var R=_[u];if(!(2>R.length)){var X=R[1];if(Array.isArray(X)&&!(1>X.length)){var ae=X[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Ne=1;Ne<X.length;Ne++)X[Ne]=""}}}}return Te(_)}catch{return g}}var Eo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wr;function ks(){}P(ks,be),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},wr=new ks;function Er(u,g,_,R){this.j=u,this.i=g,this.l=_,this.R=R||1,this.U=new ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pu}function pu(){this.i=null,this.g="",this.h=!1}var Wa={},So={};function To(u,g,_){u.L=1,u.v=Mi(Qn(g)),u.m=_,u.P=!0,Ha(u,null)}function Ha(u,g){u.F=Date.now(),kt(u),u.A=Qn(u.v);var _=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Fi(_.i,"t",R),u.C=0,_=u.j.J,u.h=new pu,u.g=Du(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Ie(w(u.Y,u,u.g),u.O)),g=u.U,_=u.g,R=u.ca;var X="readystatechange";Array.isArray(X)||(X&&(Me[0]=X.toString()),X=Me);for(var ae=0;ae<X.length;ae++){var Ne=ft(_,X[ae],R||g.handleEvent,!1,g.h||g);if(!Ne)break;g.g[Ne.key]=Ne}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Qt(),Rs(u.i,u.u,u.A,u.l,u.R,u.m)}Er.prototype.ca=function(u){u=u.target;const g=this.M;g&&Ln(u)==3?g.j():this.Y(u)},Er.prototype.Y=function(u){try{if(u==this.g)e:{const Yt=Ln(this.g);var g=this.g.Ba();const or=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Ja(this.g)))){this.J||Yt!=4||g==7||(g==8||0>=or?Qt(3):Qt(2)),xs(this);var _=this.g.Z();this.X=_;t:if(mu(this)){var R=Ja(this.g);u="";var X=R.length,ae=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),Di(this);var Ne="";break t}this.h.i=new d.TextDecoder}for(g=0;g<X;g++)this.h.h=!0,u+=this.h.i.decode(R[g],{stream:!(ae&&g==X-1)});R.length=0,this.h.g+=u,this.C=0,Ne=this.h.g}else Ne=this.g.oa();if(this.o=_==200,wo(this.i,this.u,this.A,this.l,this.R,Yt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var At,en=this.g;if((At=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(At)){var gt=At;break t}}gt=null}if(_=gt)_r(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qa(this,_);else{this.o=!1,this.s=3,Ut(12),ir(this),Di(this);break e}}if(this.P){_=!0;let Jn;for(;!this.J&&this.C<Ne.length;)if(Jn=Xh(this,Ne),Jn==So){Yt==4&&(this.s=4,Ut(14),_=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==Wa){this.s=4,Ut(15),_r(this.i,this.l,Ne,"[Invalid Chunk]"),_=!1;break}else _r(this.i,this.l,Jn,null),qa(this,Jn);if(mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||Ne.length!=0||this.h.h||(this.s=1,Ut(16),_=!1),this.o=this.o&&_,!_)_r(this.i,this.l,Ne,"[Invalid Chunked Response]"),ir(this),Di(this);else if(0<Ne.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+Ne.length),Za(on),on.M=!0,Ut(11))}}else _r(this.i,this.l,Ne,null),qa(this,Ne);Yt==4&&ir(this),this.o&&!this.J&&(Yt==4?No(this.j,this):(this.o=!1,kt(this)))}else ko(this.g),_==400&&0<Ne.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),ir(this),Di(this)}}}catch{}finally{}};function mu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xh(u,g){var _=u.C,R=g.indexOf(`
`,_);return R==-1?So:(_=Number(g.substring(_,R)),isNaN(_)?Wa:(R+=1,R+_>g.length?So:(g=g.slice(R,R+_),u.C=R+_,g)))}Er.prototype.cancel=function(){this.J=!0,ir(this)};function kt(u){u.S=Date.now()+u.I,gu(u,u.I)}function gu(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vr(w(u.ba,u),g)}function xs(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Er.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ba(this.i,this.A),this.L!=2&&(Qt(),Ut(17)),ir(this),this.s=2,Di(this)):gu(this,this.S-u)};function Di(u){u.j.G==0||u.J||No(u.j,u)}function ir(u){xs(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Se(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function qa(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||xn(_.h,u))){if(!u.K&&xn(_.h,u)&&_.G==3){try{var R=_.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var X=R;if(X[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Oo(_),Pr(_);else break e;Do(_),Ut(18)}}else _.za=X[1],0<_.za-_.T&&37500>X[2]&&_.F&&_.v==0&&!_.C&&(_.C=vr(w(_.Za,_),6e3));if(1>=vu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else li(_,11)}else if((u.K||_.g==u)&&Oo(_),!V(g))for(X=_.Da.g.parse(g),g=0;g<X.length;g++){let gt=X[g];if(_.T=gt[0],gt=gt[1],_.G==2)if(gt[0]=="c"){_.K=gt[1],_.ia=gt[2];const on=gt[3];on!=null&&(_.la=on,_.j.info("VER="+_.la));const Yt=gt[4];Yt!=null&&(_.Aa=Yt,_.j.info("SVER="+_.Aa));const or=gt[5];or!=null&&typeof or=="number"&&0<or&&(R=1.5*or,_.L=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const Jn=u.g;if(Jn){const Vs=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var ae=R.h;ae.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ga(ae,ae.h),ae.h=null))}if(R.D){const Mo=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(R.ya=Mo,Rt(R.I,R.D,Mo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),R=_;var Ne=u;if(R.qa=bu(R,R.J?R.ia:null,R.W),Ne.K){_u(R.h,Ne);var At=Ne,en=R.L;en&&(At.I=en),At.B&&(xs(At),kt(At)),R.g=Ne}else Ms(R);0<_.i.length&&qr(_)}else gt[0]!="stop"&&gt[0]!="close"||li(_,7);else _.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?li(_,7):pn(_):gt[0]!="noop"&&_.l&&_.l.ta(gt),_.v=0)}}Qt(4)}catch{}}var yu=class{constructor(u,g){this.g=u,this.map=g}};function bs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vu(u){return u.h?1:u.g?u.g.size:0}function xn(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ga(u,g){u.g?u.g.add(g):u.h=g}function _u(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}bs.prototype.cancel=function(){if(this.i=wu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wu(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return I(u.i)}function Io(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var g=[],_=u.length,R=0;R<_;R++)g.push(u[R]);return g}g=[],_=0;for(R in u)g[_++]=u[R];return g}function Co(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const R in u)g[_++]=R;return g}}}function Oi(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=Co(u),R=Io(u),X=R.length,ae=0;ae<X;ae++)g.call(void 0,R[ae],_&&_[ae],u)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var R=u[_].indexOf("="),X=null;if(0<=R){var ae=u[_].substring(0,R);X=u[_].substring(R+1)}else ae=u[_];g(ae,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function ii(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ii){this.h=u.h,Os(this,u.j),this.o=u.o,this.g=u.g,Ni(this,u.s),this.l=u.l;var g=u.i,_=new Br;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Li(this,_),this.m=u.m}else u&&(g=String(u).match(Ds))?(this.h=!1,Os(this,g[1]||"",!0),this.o=dt(g[2]||""),this.g=dt(g[3]||"",!0),Ni(this,g[4]),this.l=dt(g[5]||"",!0),Li(this,g[6]||"",!0),this.m=dt(g[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}ii.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Vi(g,Po,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Vi(g,Po,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Vi(_,_.charAt(0)=="/"?Tu:Su,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Vi(_,Ka)),u.join("")};function Qn(u){return new ii(u)}function Os(u,g,_){u.j=_?dt(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ni(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Li(u,g,_){g instanceof Br?(u.i=g,Wr(u.i,u.h)):(_||(g=Vi(g,Iu)),u.i=new Br(g,u.h))}function Rt(u,g,_){u.i.set(g,_)}function Mi(u){return Rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function dt(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Eu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Eu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Po=/[#\/\?@]/g,Su=/[#\?:]/g,Tu=/[#\?]/g,Iu=/[#\?@]/g,Ka=/#/g;function Br(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function fn(u){u.g||(u.g=new Map,u.h=0,u.i&&Zh(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Br.prototype,n.add=function(u,g){fn(this),this.i=null,u=sr(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Sr(u,g){fn(u),g=sr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Tr(u,g){return fn(u),g=sr(u,g),u.g.has(g)}n.forEach=function(u,g){fn(this),this.g.forEach(function(_,R){_.forEach(function(X){u.call(g,X,R,this)},this)},this)},n.na=function(){fn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let R=0;R<g.length;R++){const X=u[R];for(let ae=0;ae<X.length;ae++)_.push(g[R])}return _},n.V=function(u){fn(this);let g=[];if(typeof u=="string")Tr(this,u)&&(g=g.concat(this.g.get(sr(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},n.set=function(u,g){return fn(this),this.i=null,u=sr(this,u),Tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Fi(u,g,_){Sr(u,g),0<_.length&&(u.i=null,u.g.set(sr(u,g),I(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var R=g[_];const ae=encodeURIComponent(String(R)),Ne=this.V(R);for(R=0;R<Ne.length;R++){var X=ae;Ne[R]!==""&&(X+="="+encodeURIComponent(String(Ne[R]))),u.push(X)}}return this.i=u.join("&")};function sr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Wr(u,g){g&&!u.j&&(fn(u),u.i=null,u.g.forEach(function(_,R){var X=R.toLowerCase();R!=X&&(Sr(this,R),Fi(this,X,_))},u)),u.j=g}function ed(u,g){const _=new As;if(d.Image){const R=new Image;R.onload=k(Nn,_,"TestLoadImage: loaded",!0,g,R),R.onerror=k(Nn,_,"TestLoadImage: error",!1,g,R),R.onabort=k(Nn,_,"TestLoadImage: abort",!1,g,R),R.ontimeout=k(Nn,_,"TestLoadImage: timeout",!1,g,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function Cu(u,g){const _=new As,R=new AbortController,X=setTimeout(()=>{R.abort(),Nn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(ae=>{clearTimeout(X),ae.ok?Nn(_,"TestPingServer: ok",!0,g):Nn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(X),Nn(_,"TestPingServer: error",!1,g)})}function Nn(u,g,_,R,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),R(_)}catch{}}function td(){this.g=new ce}function Pu(u,g,_){const R=_||"";try{Oi(u,function(X,ae){let Ne=X;m(X)&&(Ne=Te(X)),g.push(R+ae+"="+encodeURIComponent(Ne))})}catch(X){throw g.push(R+"type="+encodeURIComponent("_badmap")),X}}function si(u){this.l=u.Ub||null,this.j=u.eb||!1}P(si,be),si.prototype.g=function(){return new Ns(this.l,this.j)},si.prototype.i=function(u){return function(){return u}}({});function Ns(u,g){pt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ns,pt),n=Ns.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Cr(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Au(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Au(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ir(this):Cr(this),this.readyState==3&&Au(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ir(this))},n.Qa=function(u){this.g&&(this.response=u,Ir(this))},n.ga=function(){this.g&&Ir(this)};function Ir(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Cr(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Cr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function oi(u){let g="";return fe(u,function(_,R){g+=R,g+=":",g+=_,g+=`\r
`}),g}function ji(u,g,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=oi(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Rt(u,g,_))}function Lt(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Lt,pt);var nd=/^https?$/i,Qa=["POST","PUT"];n=Lt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wr.g(),this.v=this.o?ne(this.o):ne(wr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(ae){Ls(this,ae);return}if(u=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var X in R)_.set(X,R[X]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ae of R.keys())_.set(ae,R.get(ae));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(ae=>ae.toLowerCase()=="content-type"),X=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Qa,g,void 0))||R||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ne]of _)this.g.setRequestHeader(ae,Ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ro(this),this.u=!0,this.g.send(u),this.u=!1}catch(ae){Ls(this,ae)}};function Ls(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Ao(u),Yn(u)}function Ao(u){u.A||(u.A=!0,L(u,"complete"),L(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,L(this,"complete"),L(this,"abort"),Yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yn(this,!0)),Lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)le(u.Ea,0,u);else if(L(u,"readystatechange"),Ln(u)==4){u.h=!1;try{const Ne=u.Z();e:switch(Ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var R;if(R=Ne===0){var X=String(u.D).match(Ds)[1]||null;!X&&d.self&&d.self.location&&(X=d.self.location.protocol.slice(0,-1)),R=!nd.test(X?X.toLowerCase():"")}_=R}if(_)L(u,"complete"),L(u,"success");else{u.m=6;try{var ae=2<Ln(u)?u.g.statusText:""}catch{ae=""}u.l=ae+" ["+u.Z()+"]",Ao(u)}}finally{Yn(u)}}}}function Yn(u,g){if(u.g){Ro(u);const _=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||L(u,"ready");try{_.onreadystatechange=R}catch{}}}function Ro(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ue(g)}};function Ja(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ko(u){const g={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(V(u[R]))continue;var _=M(u[R]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ae=g[X]||[];g[X]=ae,ae.push(_)}b(g,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Xa(u){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,u),this.cb=Hr("retryDelaySeedMs",1e4,u),this.Wa=Hr("forwardChannelMaxRetries",2,u),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bs(u&&u.concurrentRequestLimit),this.Da=new td,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xa.prototype,n.la=8,n.G=1,n.connect=function(u,g,_,R){Ut(0),this.W=u,this.H=g||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.I=bu(this,null,this.W),qr(this)};function pn(u){if(xo(u),u.G==3){var g=u.U++,_=Qn(u.I);if(Rt(_,"SID",u.K),Rt(_,"RID",g),Rt(_,"TYPE","terminate"),ai(u,_),g=new Er(u,u.j,g),g.L=2,g.v=Mi(Qn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=Du(g.j,null),g.g.ea(g.v)),g.F=Date.now(),kt(g)}xu(u)}function Pr(u){u.g&&(Za(u),u.g.cancel(),u.g=null)}function xo(u){Pr(u),u.u&&(d.clearTimeout(u.u),u.u=null),Oo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function qr(u){if(!Kn(u.h)&&!u.s){u.s=!0;var g=u.Ga;ve||O(),J||(ve(),J=!0),ye.add(g,u),u.B=0}}function rd(u,g){return vu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vr(w(u.Ga,u,g),ku(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const X=new Er(this,this.j,u);let ae=this.o;if(this.S&&(ae?(ae=C(ae),D(ae,this.S)):ae=this.S),this.m!==null||this.O||(X.H=ae,ae=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ui(this,X,g),_=Qn(this.I),Rt(_,"RID",u),Rt(_,"CVER",22),this.D&&Rt(_,"X-HTTP-Session-Id",this.D),ai(this,_),ae&&(this.O?g="headers="+encodeURIComponent(String(oi(ae)))+"&"+g:this.m&&ji(_,this.m,ae)),Ga(this.h,X),this.Ua&&Rt(_,"TYPE","init"),this.P?(Rt(_,"$req",g),Rt(_,"SID","null"),X.T=!0,To(X,_,null)):To(X,_,g),this.G=2}}else this.G==3&&(u?bo(this,u):this.i.length==0||Kn(this.h)||bo(this))};function bo(u,g){var _;g?_=g.l:_=u.U++;const R=Qn(u.I);Rt(R,"SID",u.K),Rt(R,"RID",_),Rt(R,"AID",u.T),ai(u,R),u.m&&u.o&&ji(R,u.m,u.o),_=new Er(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Ui(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ga(u.h,_),To(_,R,g)}function ai(u,g){u.H&&fe(u.H,function(_,R){Rt(g,R,_)}),u.l&&Oi({},function(_,R){Rt(g,R,_)})}function Ui(u,g,_){_=Math.min(u.i.length,_);var R=u.l?w(u.l.Na,u.l,u):null;e:{var X=u.i;let ae=-1;for(;;){const Ne=["count="+_];ae==-1?0<_?(ae=X[0].g,Ne.push("ofs="+ae)):ae=0:Ne.push("ofs="+ae);let At=!0;for(let en=0;en<_;en++){let gt=X[en].g;const on=X[en].map;if(gt-=ae,0>gt)ae=Math.max(0,X[en].g-100),At=!1;else try{Pu(on,Ne,"req"+gt+"_")}catch{R&&R(on)}}if(At){R=Ne.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,R}function Ms(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ve||O(),J||(ve(),J=!0),ye.add(g,u),u.v=0}}function Do(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vr(w(u.Fa,u),ku(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vr(w(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),Pr(this),Ru(this))};function Za(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Ru(u){u.g=new Er(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Qn(u.qa);Rt(g,"RID","rpc"),Rt(g,"SID",u.K),Rt(g,"AID",u.T),Rt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Rt(g,"TO",u.ja),Rt(g,"TYPE","xmlhttp"),ai(u,g),u.m&&u.o&&ji(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Mi(Qn(g)),_.m=null,_.P=!0,Ha(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Pr(this),Do(this),Ut(19))};function Oo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function No(u,g){var _=null;if(u.g==g){Oo(u),Za(u),u.g=null;var R=2}else if(xn(u.h,g))_=g.D,_u(u.h,g),R=1;else return;if(u.G!=0){if(g.o)if(R==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var X=u.B;R=_t(),L(R,new _o(R,_)),qr(u)}else Ms(u);else if(X=g.s,X==3||X==0&&0<g.X||!(R==1&&rd(u,g)||R==2&&Do(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),X){case 1:li(u,5);break;case 4:li(u,10);break;case 3:li(u,6);break;default:li(u,2)}}}function ku(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function li(u,g){if(u.j.info("Error code "+g),g==2){var _=w(u.fb,u),R=u.Xa;const X=!R;R=new ii(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Os(R,"https"),Mi(R),X?ed(R.toString(),_):Cu(R.toString(),_)}else Ut(2);u.G=0,u.l&&u.l.sa(g),xu(u),xo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function xu(u){if(u.G=0,u.ka=[],u.l){const g=wu(u.h);(g.length!=0||u.i.length!=0)&&(S(u.ka,g),S(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function bu(u,g,_){var R=_ instanceof ii?Qn(_):new ii(_);if(R.g!="")g&&(R.g=g+"."+R.g),Ni(R,R.s);else{var X=d.location;R=X.protocol,g=g?g+"."+X.hostname:X.hostname,X=+X.port;var ae=new ii(null);R&&Os(ae,R),g&&(ae.g=g),X&&Ni(ae,X),_&&(ae.l=_),R=ae}return _=u.D,g=u.ya,_&&g&&Rt(R,_,g),Rt(R,"VER",u.la),ai(u,R),R}function Du(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Lt(new si({eb:_})):new Lt(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function el(){}n=el.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lo(){}Lo.prototype.g=function(u,g){return new bn(u,g)};function bn(u,g){pt.call(this),this.g=new Xa(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!V(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!V(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Gr(this)}P(bn,pt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){pn(this.g)},bn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Te(u),u=_);g.i.push(new yu(g.Ya++,u)),g.G==3&&qr(g)},bn.prototype.N=function(){this.g.l=null,delete this.j,pn(this.g),delete this.g,bn.aa.N.call(this)};function Ou(u){Oe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}P(Ou,Oe);function Nu(){Ke.call(this),this.status=1}P(Nu,Ke);function Gr(u){this.g=u}P(Gr,el),Gr.prototype.ua=function(){L(this.g,"a")},Gr.prototype.ta=function(u){L(this.g,new Ou(u))},Gr.prototype.sa=function(u){L(this.g,new Nu)},Gr.prototype.ra=function(){L(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,M0=function(){return new Lo},L0=function(){return _t()},N0=Xe,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,Bc=Eo,fu.COMPLETE="complete",O0=fu,de.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",pt.prototype.listen=pt.prototype.K,bl=de,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,D0=Lt}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore",Hv="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Wp("@firebase/firestore");function sa(){return no.logLevel}function Fe(n,...e){if(no.logLevel<=ct.DEBUG){const t=e.map(im);no.debug(`Firestore (${Ma}): ${n}`,...t)}}function Ri(n,...e){if(no.logLevel<=ct.ERROR){const t=e.map(im);no.error(`Firestore (${Ma}): ${n}`,...t)}}function ro(n,...e){if(no.logLevel<=ct.WARN){const t=e.map(im);no.warn(`Firestore (${Ma}): ${n}`,...t)}}function im(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,V0(n,i,t)}function V0(n,e,t){let i=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ri(i),new Error(i)}function Ct(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||V0(e,o,i)}function st(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cn.UNAUTHENTICATED))}shutdown(){}}class IR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CR{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Si,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},d=f=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Si)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ct(typeof i.accessToken=="string",31837,{l:i}),new F0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class PR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new PR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const i=a=>{a.error!=null&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=kR(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function at(n,e){return n<e?-1:n>e?1:0}function dp(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return at(i,o);{const a=U0(),c=xR(a.encode(Gv(n,t)),a.encode(Gv(e,t)));return c!==0?c:at(i,o)}}t+=i>65535?2:1}return at(n.length,e.length)}function Gv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function xR(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return at(n[t],e[t]);return at(n.length,e.length)}function _a(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=-62135596800,Qv=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Qv);return new Ht(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kv)throw new je(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Ht(0,0))}static max(){return new rt(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class Zr{constructor(e,t,i){t===void 0?t=0:t>e.length&&et(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&et(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Zr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const i=Zr.isNumericId(e),o=Zr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Zr.extractNumericId(e).compare(Zr.extractNumericId(t)):dp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Nt extends Zr{construct(e,t,i){return new Nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new je(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const bR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends Zr{construct(e,t,i){return new hn(e,t,i)}static isValidIdentifier(e){return bR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new hn([Yv])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new je(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new je(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new je(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(a(),o++)}if(a(),c)throw new je(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Nt.fromString(e))}static fromName(e){return new Ge(Nt.fromString(e).popFirst(5))}static empty(){return new Ge(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function DR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=rt.fromTimestamp(i===1e9?new Ht(t+1,0):new Ht(t,i));return new ps(o,Ge.empty(),e)}function OR(n){return new ps(n.readTime,n.key,Hl)}class ps{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ps(rt.min(),Ge.empty(),Hl)}static max(){return new ps(rt.max(),Ge.empty(),Hl)}}function NR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==LR)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,i)=>{t(e)})}static reject(e){return new _e((t,i)=>{i(e)})}static waitFor(e){return new _e((t,i)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},f=>i(f))}),c=!0,a===o&&t()})}static or(e){let t=_e.resolve(!1);for(const i of e)t=t.next(o=>o?_e.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new _e((i,o)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{c[m]=v,++d,d===a&&i(c)},v=>o(v))}})}static doWhile(e,t){return new _e((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function VR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ah.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=-1;function Rh(n){return n==null}function sh(n){return n===0&&1/n==-1/0}function FR(n){return typeof n=="number"&&Number.isInteger(n)&&!sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="";function jR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jv(e)),e=UR(n.get(t),e);return Jv(e)}function UR(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case z0:t+="";break;default:t+=a}}return t}function Jv(n){return n+z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Is(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||vn.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??vn.RED,this.left=o??vn.EMPTY,this.right=a??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new vn(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return vn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(e){return new Zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class Zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new tr([])}unionWith(e){let t=new rn(hn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new B0("Invalid base64 string: "+a):a}}(e);return new dn(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new dn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(Ct(!!n,39018),typeof n=="string"){let e=0;const t=zR.exec(n);if(Ct(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="server_timestamp",H0="__type__",q0="__previous_value__",G0="__local_write_time__";function am(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[H0])===null||t===void 0?void 0:t.stringValue)===W0}function kh(n){const e=n.mapValue.fields[q0];return am(e)?kh(e):e}function ql(n){const e=ms(n.mapValue.fields[G0].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t,i,o,a,c,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const oh="(default)";class wa{constructor(e,t){this.projectId=e,this.database=t||oh}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===oh}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__type__",BR="__max__",Dc={mapValue:{}},Q0="__vector__",ah="value";function ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?am(n)?4:HR(n)?9007199254740991:WR(n)?10:11:et(28295,{value:n})}function ri(n,e){if(n===e)return!0;const t=ys(n);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ql(n).isEqual(ql(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ms(o.timestampValue),d=ms(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return gs(o.bytesValue).isEqual(gs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return Gt(o.geoPointValue.latitude)===Gt(a.geoPointValue.latitude)&&Gt(o.geoPointValue.longitude)===Gt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return Gt(o.integerValue)===Gt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Gt(o.doubleValue),d=Gt(a.doubleValue);return c===d?sh(c)===sh(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return _a(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Xv(c)!==Xv(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!ri(c[f],d[f])))return!1;return!0}(n,e);default:return et(52216,{left:n})}}function Gl(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function Ea(n,e){if(n===e)return 0;const t=ys(n),i=ys(e);if(t!==i)return at(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=Gt(a.integerValue||a.doubleValue),f=Gt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return e_(n.timestampValue,e.timestampValue);case 4:return e_(ql(n),ql(e));case 5:return dp(n.stringValue,e.stringValue);case 6:return function(a,c){const d=gs(a),f=gs(c);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=at(d[m],f[m]);if(v!==0)return v}return at(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=at(Gt(a.latitude),Gt(c.latitude));return d!==0?d:at(Gt(a.longitude),Gt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return t_(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,f,m,v;const E=a.fields||{},w=c.fields||{},k=(d=E[ah])===null||d===void 0?void 0:d.arrayValue,P=(f=w[ah])===null||f===void 0?void 0:f.arrayValue,I=at(((m=k==null?void 0:k.values)===null||m===void 0?void 0:m.length)||0,((v=P==null?void 0:P.values)===null||v===void 0?void 0:v.length)||0);return I!==0?I:t_(k,P)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Dc.mapValue&&c===Dc.mapValue)return 0;if(a===Dc.mapValue)return 1;if(c===Dc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=c.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const w=dp(f[E],v[E]);if(w!==0)return w;const k=Ea(d[f[E]],m[v[E]]);if(k!==0)return k}return at(f.length,v.length)}(n.mapValue,e.mapValue);default:throw et(23264,{Pe:t})}}function e_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=ms(n),i=ms(e),o=at(t.seconds,i.seconds);return o!==0?o:at(t.nanos,i.nanos)}function t_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ea(t[o],i[o]);if(a)return a}return at(t.length,i.length)}function Sa(n){return fp(n)}function fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ms(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return gs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=fp(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${fp(t.fields[c])}`;return o+"}"}(n.mapValue):et(61005,{value:n})}function Wc(n){switch(ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kh(n);return e?16+Wc(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Wc(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Is(i.fields,(a,c)=>{o+=a.length+Wc(c)}),o}(n.mapValue);default:throw et(13486,{value:n})}}function n_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pp(n){return!!n&&"integerValue"in n}function lm(n){return!!n&&"arrayValue"in n}function r_(n){return!!n&&"nullValue"in n}function i_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hc(n){return!!n&&"mapValue"in n}function WR(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[K0])===null||t===void 0?void 0:t.stringValue)===Q0}function Ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Is(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ml(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function HR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===BR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(t)}setAll(e){let t=hn.emptyPath(),i={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Ml(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Is(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new Hn(Ml(this.value))}}function Y0(n){const e=[];return Is(n.fields,(t,i)=>{const o=new hn([t]);if(Hc(i)){const a=Y0(i.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t,i,o,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Pn(e,0,rt.min(),rt.min(),rt.min(),Hn.empty(),0)}static newFoundDocument(e,t,i,o){return new Pn(e,1,t,rt.min(),i,o,0)}static newNoDocument(e,t){return new Pn(e,2,t,rt.min(),rt.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,rt.min(),rt.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.position=e,this.inclusive=t}}function s_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?i=Ge.comparator(Ge.fromName(c.referenceValue),t.key):i=Ea(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function o_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t="asc"){this.field=e,this.dir=t}}function qR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{}class Zt extends J0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new KR(e,t,i):t==="array-contains"?new JR(e,i):t==="in"?new XR(e,i):t==="not-in"?new ZR(e,i):t==="array-contains-any"?new ek(e,i):new Zt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new QR(e,i):new YR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ea(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends J0{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new jr(e,t)}matches(e){return X0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function X0(n){return n.op==="and"}function Z0(n){return GR(n)&&X0(n)}function GR(n){for(const e of n.filters)if(e instanceof jr)return!1;return!0}function mp(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(Z0(n))return n.filters.map(e=>mp(e)).join(",");{const e=n.filters.map(t=>mp(t)).join(",");return`${n.op}(${e})`}}function eE(n,e){return n instanceof Zt?function(i,o){return o instanceof Zt&&i.op===o.op&&i.field.isEqual(o.field)&&ri(i.value,o.value)}(n,e):n instanceof jr?function(i,o){return o instanceof jr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,c,d)=>a&&eE(c,o.filters[d]),!0):!1}(n,e):void et(19439)}function tE(n){return n instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`}(n):n instanceof jr?function(t){return t.op.toString()+" {"+t.getFilters().map(tE).join(" ,")+"}"}(n):"Filter"}class KR extends Zt{constructor(e,t,i){super(e,t,i),this.key=Ge.fromName(i.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class QR extends Zt{constructor(e,t){super(e,"in",t),this.keys=nE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YR extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=nE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ge.fromName(i.referenceValue))}class JR extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lm(t)&&Gl(t.arrayValue,this.value)}}class XR extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gl(this.value.arrayValue,t)}}class ZR extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Gl(this.value.arrayValue,t)}}class ek extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Gl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t=null,i=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function a_(n,e=null,t=[],i=[],o=null,a=null,c=null){return new tk(n,e,t,i,o,a,c)}function um(n){const e=st(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>mp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Rh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Sa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Sa(i)).join(",")),e.Ie=t}return e.Ie}function cm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o_(n.startAt,e.startAt)&&o_(n.endAt,e.endAt)}function gp(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t=null,i=[],o=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function nk(n,e,t,i,o,a,c,d){return new iu(n,e,t,i,o,a,c,d)}function hm(n){return new iu(n)}function l_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rE(n){return n.collectionGroup!==null}function Vl(n){const e=st(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new rn(hn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new uh(a,i))}),t.has(hn.keyField().canonicalString())||e.Ee.push(new uh(hn.keyField(),i))}return e.Ee}function ti(n){const e=st(n);return e.de||(e.de=rk(e,Vl(n))),e.de}function rk(n,e){if(n.limitType==="F")return a_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new uh(o.field,a)});const t=n.endAt?new lh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new lh(n.startAt.position,n.startAt.inclusive):null;return a_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function yp(n,e){const t=n.filters.concat([e]);return new iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vp(n,e,t){return new iu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return cm(ti(n),ti(e))&&n.limitType===e.limitType}function iE(n){return`${um(ti(n))}|lt:${n.limitType}`}function oa(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>tE(o)).join(", ")}]`),Rh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Sa(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Sa(o)).join(",")),`Target(${i})`}(ti(n))}; limitType=${n.limitType})`}function bh(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ge.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of Vl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,d,f){const m=s_(c,d,f);return c.inclusive?m<=0:m<0}(i.startAt,Vl(i),o)||i.endAt&&!function(c,d,f){const m=s_(c,d,f);return c.inclusive?m>=0:m>0}(i.endAt,Vl(i),o))}(n,e)}function ik(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sE(n){return(e,t)=>{let i=!1;for(const o of Vl(n)){const a=sk(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function sk(n,e,t){const i=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(a,c,d){const f=c.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Ea(f,m):et(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return et(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return $0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new Bt(Ge.comparator);function ki(){return ok}const oE=new Bt(Ge.comparator);function Dl(...n){let e=oE;for(const t of n)e=e.insert(t.key,t);return e}function aE(n){let e=oE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Zs(){return Fl()}function lE(){return Fl()}function Fl(){return new fo(n=>n.toString(),(n,e)=>n.isEqual(e))}const ak=new Bt(Ge.comparator),lk=new rn(Ge.comparator);function ht(...n){let e=lk;for(const t of n)e=e.add(t);return e}const uk=new rn(at);function ck(){return uk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(e)?"-0":e}}function uE(n){return{integerValue:""+n}}function hk(n,e){return FR(e)?uE(e):dm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function dk(n,e,t){return n instanceof ch?function(o,a){const c={fields:{[H0]:{stringValue:W0},[G0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&am(a)&&(a=kh(a)),a&&(c.fields[q0]=a),{mapValue:c}}(t,e):n instanceof Ta?hE(n,e):n instanceof Ia?dE(n,e):function(o,a){const c=cE(o,a),d=u_(c)+u_(o.Re);return pp(c)&&pp(o.Re)?uE(d):dm(o.serializer,d)}(n,e)}function fk(n,e,t){return n instanceof Ta?hE(n,e):n instanceof Ia?dE(n,e):t}function cE(n,e){return n instanceof hh?function(i){return pp(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class ch extends Dh{}class Ta extends Dh{constructor(e){super(),this.elements=e}}function hE(n,e){const t=fE(e);for(const i of n.elements)t.some(o=>ri(o,i))||t.push(i);return{arrayValue:{values:t}}}class Ia extends Dh{constructor(e){super(),this.elements=e}}function dE(n,e){let t=fE(e);for(const i of n.elements)t=t.filter(o=>!ri(o,i));return{arrayValue:{values:t}}}class hh extends Dh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function u_(n){return Gt(n.integerValue||n.doubleValue)}function fE(n){return lm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.field=e,this.transform=t}}function pk(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Ta&&o instanceof Ta||i instanceof Ia&&o instanceof Ia?_a(i.elements,o.elements,ri):i instanceof hh&&o instanceof hh?ri(i.Re,o.Re):i instanceof ch&&o instanceof ch}(n.transform,e.transform)}class mk{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Oh{}function mE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fm(n.key,mr.none()):new su(n.key,n.data,mr.none());{const t=n.data,i=Hn.empty();let o=new rn(hn.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),o=o.add(a)}return new Cs(n.key,i,new tr(o.toArray()),mr.none())}}function gk(n,e,t){n instanceof su?function(o,a,c){const d=o.value.clone(),f=h_(o.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Cs?function(o,a,c){if(!qc(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=h_(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(gE(o)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function jl(n,e,t,i){return n instanceof su?function(a,c,d,f){if(!qc(a.precondition,c))return d;const m=a.value.clone(),v=d_(a.fieldTransforms,f,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof Cs?function(a,c,d,f){if(!qc(a.precondition,c))return d;const m=d_(a.fieldTransforms,f,c),v=c.data;return v.setAll(gE(a)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(a,c,d){return qc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function yk(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=cE(i.transform,o||null);a!=null&&(t===null&&(t=Hn.empty()),t.set(i.field,a))}return t||null}function c_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&_a(i,o,(a,c)=>pk(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends Oh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cs extends Oh{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function gE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function h_(n,e,t){const i=new Map;Ct(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,d=e.data.field(a.field);i.set(a.field,fk(c,d,t[o]))}return i}function d_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);i.set(o.field,dk(a,c,e))}return i}class fm extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vk extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&gk(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=jl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=jl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=lE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const f=mE(c,d);f!==null&&i.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(rt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(t,i)=>c_(t,i))&&_a(this.baseMutations,e.baseMutations,(t,i)=>c_(t,i))}}class pm{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ct(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return ak}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,i[c].version);return new pm(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,yt;function Sk(n){switch(n){case Ee.OK:return et(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return et(15467,{code:n})}}function yE(n){if(n===void 0)return Ri("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case Xt.OK:return Ee.OK;case Xt.CANCELLED:return Ee.CANCELLED;case Xt.UNKNOWN:return Ee.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return Ee.INTERNAL;case Xt.UNAVAILABLE:return Ee.UNAVAILABLE;case Xt.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Xt.NOT_FOUND:return Ee.NOT_FOUND;case Xt.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Xt.ABORTED:return Ee.ABORTED;case Xt.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Xt.DATA_LOSS:return Ee.DATA_LOSS;default:return et(39323,{code:n})}}(yt=Xt||(Xt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new ds([4294967295,4294967295],0);function f_(n){const e=U0().encode(n),t=new b0;return t.update(e),new Uint8Array(t.digest())}function p_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ds([t,i],0),new ds([o,a],0)]}class mm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ol(`Invalid padding: ${t}`);if(i<0)throw new Ol(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ds.fromNumber(this.pe)}we(e,t,i){let o=e.add(t.multiply(ds.fromNumber(i)));return o.compare(Tk)===1&&(o=new ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=f_(e),[i,o]=p_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,o,a);if(!this.be(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new mm(a,o,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=f_(e),[i,o]=p_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Nh(rt.min(),o,new Bt(at),ki(),ht())}}class ou{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ou(i,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t,i,o){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=o}}class vE{constructor(e,t){this.targetId=e,this.Ce=t}}class _E{constructor(e,t,i=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class m_{constructor(){this.Fe=0,this.Me=g_(),this.xe=dn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ht(),t=ht(),i=ht();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:et(38017,{changeType:a})}}),new ou(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=g_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ik{constructor(e){this.ze=e,this.je=new Map,this.He=ki(),this.Je=Oc(),this.Ye=Oc(),this.Ze=new Bt(at)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:et(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,i=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(gp(a))if(i===0){const c=new Ge(a.path);this.tt(t,c,Pn.newNoDocument(c,rt.min()))}else Ct(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=gs(i).toUint8Array()}catch(f){if(f instanceof B0)return ro("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new mm(c,o,a)}catch(f){return ro(f instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&gp(d.target)){const f=new Ge(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,Pn.newNoDocument(f,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let i=ht();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const o=new Nh(e,t,this.Ze,this.He,i);return this.He=ki(),this.Je=Oc(),this.Ye=Oc(),this.Ze=new Bt(at),o}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new m_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new rn(at),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new rn(at),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new m_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Oc(){return new Bt(Ge.comparator)}function g_(){return new Bt(Ge.comparator)}const Ck={asc:"ASCENDING",desc:"DESCENDING"},Pk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ak={and:"AND",or:"OR"};class Rk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _p(n,e){return n.useProto3Json||Rh(e)?e:{value:e}}function dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kk(n,e){return dh(n,e.toTimestamp())}function ni(n){return Ct(!!n,49232),rt.fromTimestamp(function(t){const i=ms(t);return new Ht(i.seconds,i.nanos)}(n))}function gm(n,e){return wp(n,e).canonicalString()}function wp(n,e){const t=function(o){return new Nt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function EE(n){const e=Nt.fromString(n);return Ct(PE(e),10190,{key:e.toString()}),e}function Ep(n,e){return gm(n.databaseId,e.path)}function Ff(n,e){const t=EE(e);if(t.get(1)!==n.databaseId.projectId)throw new je(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(TE(t))}function SE(n,e){return gm(n.databaseId,e)}function xk(n){const e=EE(n);return e.length===4?Nt.emptyPath():TE(e)}function Sp(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TE(n){return Ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function y_(n,e,t){return{name:Ep(n,e),fields:t.value.mapValue.fields}}function bk(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:et(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Ct(v===void 0||typeof v=="string",58123),dn.fromBase64String(v||"")):(Ct(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),dn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const v=m.code===void 0?Ee.UNKNOWN:yE(m.code);return new je(v,m.message||"")}(c);t=new _E(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ff(n,i.document.name),a=ni(i.document.updateTime),c=i.document.createTime?ni(i.document.createTime):rt.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=Pn.newFoundDocument(o,a,c,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Gc(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ff(n,i.document),a=i.readTime?ni(i.readTime):rt.min(),c=Pn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Gc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ff(n,i.document),a=i.removedTargetIds||[];t=new Gc([],a,o,null)}else{if(!("filter"in e))return et(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,c=new Ek(o,a),d=i.targetId;t=new vE(d,c)}}return t}function Dk(n,e){let t;if(e instanceof su)t={update:y_(n,e.key,e.value)};else if(e instanceof fm)t={delete:Ep(n,e.key)};else if(e instanceof Cs)t={update:y_(n,e.key,e.data),updateMask:zk(e.fieldMask)};else{if(!(e instanceof vk))return et(16599,{ft:e.type});t={verify:Ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof ch)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ta)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ia)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hh)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw et(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:kk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:et(27497)}(n,e.precondition)),t}function Ok(n,e){return n&&n.length>0?(Ct(e!==void 0,14353),n.map(t=>function(o,a){let c=o.updateTime?ni(o.updateTime):ni(a);return c.isEqual(rt.min())&&(c=ni(a)),new mk(c,o.transformResults||[])}(t,e))):[]}function Nk(n,e){return{documents:[SE(n,e.path)]}}function Lk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=SE(n,o);const a=function(m){if(m.length!==0)return CE(jr.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(v=>function(w){return{field:aa(w.field),direction:Fk(w.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=_p(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:o}}function Mk(n){let e=xk(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ct(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(E){const w=IE(E);return w instanceof jr&&Z0(w)?w.getFilters():[w]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(w=>function(P){return new uh(la(P.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(w))}(t.orderBy));let d=null;t.limit&&(d=function(E){let w;return w=typeof E=="object"?E.value:E,Rh(w)?null:w}(t.limit));let f=null;t.startAt&&(f=function(E){const w=!!E.before,k=E.values||[];return new lh(k,w)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const w=!E.before,k=E.values||[];return new lh(k,w)}(t.endAt)),nk(e,o,c,a,d,"F",f,m)}function Vk(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=la(t.unaryFilter.field);return Zt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=la(t.unaryFilter.field);return Zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=la(t.unaryFilter.field);return Zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=la(t.unaryFilter.field);return Zt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}}(n):n.fieldFilter!==void 0?function(t){return Zt.create(la(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return jr.create(t.compositeFilter.filters.map(i=>IE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return et(1026)}}(t.compositeFilter.op))}(n):et(30097,{filter:n})}function Fk(n){return Ck[n]}function jk(n){return Pk[n]}function Uk(n){return Ak[n]}function aa(n){return{fieldPath:n.canonicalString()}}function la(n){return hn.fromServerFormat(n.fieldPath)}function CE(n){return n instanceof Zt?function(t){if(t.op==="=="){if(i_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(r_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(i_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(r_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:jk(t.op),value:t.value}}}(n):n instanceof jr?function(t){const i=t.getFilters().map(o=>CE(o));return i.length===1?i[0]:{compositeFilter:{op:Uk(t.op),filters:i}}}(n):et(54877,{filter:n})}function zk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,i,o,a=rt.min(),c=rt.min(),d=dn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.wt=e}}function Bk(n){const e=Mk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.yn=new Hk}addToCollectionParentIndex(e,t){return this.yn.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getIndexType(e,t){return _e.resolve(0)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,t){return _e.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return _e.resolve(ps.min())}updateCollectionGroup(e,t,i){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class Hk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new rn(Nt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new rn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AE=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(AE,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ca(0)}static ir(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="LruGarbageCollector",qk=1048576;function w_([n,e],[t,i]){const o=at(n,t);return o===0?at(e,i):o}class Gk{constructor(e){this.cr=e,this.buffer=new rn(w_),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();w_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){Fe(__,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fa(t)?Fe(__,"Ignoring IndexedDB error during garbage collection: ",t):await Va(t)}await this.Ir(3e5)})}}class Qk{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return _e.resolve(Ah.le);const i=new Gk(t);return this.Er.forEachTarget(e,o=>i.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>i.Pr(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(v_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v_):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,o,a,c,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(i=E,d=Date.now(),this.removeTargets(e,i,t))).next(E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(m=Date.now(),sa()<=ct.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${E} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E})))}}function Yk(n,e){return new Qk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.changes=new fo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?_e.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&jl(i.mutation,o,tr.empty(),Ht.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ht()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ht()){const o=Zs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let c=Dl();return a.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Zs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ht()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,o){let a=ki();const c=Fl(),d=function(){return Fl()}();return t.forEach((f,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Cs)?a=a.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),jl(v.mutation,m,v.mutation.getFieldMask(),Ht.now())):c.set(m.key,tr.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>c.set(m,v)),t.forEach((m,v)=>{var E;return d.set(m,new Xk(v,(E=c.get(m))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Fl();let o=new Bt((c,d)=>c-d),a=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=i.get(f)||tr.empty();v=d.applyToLocalView(m,v),i.set(f,v);const E=(o.get(d.batchId)||ht()).add(f);o=o.insert(d.batchId,E)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,E=lE();v.forEach(w=>{if(!a.has(w)){const k=mE(t.get(w),i.get(w));k!==null&&E.set(w,k),a=a.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return _e.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return Ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):_e.resolve(Zs());let d=Hl,f=a;return c.next(m=>_e.forEach(m,(v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(v)?_e.resolve():this.remoteDocumentCache.getEntry(e,v).next(w=>{f=f.insert(v,w)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,ht())).next(v=>({batchId:d,changes:aE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(i=>{let o=Dl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let c=Dl();return this.indexManager.getCollectionParents(e,a).next(d=>_e.forEach(d,f=>{const m=function(E,w){return new iu(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next(v=>{v.forEach((E,w)=>{c=c.insert(E,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(c=>{a.forEach((f,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Pn.newInvalidDocument(v)))});let d=Dl();return c.forEach((f,m)=>{const v=a.get(f);v!==void 0&&jl(v.mutation,m,tr.empty(),Ht.now()),bh(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return _e.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:ni(o.createTime)}}(t)),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:Bk(o.bundledQuery),readTime:ni(o.readTime)}}(t)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.overlays=new Bt(Ge.comparator),this.Or=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Zs();return _e.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.St(e,t,a)}),_e.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Or.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Or.delete(i)),_e.resolve()}getOverlaysForCollection(e,t,i){const o=Zs(),a=t.length+1,c=new Ge(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return _e.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new Bt((m,v)=>m-v);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=Zs(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Zs(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=o)););return _e.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Or.get(o.largestBatchId).delete(i.key);this.Or.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new wk(t,i));let a=this.Or.get(t);a===void 0&&(a=ht(),this.Or.set(t,a)),this.Or.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.Nr=new rn(cn.Br),this.Lr=new rn(cn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new cn(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new cn(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new Ge(new Nt([])),i=new cn(t,e),o=new cn(t,e+1),a=[];return this.Lr.forEachInRange([i,o],c=>{this.Qr(c),a.push(c.key)}),a}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ge(new Nt([])),i=new cn(t,e),o=new cn(t,e+1);let a=ht();return this.Lr.forEachInRange([i,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new cn(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ge.comparator(e.key,t.key)||at(e.Gr,t.Gr)}static kr(e,t){return at(e.Gr,t.Gr)||Ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new rn(cn.Br)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _k(a,t,i,o);this.mutationQueue.push(c);for(const d of o)this.zr=this.zr.add(new cn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return _e.resolve(c)}lookupMutationBatch(e,t){return _e.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Hr(i),a=o<0?0:o;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?om:this.Jn-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new cn(t,0),o=new cn(t,Number.POSITIVE_INFINITY),a=[];return this.zr.forEachInRange([i,o],c=>{const d=this.jr(c.Gr);a.push(d)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new rn(at);return t.forEach(o=>{const a=new cn(o,0),c=new cn(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([a,c],d=>{i=i.add(d.Gr)})}),_e.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ge.isDocumentKey(a)||(a=a.child(""));const c=new cn(new Ge(a),0);let d=new rn(at);return this.zr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Gr)),!0)},c),_e.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(i=>{const o=this.jr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ct(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return _e.forEach(t.mutations,o=>{const a=new cn(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new cn(t,0),o=this.zr.firstAfterOrEqual(i);return _e.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.Zr=e,this.docs=function(){return new Bt(Ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,c=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return _e.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let i=ki();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():Pn.newInvalidDocument(o))}),_e.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=ki();const c=t.path,d=new Ge(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||NR(OR(v),i)<=0||(o.has(v.key)||bh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,t,i,o){et(9500)}Xr(e,t){return _e.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new sx(this)}getSize(e){return _e.resolve(this.size)}}class sx extends Jk{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(i)}),_e.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.persistence=e,this.ei=new fo(t=>um(t),cm),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.ti=0,this.ni=new ym,this.targetCount=0,this.ri=Ca.rr()}forEachTarget(e,t){return this.ei.forEach((i,o)=>t(o)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),_e.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.ar(t),_e.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ei.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ei.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),_e.waitFor(a).next(()=>o)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return _e.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),_e.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return _e.resolve(i)}containsKey(e,t){return _e.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t){this.ii={},this.overlays={},this.si=new Ah(0),this.oi=!1,this.oi=!0,this._i=new nx,this.referenceDelegate=e(this),this.ai=new ox(this),this.indexManager=new Wk,this.remoteDocumentCache=function(o){return new ix(o)}(i=>this.referenceDelegate.ui(i)),this.serializer=new $k(t),this.ci=new ex(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new rx(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){Fe("MemoryPersistence","Starting transaction:",e);const o=new ax(this.si.next());return this.referenceDelegate.li(),i(o).next(a=>this.referenceDelegate.hi(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Pi(e,t){return _e.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class ax extends MR{constructor(e){super(),this.currentSequenceNumber=e}}class vm{constructor(e){this.persistence=e,this.Ti=new ym,this.Ii=null}static Ei(e){return new vm(e)}get di(){if(this.Ii)return this.Ii;throw et(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),_e.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),_e.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.di.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.di,i=>{const o=Ge.fromPath(i);return this.Ai(e,o).next(a=>{a||t.removeEntry(o,rt.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return _e.or([()=>_e.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class fh{constructor(e,t){this.persistence=e,this.Ri=new fo(i=>jR(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=Yk(this,t)}static Ei(e,t){return new fh(e,t)}li(){}hi(e){return _e.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return _e.forEach(this.Ri,(i,o)=>this.gr(e,i,o).next(a=>a?_e.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Xr(e,c=>this.gr(e,c,t).next(d=>{d||(i++,a.removeEntry(c,rt.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),_e.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),_e.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),_e.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wc(e.data.value)),t}gr(e,t,i){return _e.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return _e.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=o}static Ps(e,t){let i=ht(),o=ht();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new _m(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return UI()?8:VR(Rn())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Rs(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Vs(e,t,o,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new lx;return this.fs(e,t,c).next(d=>{if(a.result=d,this.Is)return this.gs(e,t,c,d.size)})}).next(()=>a.result)}gs(e,t,i,o){return i.documentReadCount<this.Es?(sa()<=ct.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),_e.resolve()):(sa()<=ct.DEBUG&&Fe("QueryEngine","Query:",oa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(sa()<=ct.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):_e.resolve())}Rs(e,t){if(l_(t))return _e.resolve(null);let i=ti(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=vp(t,null,"F"),i=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=ht(...a);return this.As.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.ps(t,d);return this.ys(t,m,c,f.readTime)?this.Rs(e,vp(t,null,"F")):this.ws(e,m,t,f)}))})))}Vs(e,t,i,o){return l_(t)||o.isEqual(rt.min())?_e.resolve(null):this.As.getDocuments(e,i).next(a=>{const c=this.ps(t,a);return this.ys(t,c,i,o)?_e.resolve(null):(sa()<=ct.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oa(t)),this.ws(e,c,t,DR(o,Hl)).next(d=>d))})}ps(e,t){let i=new rn(sE(e));return t.forEach((o,a)=>{bh(e,a)&&(i=i.add(a))}),i}ys(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}fs(e,t,i){return sa()<=ct.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",oa(t)),this.As.getDocumentsMatchingQuery(e,t,ps.min(),i)}ws(e,t,i,o){return this.As.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="LocalStore",cx=3e8;class hx{constructor(e,t,i,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new Bt(at),this.Ds=new fo(a=>um(a),cm),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zk(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function dx(n,e,t,i){return new hx(n,e,t,i)}async function kE(n,e){const t=st(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],d=[];let f=ht();for(const m of o){c.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next(m=>({Ms:m,removedBatchIds:c,addedBatchIds:d}))})})}function fx(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const E=m.batch,w=E.keys();let k=_e.resolve();return w.forEach(P=>{k=k.next(()=>v.getEntry(f,P)).next(I=>{const S=m.docVersions.get(P);Ct(S!==null,48541),I.version.compareTo(S)<0&&(E.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),v.addEntry(I)))})}),k.next(()=>d.mutationQueue.removeMutationBatch(f,E))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=ht();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function xE(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function px(n,e){const t=st(n),i=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const d=[];e.targetChanges.forEach((v,E)=>{const w=o.get(E);if(!w)return;d.push(t.ai.removeMatchingKeys(a,v.removedDocuments,E).next(()=>t.ai.addMatchingKeys(a,v.addedDocuments,E)));let k=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?k=k.withResumeToken(dn.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,i)),o=o.insert(E,k),function(I,S,N){return I.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=cx?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(w,k,v)&&d.push(t.ai.updateTargetData(a,k))});let f=ki(),m=ht();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(mx(a,c,e.documentUpdates).next(v=>{f=v.xs,m=v.Os})),!i.isEqual(rt.min())){const v=t.ai.getLastRemoteSnapshotVersion(a).next(E=>t.ai.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(v)}return _e.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.Ss=o,a))}function mx(n,e,t){let i=ht(),o=ht();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=ki();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(rt.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Fe(wm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{xs:c,Os:o}})}function gx(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=om),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function yx(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.ai.getTargetData(i,e).next(a=>a?(o=a,_e.resolve(o)):t.ai.allocateTargetId(i).next(c=>(o=new as(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ss.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function Tp(n,e,t){const i=st(n),o=i.Ss.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Fa(c))throw c;Fe(wm,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(o.target)}function E_(n,e,t){const i=st(n);let o=rt.min(),a=ht();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,v){const E=st(f),w=E.Ds.get(v);return w!==void 0?_e.resolve(E.Ss.get(w)):E.ai.getTargetData(m,v)}(i,c,ti(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(c,d.targetId).next(f=>{a=f})}).next(()=>i.bs.getDocumentsMatchingQuery(c,e,t?o:rt.min(),t?a:ht())).next(d=>(vx(i,ik(e),d),{documents:d,Ns:a})))}function vx(n,e,t){let i=n.vs.get(e)||rt.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.vs.set(e,i)}class S_{constructor(){this.activeTargetIds=ck()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _x{constructor(){this.So=new S_,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new S_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="ConnectivityMonitor";class I_{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Fe(T_,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Fe(T_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function Ip(){return Nc===null?Nc=function(){return 268435456+Math.round(2147483648*Math.random())}():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="RestConnection",Ex={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sx{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${o}`,this.qo=this.databaseId.database===oh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Qo(e,t,i,o,a){const c=Ip(),d=this.$o(e,t.toUriEncodedString());Fe(jf,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(f,o,a);const{host:m}=new URL(d),v=Xl(m);return this.Ko(e,d,f,i,v).then(E=>(Fe(jf,`Received RPC '${e}' ${c}: `,E),E),E=>{throw ro(jf,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",i),E})}Wo(e,t,i,o,a,c){return this.Qo(e,t,i,o,a)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}$o(e,t){const i=Ex[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class Ix extends Sx{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,o,a){const c=Ip();return new Promise((d,f)=>{const m=new D0;m.setWithCredentials(!0),m.listenOnce(O0.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Bc.NO_ERROR:const E=m.getResponseJson();Fe(In,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case Bc.TIMEOUT:Fe(In,`RPC '${e}' ${c} timed out`),f(new je(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const w=m.getStatus();if(Fe(In,`RPC '${e}' ${c} failed with status:`,w,"response text:",m.getResponseText()),w>0){let k=m.getResponseJson();Array.isArray(k)&&(k=k[0]);const P=k==null?void 0:k.error;if(P&&P.status&&P.message){const I=function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(V)>=0?V:Ee.UNKNOWN}(P.status);f(new je(I,P.message))}else f(new je(Ee.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new je(Ee.UNAVAILABLE,"Connection failed."));break;default:et(9055,{s_:e,streamId:c,o_:m.getLastErrorCode(),__:m.getLastError()})}}finally{Fe(In,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(o);Fe(In,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,i,15)})}a_(e,t,i){const o=Ip(),a=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=M0(),d=L0(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Uo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=a.join("");Fe(In,`Creating RPC '${e}' stream ${o}: ${v}`,f);const E=c.createWebChannel(v,f);let w=!1,k=!1;const P=new Tx({Go:S=>{k?Fe(In,`Not sending because RPC '${e}' stream ${o} is closed:`,S):(w||(Fe(In,`Opening RPC '${e}' stream ${o} transport.`),E.open(),w=!0),Fe(In,`RPC '${e}' stream ${o} sending:`,S),E.send(S))},zo:()=>E.close()}),I=(S,N,V)=>{S.listen(N,j=>{try{V(j)}catch(ee){setTimeout(()=>{throw ee},0)}})};return I(E,bl.EventType.OPEN,()=>{k||(Fe(In,`RPC '${e}' stream ${o} transport opened.`),P.t_())}),I(E,bl.EventType.CLOSE,()=>{k||(k=!0,Fe(In,`RPC '${e}' stream ${o} transport closed`),P.r_())}),I(E,bl.EventType.ERROR,S=>{k||(k=!0,ro(In,`RPC '${e}' stream ${o} transport errored. Name:`,S.name,"Message:",S.message),P.r_(new je(Ee.UNAVAILABLE,"The operation could not be completed")))}),I(E,bl.EventType.MESSAGE,S=>{var N;if(!k){const V=S.data[0];Ct(!!V,16349);const j=V,ee=(j==null?void 0:j.error)||((N=j[0])===null||N===void 0?void 0:N.error);if(ee){Fe(In,`RPC '${e}' stream ${o} received error:`,ee);const $=ee.status;let fe=function(x){const D=Xt[x];if(D!==void 0)return yE(D)}($),b=ee.message;fe===void 0&&(fe=Ee.INTERNAL,b="Unknown error status: "+$+" with message "+ee.message),k=!0,P.r_(new je(fe,b)),E.close()}else Fe(In,`RPC '${e}' stream ${o} received:`,V),P.i_(V)}}),I(d,N0.STAT_EVENT,S=>{S.stat===hp.PROXY?Fe(In,`RPC '${e}' stream ${o} detected buffering proxy`):S.stat===hp.NOPROXY&&Fe(In,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.n_()},0),P}}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n){return new Rk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=o,this.l_=a,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-i);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="PersistentStream";class DE{constructor(e,t,i,o,a,c,d,f){this.bi=e,this.R_=i,this.V_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new bE(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Ri(t.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.m_===t&&this.B_(i,o)},i=>{e(()=>{const o=new je(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(o)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{i(()=>this.L_(o))}),this.stream.onMessage(o=>{i(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return Fe(C_,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(Fe(C_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cx extends DE{constructor(e,t,i,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=bk(this.serializer,e),i=function(a){if(!("targetChange"in a))return rt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?rt.min():c.readTime?ni(c.readTime):rt.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=Sp(this.serializer),t.addTarget=function(a,c){let d;const f=c.target;if(d=gp(f)?{documents:Nk(a,f)}:{query:Lk(a,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=wE(a,c.resumeToken);const m=_p(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(rt.min())>0){d.readTime=dh(a,c.snapshotVersion.toTimestamp());const m=_p(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const i=Vk(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=Sp(this.serializer),t.removeTarget=e,this.F_(t)}}class Px extends DE{constructor(e,t,i,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=Ok(e.writeResults,e.commitTime),i=ni(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=Sp(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Dk(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{}class Rx extends Ax{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new je(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Qo(e,wp(t,i),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new je(Ee.UNKNOWN,a.toString())})}Wo(e,t,i,o,a){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,wp(t,i),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new je(Ee.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class kx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Ri(t),this.ea=!1):Fe("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class xx{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=a,this.ca.vo(c=>{i.enqueueAndForget(async()=>{po(this)&&(Fe(io,"Restarting streams for network reachability change."),await async function(f){const m=st(f);m.aa.add(4),await au(m),m.la.set("Unknown"),m.aa.delete(4),await Mh(m)}(this))})}),this.la=new kx(i,o)}}async function Mh(n){if(po(n))for(const e of n.ua)await e(!0)}async function au(n){for(const e of n.ua)await e(!1)}function OE(n,e){const t=st(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Im(t)?Tm(t):ja(t).b_()&&Sm(t,e))}function Em(n,e){const t=st(n),i=ja(t);t._a.delete(e),i.b_()&&NE(t,e),t._a.size===0&&(i.b_()?i.v_():po(t)&&t.la.set("Unknown"))}function Sm(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ja(n).U_(e)}function NE(n,e){n.ha.Ke(e),ja(n).K_(e)}function Tm(n){n.ha=new Ik({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ja(n).start(),n.la.ta()}function Im(n){return po(n)&&!ja(n).w_()&&n._a.size>0}function po(n){return st(n).aa.size===0}function LE(n){n.ha=void 0}async function bx(n){n.la.set("Online")}async function Dx(n){n._a.forEach((e,t)=>{Sm(n,e)})}async function Ox(n,e){LE(n),Im(n)?(n.la.ia(e),Tm(n)):n.la.set("Unknown")}async function Nx(n,e,t){if(n.la.set("Online"),e instanceof _E&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o._a.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o._a.delete(d),o.ha.removeTarget(d))}(n,e)}catch(i){Fe(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ph(n,i)}else if(e instanceof Gc?n.ha.Xe(e):e instanceof vE?n.ha.ot(e):n.ha.nt(e),!t.isEqual(rt.min()))try{const i=await xE(n.localStore);t.compareTo(i)>=0&&await function(a,c){const d=a.ha.It(c);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a._a.get(m);v&&a._a.set(m,v.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,m)=>{const v=a._a.get(f);if(!v)return;a._a.set(f,v.withResumeToken(dn.EMPTY_BYTE_STRING,v.snapshotVersion)),NE(a,f);const E=new as(v.target,f,m,v.sequenceNumber);Sm(a,E)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){Fe(io,"Failed to raise snapshot:",i),await ph(n,i)}}async function ph(n,e,t){if(!Fa(e))throw e;n.aa.add(1),await au(n),n.la.set("Offline"),t||(t=()=>xE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Fe(io,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Mh(n)})}function ME(n,e){return e().catch(t=>ph(n,t,e))}async function Vh(n){const e=st(n),t=vs(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:om;for(;Lx(e);)try{const o=await gx(e.localStore,i);if(o===null){e.oa.length===0&&t.v_();break}i=o.batchId,Mx(e,o)}catch(o){await ph(e,o)}VE(e)&&FE(e)}function Lx(n){return po(n)&&n.oa.length<10}function Mx(n,e){n.oa.push(e);const t=vs(n);t.b_()&&t.W_&&t.G_(e.mutations)}function VE(n){return po(n)&&!vs(n).w_()&&n.oa.length>0}function FE(n){vs(n).start()}async function Vx(n){vs(n).H_()}async function Fx(n){const e=vs(n);for(const t of n.oa)e.G_(t.mutations)}async function jx(n,e,t){const i=n.oa.shift(),o=pm.from(i,e,t);await ME(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Vh(n)}async function Ux(n,e){e&&vs(n).W_&&await async function(i,o){if(function(c){return Sk(c)&&c!==Ee.ABORTED}(o.code)){const a=i.oa.shift();vs(i).D_(),await ME(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Vh(i)}}(n,e),VE(n)&&FE(n)}async function P_(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Fe(io,"RemoteStore received new credentials");const i=po(t);t.aa.add(3),await au(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Mh(t)}async function zx(n,e){const t=st(n);e?(t.aa.delete(2),await Mh(t)):e||(t.aa.add(2),await au(t),t.la.set("Unknown"))}function ja(n){return n.Pa||(n.Pa=function(t,i,o){const a=st(t);return a.Y_(),new Cx(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{jo:bx.bind(null,n),Jo:Dx.bind(null,n),Zo:Ox.bind(null,n),Q_:Nx.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Im(n)?Tm(n):n.la.set("Unknown")):(await n.Pa.stop(),LE(n))})),n.Pa}function vs(n){return n.Ta||(n.Ta=function(t,i,o){const a=st(t);return a.Y_(),new Px(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:Vx.bind(null,n),Zo:Ux.bind(null,n),z_:Fx.bind(null,n),j_:jx.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Vh(n)):(await n.Ta.stop(),n.oa.length>0&&(Fe(io,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const c=Date.now()+i,d=new Cm(e,t,c,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(n,e){if(Ri("AsyncQueue",`${e}: ${n}`),Fa(n))return new je(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ge.comparator(t.key,i.key):(t,i)=>Ge.comparator(t.key,i.key),this.keyedMap=Dl(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.Ia=new Bt(Ge.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):et(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Pa{constructor(e,t,i,o,a,c,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Pa(e,t,ma.emptySet(t),c,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class Bx{constructor(){this.queries=R_(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const o=st(t),a=o.queries;o.queries=R_(),a.forEach((c,d)=>{for(const f of d.Ra)f.onError(i)})})(this,new je(Ee.ABORTED,"Firestore shutting down"))}}function R_(){return new fo(n=>iE(n),xh)}async function jE(n,e){const t=st(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Va()&&e.ma()&&(i=2):(a=new $x,i=e.ma()?0:1);try{switch(i){case 0:a.Aa=await t.onListen(o,!0);break;case 1:a.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Pm(c,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Ra.push(e),e.ga(t.onlineState),a.Aa&&e.pa(a.Aa)&&Am(t)}async function UE(n,e){const t=st(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const c=a.Ra.indexOf(e);c>=0&&(a.Ra.splice(c,1),a.Ra.length===0?o=e.ma()?0:1:!a.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Wx(n,e){const t=st(n);let i=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.Ra)d.pa(o)&&(i=!0);c.Aa=o}}i&&Am(t)}function Hx(n,e,t){const i=st(n),o=i.queries.get(e);if(o)for(const a of o.Ra)a.onError(t);i.queries.delete(e)}function Am(n){n.fa.forEach(e=>{e.next()})}var Cp,k_;(k_=Cp||(Cp={})).ya="default",k_.Cache="cache";class zE{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Pa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class qx{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=ht(),this.mutatedKeys=ht(),this.Ua=sE(e),this.Ka=new ma(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new A_,o=t?t.Ka:this.Ka;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const w=o.get(v),k=bh(this.query,E)?E:null,P=!!w&&this.mutatedKeys.has(w.key),I=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let S=!1;w&&k?w.data.isEqual(k.data)?P!==I&&(i.track({type:3,doc:k}),S=!0):this.ja(w,k)||(i.track({type:2,doc:k}),S=!0,(f&&this.Ua(k,f)>0||m&&this.Ua(k,m)<0)&&(d=!0)):!w&&k?(i.track({type:0,doc:k}),S=!0):w&&!k&&(i.track({type:1,doc:w}),S=!0,(f||m)&&(d=!0)),S&&(k?(c=c.add(k),a=I?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{Ka:c,za:i,ys:d,mutatedKeys:a}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((v,E)=>function(k,P){const I=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Vt:S})}};return I(k)-I(P)}(v.type,E.type)||this.Ua(v.doc,E.doc)),this.Ha(i),o=o!=null&&o;const d=t&&!o?this.Ja():[],f=this.$a.size===0&&this.current&&!o?1:0,m=f!==this.Qa;return this.Qa=f,c.length!==0||m?{snapshot:new Pa(this.query,e.Ka,a,c,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new A_,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=ht(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new BE(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new $E(i))}),t}Xa(e){this.qa=e.Ns,this.$a=ht();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Pa.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Rm="SyncEngine";class Gx{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Kx{constructor(e){this.key=e,this.tu=!1}}class Qx{constructor(e,t,i,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new fo(d=>iE(d),xh),this.iu=new Map,this.su=new Set,this.ou=new Bt(Ge.comparator),this._u=new Map,this.au=new ym,this.uu={},this.cu=new Map,this.lu=Ca.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function Yx(n,e,t=!0){const i=QE(n);let o;const a=i.ru.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.eu()):o=await WE(i,e,t,!0),o}async function Jx(n,e){const t=QE(n);await WE(t,e,!0,!1)}async function WE(n,e,t,i){const o=await yx(n.localStore,ti(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await Xx(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&OE(n.remoteStore,o),d}async function Xx(n,e,t,i,o){n.Pu=(E,w,k)=>async function(I,S,N,V){let j=S.view.Ga(N);j.ys&&(j=await E_(I.localStore,S.query,!1).then(({documents:b})=>S.view.Ga(b,j)));const ee=V&&V.targetChanges.get(S.targetId),$=V&&V.targetMismatches.get(S.targetId)!=null,fe=S.view.applyChanges(j,I.isPrimaryClient,ee,$);return b_(I,S.targetId,fe.Ya),fe.snapshot}(n,E,w,k);const a=await E_(n.localStore,e,!0),c=new qx(e,a.Ns),d=c.Ga(a.documents),f=ou.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=c.applyChanges(d,n.isPrimaryClient,f);b_(n,t,m.Ya);const v=new Gx(e,t,c);return n.ru.set(e,v),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),m.snapshot}async function Zx(n,e,t){const i=st(n),o=i.ru.get(e),a=i.iu.get(o.targetId);if(a.length>1)return i.iu.set(o.targetId,a.filter(c=>!xh(c,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Tp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Em(i.remoteStore,o.targetId),Pp(i,o.targetId)}).catch(Va)):(Pp(i,o.targetId),await Tp(i.localStore,o.targetId,!0))}async function eb(n,e){const t=st(n),i=t.ru.get(e),o=t.iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Em(t.remoteStore,i.targetId))}async function tb(n,e,t){const i=lb(n);try{const o=await function(c,d){const f=st(c),m=Ht.now(),v=d.reduce((k,P)=>k.add(P.key),ht());let E,w;return f.persistence.runTransaction("Locally write mutations","readwrite",k=>{let P=ki(),I=ht();return f.Cs.getEntries(k,v).next(S=>{P=S,P.forEach((N,V)=>{V.isValidDocument()||(I=I.add(N))})}).next(()=>f.localDocuments.getOverlayedDocuments(k,P)).next(S=>{E=S;const N=[];for(const V of d){const j=yk(V,E.get(V.key).overlayedDocument);j!=null&&N.push(new Cs(V.key,j,Y0(j.value.mapValue),mr.exists(!0)))}return f.mutationQueue.addMutationBatch(k,m,N,d)}).next(S=>{w=S;const N=S.applyToLocalDocumentSet(E,I);return f.documentOverlayCache.saveOverlays(k,S.batchId,N)})}).then(()=>({batchId:w.batchId,changes:aE(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,d,f){let m=c.uu[c.currentUser.toKey()];m||(m=new Bt(at)),m=m.insert(d,f),c.uu[c.currentUser.toKey()]=m}(i,o.batchId,t),await lu(i,o.changes),await Vh(i.remoteStore)}catch(o){const a=Pm(o,"Failed to persist write");t.reject(a)}}async function HE(n,e){const t=st(n);try{const i=await px(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t._u.get(a);c&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.tu=!0:o.modifiedDocuments.size>0?Ct(c.tu,14607):o.removedDocuments.size>0&&(Ct(c.tu,42227),c.tu=!1))}),await lu(t,i,e)}catch(i){await Va(i)}}function x_(n,e,t){const i=st(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ru.forEach((a,c)=>{const d=c.view.ga(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const f=st(c);f.onlineState=d;let m=!1;f.queries.forEach((v,E)=>{for(const w of E.Ra)w.ga(d)&&(m=!0)}),m&&Am(f)}(i.eventManager,e),o.length&&i.nu.Q_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nb(n,e,t){const i=st(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i._u.get(e),a=o&&o.key;if(a){let c=new Bt(Ge.comparator);c=c.insert(a,Pn.newNoDocument(a,rt.min()));const d=ht().add(a),f=new Nh(rt.min(),new Map,new Bt(at),c,d);await HE(i,f),i.ou=i.ou.remove(a),i._u.delete(e),km(i)}else await Tp(i.localStore,e,!1).then(()=>Pp(i,e,t)).catch(Va)}async function rb(n,e){const t=st(n),i=e.batch.batchId;try{const o=await fx(t.localStore,e);GE(t,i,null),qE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await lu(t,o)}catch(o){await Va(o)}}async function ib(n,e,t){const i=st(n);try{const o=await function(c,d){const f=st(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(E=>(Ct(E!==null,37113),v=E.keys(),f.mutationQueue.removeMutationBatch(m,E))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(i.localStore,e);GE(i,e,t),qE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await lu(i,o)}catch(o){await Va(o)}}function qE(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function GE(n,e,t){const i=st(n);let o=i.uu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.uu[i.currentUser.toKey()]=o}}function Pp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||KE(n,i)})}function KE(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(Em(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),km(n))}function b_(n,e,t){for(const i of t)i instanceof $E?(n.au.addReference(i.key,e),sb(n,i)):i instanceof BE?(Fe(Rm,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||KE(n,i.key)):et(19791,{Iu:i})}function sb(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(Fe(Rm,"New document in limbo: "+t),n.su.add(i),km(n))}function km(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ge(Nt.fromString(e)),i=n.lu.next();n._u.set(i,new Kx(t)),n.ou=n.ou.insert(t,i),OE(n.remoteStore,new as(ti(hm(t.path)),i,"TargetPurposeLimboResolution",Ah.le))}}async function lu(n,e,t){const i=st(n),o=[],a=[],c=[];i.ru.isEmpty()||(i.ru.forEach((d,f)=>{c.push(i.Pu(f,e,t).then(m=>{var v;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){o.push(m);const E=_m.Ps(f.targetId,m);a.push(E)}}))}),await Promise.all(c),i.nu.Q_(o),await async function(f,m){const v=st(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>_e.forEach(m,w=>_e.forEach(w.ls,k=>v.persistence.referenceDelegate.addReference(E,w.targetId,k)).next(()=>_e.forEach(w.hs,k=>v.persistence.referenceDelegate.removeReference(E,w.targetId,k)))))}catch(E){if(!Fa(E))throw E;Fe(wm,"Failed to update sequence numbers: "+E)}for(const E of m){const w=E.targetId;if(!E.fromCache){const k=v.Ss.get(w),P=k.snapshotVersion,I=k.withLastLimboFreeSnapshotVersion(P);v.Ss=v.Ss.insert(w,I)}}}(i.localStore,a))}async function ob(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Fe(Rm,"User change. New user:",e.toKey());const i=await kE(t.localStore,e);t.currentUser=e,function(a,c){a.cu.forEach(d=>{d.forEach(f=>{f.reject(new je(Ee.CANCELLED,c))})}),a.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lu(t,i.Ms)}}function ab(n,e){const t=st(n),i=t._u.get(e);if(i&&i.tu)return ht().add(i.key);{let o=ht();const a=t.iu.get(e);if(!a)return o;for(const c of a){const d=t.ru.get(c);o=o.unionWith(d.view.Wa)}return o}}function QE(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ab.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nb.bind(null,e),e.nu.Q_=Wx.bind(null,e.eventManager),e.nu.Tu=Hx.bind(null,e.eventManager),e}function lb(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ib.bind(null,e),e}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return dx(this.persistence,new ux,e.initialUser,this.serializer)}Ru(e){return new RE(vm.Ei,this.serializer)}Au(e){return new _x}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class ub extends mh{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ct(this.persistence.referenceDelegate instanceof fh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Kk(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new RE(i=>fh.Ei(i,t),this.serializer)}}class Ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>x_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ob.bind(null,this.syncEngine),await zx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Bx}()}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),i=function(a){return new Ix(a)}(e.databaseInfo);return function(a,c,d,f){return new Rx(a,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,c,d){return new xx(i,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>x_(this.syncEngine,t,0),function(){return I_.C()?new I_:new wx}())}createSyncEngine(e,t){return function(o,a,c,d,f,m,v){const E=new Qx(o,a,c,d,f,m);return v&&(E.hu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=st(o);Fe(io,"RemoteStore shutting down."),a.aa.add(5),await au(a),a.ca.shutdown(),a.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class cb{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Cn.UNAUTHENTICATED,this.clientId=sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{Fe(_s,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Fe(_s,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Pm(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function zf(n,e){n.asyncQueue.verifyOperationInProgress(),Fe(_s,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await kE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function D_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hb(n);Fe(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>P_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>P_(e.remoteStore,o)),n._onlineComponents=e}async function hb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe(_s,"Using user provided OfflineComponentProvider");try{await zf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ro("Error using user provided cache. Falling back to memory cache: "+t),await zf(n,new mh)}}else Fe(_s,"Using default OfflineComponentProvider"),await zf(n,new ub(void 0));return n._offlineComponents}async function JE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe(_s,"Using user provided OnlineComponentProvider"),await D_(n,n._uninitializedComponentsProvider._online)):(Fe(_s,"Using default OnlineComponentProvider"),await D_(n,new Ap))),n._onlineComponents}function db(n){return JE(n).then(e=>e.syncEngine)}async function XE(n){const e=await JE(n),t=e.eventManager;return t.onListen=Yx.bind(null,e.syncEngine),t.onUnlisten=Zx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Jx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eb.bind(null,e.syncEngine),t}function fb(n,e,t={}){const i=new Si;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,f,m){const v=new YE({next:w=>{v.yu(),c.enqueueAndForget(()=>UE(a,E));const k=w.docs.has(d);!k&&w.fromCache?m.reject(new je(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&w.fromCache&&f&&f.source==="server"?m.reject(new je(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),E=new zE(hm(d.path),v,{includeMetadataChanges:!0,Fa:!0});return jE(a,E)}(await XE(n),n.asyncQueue,e,t,i)),i.promise}function pb(n,e,t={}){const i=new Si;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,f,m){const v=new YE({next:w=>{v.yu(),c.enqueueAndForget(()=>UE(a,E)),w.fromCache&&f.source==="server"?m.reject(new je(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),E=new zE(d,v,{includeMetadataChanges:!0,Fa:!0});return jE(a,E)}(await XE(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e,t){if(!t)throw new je(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tS(n,e,t,i){if(e===!0&&i===!0)throw new je(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function N_(n){if(!Ge.isDocumentKey(n))throw new je(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function L_(n){if(Ge.isDocumentKey(n))throw new je(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":et(12329,{type:typeof n})}function yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fh(n);throw new je(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firestore.googleapis.com",M_=!0;class V_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new je(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nS,this.ssl=M_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:M_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qk)throw new je(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new j0;switch(i.type){case"firstParty":return new AR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new je(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Sh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=O_.get(t);i&&(Fe("ComponentProvider","Removing Datastore"),O_.delete(t),i.terminate())}(this),Promise.resolve()}}function rS(n,e,t,i={}){var o;n=yr(n,jh);const a=Xl(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;c.host!==nS&&c.host!==f&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:f,ssl:a,emulatorOptions:i});if(!Ci(m,d)&&(n._setSettings(m),a&&(qw(`https://${f}`),Sh("Firestore",!0)),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=Cn.MOCK_USER;else{v=bI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new je(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Cn(w)}n._authCredentials=new IR(new F0(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class An{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class Ti extends mo{constructor(e,t,i){super(e,t,hm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Ge(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function ws(n,e,...t){if(n=sn(n),eS("collection","path",e),n instanceof jh){const i=Nt.fromString(e,...t);return L_(i),new Ti(n,null,i)}{if(!(n instanceof An||n instanceof Ti))throw new je(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return L_(i),new Ti(n.firestore,null,i)}}function kn(n,e,...t){if(n=sn(n),arguments.length===1&&(e=sm.newId()),eS("doc","path",e),n instanceof jh){const i=Nt.fromString(e,...t);return N_(i),new An(n,null,new Ge(i))}{if(!(n instanceof An||n instanceof Ti))throw new je(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Nt.fromString(e,...t));return N_(i),new An(n.firestore,n instanceof Ti?n.converter:null,new Ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="AsyncQueue";class j_{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new bE(this,"async_queue_retry"),this.ju=()=>{const i=Uf();i&&Fe(F_,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Si;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!Fa(e))throw e;Fe(F_,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,Ri("INTERNAL UNHANDLED ERROR: ",U_(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=Cm.createAndSchedule(this,e,t,i,a=>this.Xu(a));return this.Uu.push(o),o}Ju(){this.Ku&&et(47125,{ec:U_(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function U_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ps extends jh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new j_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,await e}}}function iS(n,e){const t=typeof n=="object"?n:Yw(),i=typeof n=="string"?n:e||oh,o=qp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=kI("firestore");a&&rS(o,...a)}return o}function Uh(n){if(n._terminated)throw new je(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mb(n),n._firestoreClient}function mb(n){var e,t,i;const o=n._freezeSettings(),a=function(d,f,m,v){return new $R(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ZE(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new cb(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(dn.fromBase64String(e))}catch(t){throw new je(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new so(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=/^__.*__$/;class yb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class sS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{oc:n})}}class Bh{constructor(e,t,i,o,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this._c(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new Bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o.lc(e),o}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return gh(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(oS(this.oc)&&gb.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class vb{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Lh(e)}dc(e,t,i,o=!1){return new Bh({oc:e,methodName:t,Ec:i,path:hn.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wh(n){const e=n._freezeSettings(),t=Lh(n._databaseId);return new vb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aS(n,e,t,i,o,a={}){const c=n.dc(a.merge||a.mergeFields?2:0,e,t,o);Dm("Data must be an object, but it was:",c,i);const d=uS(i,c);let f,m;if(a.merge)f=new tr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const E of a.mergeFields){const w=Rp(e,E,t);if(!c.contains(w))throw new je(Ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);hS(v,w)||v.push(w)}f=new tr(v),m=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,m=c.fieldTransforms;return new yb(new Hn(d),f,m)}class Hh extends Ua{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}function lS(n,e,t){return new Bh({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xm extends Ua{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=lS(this,e,!0),i=this.Ac.map(a=>go(a,t)),o=new Ta(i);return new pE(e.path,o)}isEqual(e){return e instanceof xm&&Ci(this.Ac,e.Ac)}}class bm extends Ua{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=lS(this,e,!0),i=this.Ac.map(a=>go(a,t)),o=new Ia(i);return new pE(e.path,o)}isEqual(e){return e instanceof bm&&Ci(this.Ac,e.Ac)}}function _b(n,e,t,i){const o=n.dc(1,e,t);Dm("Data must be an object, but it was:",o,i);const a=[],c=Hn.empty();Is(i,(f,m)=>{const v=Om(e,f,t);m=sn(m);const E=o.hc(v);if(m instanceof Hh)a.push(v);else{const w=go(m,E);w!=null&&(a.push(v),c.set(v,w))}});const d=new tr(a);return new sS(c,d,o.fieldTransforms)}function wb(n,e,t,i,o,a){const c=n.dc(1,e,t),d=[Rp(e,i,t)],f=[o];if(a.length%2!=0)throw new je(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)d.push(Rp(e,a[w])),f.push(a[w+1]);const m=[],v=Hn.empty();for(let w=d.length-1;w>=0;--w)if(!hS(m,d[w])){const k=d[w];let P=f[w];P=sn(P);const I=c.hc(k);if(P instanceof Hh)m.push(k);else{const S=go(P,I);S!=null&&(m.push(k),v.set(k,S))}}const E=new tr(m);return new sS(v,E,c.fieldTransforms)}function Eb(n,e,t,i=!1){return go(t,n.dc(i?4:3,e))}function go(n,e){if(cS(n=sn(n)))return Dm("Unsupported field value:",e,n),uS(n,e);if(n instanceof Ua)return function(i,o){if(!oS(o.oc))throw o.Tc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,o){const a=[];let c=0;for(const d of i){let f=go(d,o.Pc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=sn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hk(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Ht.fromDate(i);return{timestampValue:dh(o.serializer,a)}}if(i instanceof Ht){const a=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dh(o.serializer,a)}}if(i instanceof zh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof so)return{bytesValue:wE(o.serializer,i._byteString)};if(i instanceof An){const a=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw o.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof $h)return function(c,d){return{mapValue:{fields:{[K0]:{stringValue:Q0},[ah]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.Tc("VectorValues must only contain numeric values.");return dm(d.serializer,m)})}}}}}}(i,o);throw o.Tc(`Unsupported field value: ${Fh(i)}`)}(n,e)}function uS(n,e){const t={};return $0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(n,(i,o)=>{const a=go(o,e.uc(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function cS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof zh||n instanceof so||n instanceof An||n instanceof Ua||n instanceof $h)}function Dm(n,e,t){if(!cS(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Fh(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function Rp(n,e,t){if((e=sn(e))instanceof uu)return e._internalPath;if(typeof e=="string")return Om(n,e);throw gh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Sb=new RegExp("[~\\*/\\[\\]]");function Om(n,e,t){if(e.search(Sb)>=0)throw gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uu(...e.split("."))._internalPath}catch{throw gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gh(n,e,t,i,o){const a=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${o}`),f+=")"),new je(Ee.INVALID_ARGUMENT,d+n+f)}function hS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Tb extends dS{data(){return super.data()}}function Nm(n,e){return typeof e=="string"?Om(n,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new je(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class fS extends Lm{}function qh(n,e,...t){let i=[];e instanceof Lm&&i.push(e),i=i.concat(t),function(a){const c=a.filter(f=>f instanceof Gh).length,d=a.filter(f=>f instanceof cu).length;if(c>1||c>0&&d>0)throw new je(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class cu extends fS{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new cu(e,t,i)}_apply(e){const t=this._parse(e);return pS(e._query,t),new mo(e.firestore,e.converter,yp(e._query,t))}_parse(e){const t=Wh(e.firestore);return function(a,c,d,f,m,v,E){let w;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new je(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){$_(E,v);const P=[];for(const I of E)P.push(z_(f,a,I));w={arrayValue:{values:P}}}else w=z_(f,a,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||$_(E,v),w=Eb(d,c,E,v==="in"||v==="not-in");return Zt.create(m,v,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Aa(n,e,t){const i=e,o=Nm("where",n);return cu._create(o,i,t)}class Gh extends Lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gh(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const d=a.getFlattenedFilters();for(const f of d)pS(c,f),c=yp(c,f)}(e._query,t),new mo(e.firestore,e.converter,yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function z_(n,e,t){if(typeof(t=sn(t))=="string"){if(t==="")throw new je(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rE(e)&&t.indexOf("/")!==-1)throw new je(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Nt.fromString(t));if(!Ge.isDocumentKey(i))throw new je(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return n_(n,new Ge(i))}if(t instanceof An)return n_(n,t._key);throw new je(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(t)}.`)}function $_(n,e){if(!Array.isArray(n)||n.length===0)throw new je(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pS(n,e){const t=function(o,a){for(const c of o)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new je(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mS{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Is(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[ah].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>Gt(c.doubleValue));return new $h(a)}convertGeoPoint(e){return new zh(Gt(e.latitude),Gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=kh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Nt.fromString(e);Ct(PE(i),9688,{name:e});const o=new wa(i.get(1),i.get(3)),a=new Ge(i.popFirst(5));return o.isEqual(t)||Ri(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mm extends dS{constructor(e,t,i,o,a,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Nm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ul extends Mm{data(e={}){return super.data(e)}}class yS{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ca(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ul(this._firestore,this._userDataWriter,i.key,i,new ca(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const f=new Ul(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ca(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new Ul(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ca(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:Cb(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Cb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(n){n=yr(n,An);const e=yr(n.firestore,Ps);return fb(Uh(e),n._key).then(t=>Ab(e,n,t))}class vS extends mS{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}function ao(n){n=yr(n,mo);const e=yr(n.firestore,Ps),t=Uh(e),i=new vS(e);return Ib(n._query),pb(t,n._query).then(o=>new yS(e,i,n,o))}function hu(n,e,t){n=yr(n,An);const i=yr(n.firestore,Ps),o=gS(n.converter,e,t);return du(i,[aS(Wh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,mr.none())])}function Ra(n,e,t,...i){n=yr(n,An);const o=yr(n.firestore,Ps),a=Wh(o);let c;return c=typeof(e=sn(e))=="string"||e instanceof uu?wb(a,"updateDoc",n._key,e,t,i):_b(a,"updateDoc",n._key,e),du(o,[c.toMutation(n._key,mr.exists(!0))])}function _S(n){return du(yr(n.firestore,Ps),[new fm(n._key,mr.none())])}function Pb(n,e){const t=yr(n.firestore,Ps),i=kn(n),o=gS(n.converter,e);return du(t,[aS(Wh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,mr.exists(!1))]).then(()=>i)}function du(n,e){return function(i,o){const a=new Si;return i.asyncQueue.enqueueAndForget(async()=>tb(await db(i),o,a)),a.promise}(Uh(n),e)}function Ab(n,e,t){const i=t.docs.get(e._key),o=new vS(n);return new Mm(n,o,e._key,i,new ca(t.hasPendingWrites,t.fromCache),e.converter)}function Vm(...n){return new xm("arrayUnion",n)}function Fm(...n){return new bm("arrayRemove",n)}(function(e,t=!0){(function(o){Ma=o})(Na),ga(new eo("firestore",(i,{instanceIdentifier:o,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new Ps(new CR(i.getProvider("auth-internal")),new RR(c,i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new je(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(m.options.projectId,v)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),cs(Wv,Hv,e),cs(Wv,Hv,"esm2017")})();const Rb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:mS,Bytes:so,CollectionReference:Ti,DocumentReference:An,DocumentSnapshot:Mm,FieldPath:uu,FieldValue:Ua,Firestore:Ps,FirestoreError:je,GeoPoint:zh,Query:mo,QueryCompositeFilterConstraint:Gh,QueryConstraint:fS,QueryDocumentSnapshot:Ul,QueryFieldFilterConstraint:cu,QuerySnapshot:yS,SnapshotMetadata:ca,Timestamp:Ht,VectorValue:$h,_AutoId:sm,_ByteString:dn,_DatabaseId:wa,_DocumentKey:Ge,_EmptyAuthCredentialsProvider:j0,_FieldPath:hn,_cast:yr,_logWarn:ro,_validateIsNotUsedTogether:tS,addDoc:Pb,arrayRemove:Fm,arrayUnion:Vm,collection:ws,connectFirestoreEmulator:rS,deleteDoc:_S,doc:kn,ensureFirestoreConfigured:Uh,executeWrite:du,getDoc:oo,getDocs:ao,getFirestore:iS,query:qh,setDoc:hu,updateDoc:Ra,where:Aa},Symbol.toStringTag,{value:"Module"})),kb={apiKey:"AIzaSyAQ_SsjWagL4VemB06Jm8KsEHEjK6Rn42A",authDomain:"we-are-the-walrus.firebaseapp.com",projectId:"we-are-the-walrus",storageBucket:"we-are-the-walrus.firebasestorage.app",messagingSenderId:"267097892790",appId:"1:267097892790:web:bed96f56aaeb465e200317"},wS=Qw(kb),ua=SR(wS),Kt=iS(wS,"crossword"),xb=Object.freeze(Object.defineProperty({__proto__:null,auth:ua,db:Kt},Symbol.toStringTag,{value:"Module"})),ES=G.createContext();function bb({children:n}){const[e,t]=G.useState(null),[i,o]=G.useState(!0);G.useEffect(()=>cA(ua,async v=>{if(v){const E=await oo(kn(Kt,"users",v.uid));let w=E.exists()?E.data():{};console.log("firebaseUser:"),console.log(v),console.log(E);const k=w.admin;t({uid:v.uid,email:v.email,admin:k,...w}),console.log(`isAdmin: ${k}`)}else t(null);o(!1)}),[]);const f={user:e,login:(m,v)=>{if(m==="google"){const E=new vi;return bA(ua,E)}return sA(ua,m,v)},logout:()=>hA(ua),changePassword:m=>oA(ua.currentUser,m)};return Y.jsx(ES.Provider,{value:f,children:!i&&n})}function yo(){return G.useContext(ES)}function B_({children:n}){const{user:e}=yo();return e?n:Y.jsx(tp,{to:"/crossworder/login",replace:!0})}function Db({children:n}){const{user:e}=yo();return e===null?null:e?e.admin?n:Y.jsx(tp,{to:"/crossworder/",replace:!0}):Y.jsx(tp,{to:"/crossworder/login",replace:!0})}function Ob(){const{login:n,user:e}=yo(),t=Yl(),[i,o]=G.useState(""),[a,c]=G.useState(""),[d,f]=G.useState("");G.useEffect(()=>{e&&t("/crossworder/")},[e,t]);const m=async E=>{E.preventDefault(),f("");try{await n(i,a)}catch{f("Invalid email or password")}},v=async()=>{f("");try{await n("google")}catch{f("Google login failed")}};return Y.jsxs("div",{className:"login-container",children:[Y.jsx("h2",{children:"Login"}),Y.jsxs("form",{onSubmit:m,children:[Y.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:E=>o(E.target.value),required:!0}),Y.jsx("input",{type:"password",placeholder:"Password",value:a,onChange:E=>c(E.target.value),required:!0}),Y.jsx("button",{type:"submit",children:"Login"}),Y.jsx("button",{type:"button",onClick:v,style:{marginTop:12,background:"#fff",color:"#222",border:"1.5px solid #4285F4"},children:"Sign in with Google"}),d&&Y.jsx("div",{className:"error",children:d})]})]})}var Al={},$f={exports:{}},Tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function Nb(){if(W_)return Tt;W_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),P;P=Symbol.for("react.module.reference");function I(S){if(typeof S=="object"&&S!==null){var N=S.$$typeof;switch(N){case n:switch(S=S.type,S){case t:case o:case i:case m:case v:return S;default:switch(S=S&&S.$$typeof,S){case d:case c:case f:case w:case E:case a:return S;default:return N}}case e:return N}}}return Tt.ContextConsumer=c,Tt.ContextProvider=a,Tt.Element=n,Tt.ForwardRef=f,Tt.Fragment=t,Tt.Lazy=w,Tt.Memo=E,Tt.Portal=e,Tt.Profiler=o,Tt.StrictMode=i,Tt.Suspense=m,Tt.SuspenseList=v,Tt.isAsyncMode=function(){return!1},Tt.isConcurrentMode=function(){return!1},Tt.isContextConsumer=function(S){return I(S)===c},Tt.isContextProvider=function(S){return I(S)===a},Tt.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===n},Tt.isForwardRef=function(S){return I(S)===f},Tt.isFragment=function(S){return I(S)===t},Tt.isLazy=function(S){return I(S)===w},Tt.isMemo=function(S){return I(S)===E},Tt.isPortal=function(S){return I(S)===e},Tt.isProfiler=function(S){return I(S)===o},Tt.isStrictMode=function(S){return I(S)===i},Tt.isSuspense=function(S){return I(S)===m},Tt.isSuspenseList=function(S){return I(S)===v},Tt.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===t||S===o||S===i||S===m||S===v||S===k||typeof S=="object"&&S!==null&&(S.$$typeof===w||S.$$typeof===E||S.$$typeof===a||S.$$typeof===c||S.$$typeof===f||S.$$typeof===P||S.getModuleId!==void 0)},Tt.typeOf=I,Tt}var H_;function Lb(){return H_||(H_=1,$f.exports=Nb()),$f.exports}var SS=Lb(),Bf,q_;function Mb(){return q_||(q_=1,Bf=function(e,t,i,o){var a=i?i.call(o,e,t):void 0;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var c=Object.keys(e),d=Object.keys(t);if(c.length!==d.length)return!1;for(var f=Object.prototype.hasOwnProperty.bind(t),m=0;m<c.length;m++){var v=c[m];if(!f(v))return!1;var E=e[v],w=t[v];if(a=i?i.call(o,E,w,v):void 0,a===!1||a===void 0&&E!==w)return!1}return!0}),Bf}var Vb=Mb();const Fb=Kl(Vb);function jb(n){function e(K,Q,ie,Pe,q){for(var De=0,oe=0,ze=0,me=0,He,Le,it=0,Et=0,Je,ft=Je=He=0,nt=0,Pt=0,St=0,ot=0,Ft=ie.length,_n=Ft-1,jt,qe="",lt="",pt="",L="",W;nt<Ft;){if(Le=ie.charCodeAt(nt),nt===_n&&oe+me+ze+De!==0&&(oe!==0&&(Le=oe===47?10:47),me=ze=De=0,Ft++,_n++),oe+me+ze+De===0){if(nt===_n&&(0<Pt&&(qe=qe.replace(w,"")),0<qe.trim().length)){switch(Le){case 32:case 9:case 59:case 13:case 10:break;default:qe+=ie.charAt(nt)}Le=59}switch(Le){case 123:for(qe=qe.trim(),He=qe.charCodeAt(0),Je=1,ot=++nt;nt<Ft;){switch(Le=ie.charCodeAt(nt)){case 123:Je++;break;case 125:Je--;break;case 47:switch(Le=ie.charCodeAt(nt+1)){case 42:case 47:e:{for(ft=nt+1;ft<_n;++ft)switch(ie.charCodeAt(ft)){case 47:if(Le===42&&ie.charCodeAt(ft-1)===42&&nt+2!==ft){nt=ft+1;break e}break;case 10:if(Le===47){nt=ft+1;break e}}nt=ft}}break;case 91:Le++;case 40:Le++;case 34:case 39:for(;nt++<_n&&ie.charCodeAt(nt)!==Le;);}if(Je===0)break;nt++}switch(Je=ie.substring(ot,nt),He===0&&(He=(qe=qe.replace(E,"").trim()).charCodeAt(0)),He){case 64:switch(0<Pt&&(qe=qe.replace(w,"")),Le=qe.charCodeAt(1),Le){case 100:case 109:case 115:case 45:Pt=Q;break;default:Pt=ge}if(Je=e(Q,Pt,Je,Le,q+1),ot=Je.length,0<J&&(Pt=t(ge,qe,St),W=d(3,Je,Pt,Q,A,U,ot,Le,q,Pe),qe=Pt.join(""),W!==void 0&&(ot=(Je=W.trim()).length)===0&&(Le=0,Je="")),0<ot)switch(Le){case 115:qe=qe.replace(fe,c);case 100:case 109:case 45:Je=qe+"{"+Je+"}";break;case 107:qe=qe.replace(V,"$1 $2"),Je=qe+"{"+Je+"}",Je=he===1||he===2&&a("@"+Je,3)?"@-webkit-"+Je+"@"+Je:"@"+Je;break;default:Je=qe+Je,Pe===112&&(Je=(lt+=Je,""))}else Je="";break;default:Je=e(Q,t(Q,qe,St),Je,Pe,q+1)}pt+=Je,Je=St=Pt=ft=He=0,qe="",Le=ie.charCodeAt(++nt);break;case 125:case 59:if(qe=(0<Pt?qe.replace(w,""):qe).trim(),1<(ot=qe.length))switch(ft===0&&(He=qe.charCodeAt(0),He===45||96<He&&123>He)&&(ot=(qe=qe.replace(" ",":")).length),0<J&&(W=d(1,qe,Q,K,A,U,lt.length,Pe,q,Pe))!==void 0&&(ot=(qe=W.trim()).length)===0&&(qe="\0\0"),He=qe.charCodeAt(0),Le=qe.charCodeAt(1),He){case 0:break;case 64:if(Le===105||Le===99){L+=qe+ie.charAt(nt);break}default:qe.charCodeAt(ot-1)!==58&&(lt+=o(qe,He,Le,qe.charCodeAt(2)))}St=Pt=ft=He=0,qe="",Le=ie.charCodeAt(++nt)}}switch(Le){case 13:case 10:oe===47?oe=0:1+He===0&&Pe!==107&&0<qe.length&&(Pt=1,qe+="\0"),0<J*O&&d(0,qe,Q,K,A,U,lt.length,Pe,q,Pe),U=1,A++;break;case 59:case 125:if(oe+me+ze+De===0){U++;break}default:switch(U++,jt=ie.charAt(nt),Le){case 9:case 32:if(me+De+oe===0)switch(it){case 44:case 58:case 9:case 32:jt="";break;default:Le!==32&&(jt=" ")}break;case 0:jt="\\0";break;case 12:jt="\\f";break;case 11:jt="\\v";break;case 38:me+oe+De===0&&(Pt=St=1,jt="\f"+jt);break;case 108:if(me+oe+De+pe===0&&0<ft)switch(nt-ft){case 2:it===112&&ie.charCodeAt(nt-3)===58&&(pe=it);case 8:Et===111&&(pe=Et)}break;case 58:me+oe+De===0&&(ft=nt);break;case 44:oe+ze+me+De===0&&(Pt=1,jt+="\r");break;case 34:case 39:oe===0&&(me=me===Le?0:me===0?Le:me);break;case 91:me+oe+ze===0&&De++;break;case 93:me+oe+ze===0&&De--;break;case 41:me+oe+De===0&&ze--;break;case 40:if(me+oe+De===0){if(He===0)switch(2*it+3*Et){case 533:break;default:He=1}ze++}break;case 64:oe+ze+me+De+ft+Je===0&&(Je=1);break;case 42:case 47:if(!(0<me+De+ze))switch(oe){case 0:switch(2*Le+3*ie.charCodeAt(nt+1)){case 235:oe=47;break;case 220:ot=nt,oe=42}break;case 42:Le===47&&it===42&&ot+2!==nt&&(ie.charCodeAt(ot+2)===33&&(lt+=ie.substring(ot,nt+1)),jt="",oe=0)}}oe===0&&(qe+=jt)}Et=it,it=Le,nt++}if(ot=lt.length,0<ot){if(Pt=Q,0<J&&(W=d(2,lt,Pt,K,A,U,ot,Pe,q,Pe),W!==void 0&&(lt=W).length===0))return L+lt+pt;if(lt=Pt.join(",")+"{"+lt+"}",he*pe!==0){switch(he!==2||a(lt,2)||(pe=0),pe){case 111:lt=lt.replace(ee,":-moz-$1")+lt;break;case 112:lt=lt.replace(j,"::-webkit-input-$1")+lt.replace(j,"::-moz-$1")+lt.replace(j,":-ms-input-$1")+lt}pe=0}}return L+lt+pt}function t(K,Q,ie){var Pe=Q.trim().split(S);Q=Pe;var q=Pe.length,De=K.length;switch(De){case 0:case 1:var oe=0;for(K=De===0?"":K[0]+" ";oe<q;++oe)Q[oe]=i(K,Q[oe],ie).trim();break;default:var ze=oe=0;for(Q=[];oe<q;++oe)for(var me=0;me<De;++me)Q[ze++]=i(K[me]+" ",Pe[oe],ie).trim()}return Q}function i(K,Q,ie){var Pe=Q.charCodeAt(0);switch(33>Pe&&(Pe=(Q=Q.trim()).charCodeAt(0)),Pe){case 38:return Q.replace(N,"$1"+K.trim());case 58:return K.trim()+Q.replace(N,"$1"+K.trim());default:if(0<1*ie&&0<Q.indexOf("\f"))return Q.replace(N,(K.charCodeAt(0)===58?"":"$1")+K.trim())}return K+Q}function o(K,Q,ie,Pe){var q=K+";",De=2*Q+3*ie+4*Pe;if(De===944){K=q.indexOf(":",9)+1;var oe=q.substring(K,q.length-1).trim();return oe=q.substring(0,K).trim()+oe+";",he===1||he===2&&a(oe,1)?"-webkit-"+oe+oe:oe}if(he===0||he===2&&!a(q,1))return q;switch(De){case 1015:return q.charCodeAt(10)===97?"-webkit-"+q+q:q;case 951:return q.charCodeAt(3)===116?"-webkit-"+q+q:q;case 963:return q.charCodeAt(5)===110?"-webkit-"+q+q:q;case 1009:if(q.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+q+q;case 978:return"-webkit-"+q+"-moz-"+q+q;case 1019:case 983:return"-webkit-"+q+"-moz-"+q+"-ms-"+q+q;case 883:if(q.charCodeAt(8)===45)return"-webkit-"+q+q;if(0<q.indexOf("image-set(",11))return q.replace(M,"$1-webkit-$2")+q;break;case 932:if(q.charCodeAt(4)===45)switch(q.charCodeAt(5)){case 103:return"-webkit-box-"+q.replace("-grow","")+"-webkit-"+q+"-ms-"+q.replace("grow","positive")+q;case 115:return"-webkit-"+q+"-ms-"+q.replace("shrink","negative")+q;case 98:return"-webkit-"+q+"-ms-"+q.replace("basis","preferred-size")+q}return"-webkit-"+q+"-ms-"+q+q;case 964:return"-webkit-"+q+"-ms-flex-"+q+q;case 1023:if(q.charCodeAt(8)!==99)break;return oe=q.substring(q.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+oe+"-webkit-"+q+"-ms-flex-pack"+oe+q;case 1005:return P.test(q)?q.replace(k,":-webkit-")+q.replace(k,":-moz-")+q:q;case 1e3:switch(oe=q.substring(13).trim(),Q=oe.indexOf("-")+1,oe.charCodeAt(0)+oe.charCodeAt(Q)){case 226:oe=q.replace($,"tb");break;case 232:oe=q.replace($,"tb-rl");break;case 220:oe=q.replace($,"lr");break;default:return q}return"-webkit-"+q+"-ms-"+oe+q;case 1017:if(q.indexOf("sticky",9)===-1)break;case 975:switch(Q=(q=K).length-10,oe=(q.charCodeAt(Q)===33?q.substring(0,Q):q).substring(K.indexOf(":",7)+1).trim(),De=oe.charCodeAt(0)+(oe.charCodeAt(7)|0)){case 203:if(111>oe.charCodeAt(8))break;case 115:q=q.replace(oe,"-webkit-"+oe)+";"+q;break;case 207:case 102:q=q.replace(oe,"-webkit-"+(102<De?"inline-":"")+"box")+";"+q.replace(oe,"-webkit-"+oe)+";"+q.replace(oe,"-ms-"+oe+"box")+";"+q}return q+";";case 938:if(q.charCodeAt(5)===45)switch(q.charCodeAt(6)){case 105:return oe=q.replace("-items",""),"-webkit-"+q+"-webkit-box-"+oe+"-ms-flex-"+oe+q;case 115:return"-webkit-"+q+"-ms-flex-item-"+q.replace(C,"")+q;default:return"-webkit-"+q+"-ms-flex-line-pack"+q.replace("align-content","").replace(C,"")+q}break;case 973:case 989:if(q.charCodeAt(3)!==45||q.charCodeAt(4)===122)break;case 931:case 953:if(D.test(K)===!0)return(oe=K.substring(K.indexOf(":")+1)).charCodeAt(0)===115?o(K.replace("stretch","fill-available"),Q,ie,Pe).replace(":fill-available",":stretch"):q.replace(oe,"-webkit-"+oe)+q.replace(oe,"-moz-"+oe.replace("fill-",""))+q;break;case 962:if(q="-webkit-"+q+(q.charCodeAt(5)===102?"-ms-"+q:"")+q,ie+Pe===211&&q.charCodeAt(13)===105&&0<q.indexOf("transform",10))return q.substring(0,q.indexOf(";",27)+1).replace(I,"$1-webkit-$2")+q}return q}function a(K,Q){var ie=K.indexOf(Q===1?":":"{"),Pe=K.substring(0,Q!==3?ie:10);return ie=K.substring(ie+1,K.length-1),ye(Q!==2?Pe:Pe.replace(x,"$1"),ie,Q)}function c(K,Q){var ie=o(Q,Q.charCodeAt(0),Q.charCodeAt(1),Q.charCodeAt(2));return ie!==Q+";"?ie.replace(b," or ($1)").substring(4):"("+Q+")"}function d(K,Q,ie,Pe,q,De,oe,ze,me,He){for(var Le=0,it=Q,Et;Le<J;++Le)switch(Et=ve[Le].call(v,K,it,ie,Pe,q,De,oe,ze,me,He)){case void 0:case!1:case!0:case null:break;default:it=Et}if(it!==Q)return it}function f(K){switch(K){case void 0:case null:J=ve.length=0;break;default:if(typeof K=="function")ve[J++]=K;else if(typeof K=="object")for(var Q=0,ie=K.length;Q<ie;++Q)f(K[Q]);else O=!!K|0}return f}function m(K){return K=K.prefix,K!==void 0&&(ye=null,K?typeof K!="function"?he=1:(he=2,ye=K):he=0),m}function v(K,Q){var ie=K;if(33>ie.charCodeAt(0)&&(ie=ie.trim()),H=ie,ie=[H],0<J){var Pe=d(-1,Q,ie,ie,A,U,0,0,0,0);Pe!==void 0&&typeof Pe=="string"&&(Q=Pe)}var q=e(ge,ie,Q,0,0);return 0<J&&(Pe=d(-2,q,ie,ie,A,U,q.length,0,0,0),Pe!==void 0&&(q=Pe)),H="",pe=0,U=A=1,q}var E=/^\0+/g,w=/[\0\r\f]/g,k=/: */g,P=/zoo|gra/,I=/([,: ])(transform)/g,S=/,\r+?/g,N=/([\t\r\n ])*\f?&/g,V=/@(k\w+)\s*(\S*)\s*/,j=/::(place)/g,ee=/:(read-only)/g,$=/[svh]\w+-[tblr]{2}/,fe=/\(\s*(.*)\s*\)/g,b=/([\s\S]*?);/g,C=/-self|flex-/g,x=/[^]*?(:[rp][el]a[\w-]+)[^]*/,D=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,U=1,A=1,pe=0,he=1,ge=[],ve=[],J=0,ye=null,O=0,H="";return v.use=f,v.set=m,n!==void 0&&m(n),v}var Ub={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function zb(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var $b=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,G_=zb(function(n){return $b.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Wf={exports:{}},It={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function Bb(){if(K_)return It;K_=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,m=n?Symbol.for("react.concurrent_mode"):60111,v=n?Symbol.for("react.forward_ref"):60112,E=n?Symbol.for("react.suspense"):60113,w=n?Symbol.for("react.suspense_list"):60120,k=n?Symbol.for("react.memo"):60115,P=n?Symbol.for("react.lazy"):60116,I=n?Symbol.for("react.block"):60121,S=n?Symbol.for("react.fundamental"):60117,N=n?Symbol.for("react.responder"):60118,V=n?Symbol.for("react.scope"):60119;function j($){if(typeof $=="object"&&$!==null){var fe=$.$$typeof;switch(fe){case e:switch($=$.type,$){case f:case m:case i:case a:case o:case E:return $;default:switch($=$&&$.$$typeof,$){case d:case v:case P:case k:case c:return $;default:return fe}}case t:return fe}}}function ee($){return j($)===m}return It.AsyncMode=f,It.ConcurrentMode=m,It.ContextConsumer=d,It.ContextProvider=c,It.Element=e,It.ForwardRef=v,It.Fragment=i,It.Lazy=P,It.Memo=k,It.Portal=t,It.Profiler=a,It.StrictMode=o,It.Suspense=E,It.isAsyncMode=function($){return ee($)||j($)===f},It.isConcurrentMode=ee,It.isContextConsumer=function($){return j($)===d},It.isContextProvider=function($){return j($)===c},It.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===e},It.isForwardRef=function($){return j($)===v},It.isFragment=function($){return j($)===i},It.isLazy=function($){return j($)===P},It.isMemo=function($){return j($)===k},It.isPortal=function($){return j($)===t},It.isProfiler=function($){return j($)===a},It.isStrictMode=function($){return j($)===o},It.isSuspense=function($){return j($)===E},It.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===i||$===m||$===a||$===o||$===E||$===w||typeof $=="object"&&$!==null&&($.$$typeof===P||$.$$typeof===k||$.$$typeof===c||$.$$typeof===d||$.$$typeof===v||$.$$typeof===S||$.$$typeof===N||$.$$typeof===V||$.$$typeof===I)},It.typeOf=j,It}var Q_;function Wb(){return Q_||(Q_=1,Wf.exports=Bb()),Wf.exports}var Hf,Y_;function Hb(){if(Y_)return Hf;Y_=1;var n=Wb(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=i,a[n.Memo]=o;function c(P){return n.isMemo(P)?o:a[P.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,w=Object.prototype;function k(P,I,S){if(typeof I!="string"){if(w){var N=E(I);N&&N!==w&&k(P,N,S)}var V=f(I);m&&(V=V.concat(m(I)));for(var j=c(P),ee=c(I),$=0;$<V.length;++$){var fe=V[$];if(!t[fe]&&!(S&&S[fe])&&!(ee&&ee[fe])&&!(j&&j[fe])){var b=v(I,fe);try{d(P,fe,b)}catch{}}}}return P}return Hf=k,Hf}var qb=Hb();const TS=Kl(qb);var Xr={};function nr(){return(nr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}var J_=function(n,e){for(var t=[n[0]],i=0,o=e.length;i<o;i+=1)t.push(e[i],n[i+1]);return t},kp=function(n){return n!==null&&typeof n=="object"&&(n.toString?n.toString():Object.prototype.toString.call(n))==="[object Object]"&&!SS.typeOf(n)},yh=Object.freeze([]),fs=Object.freeze({});function ka(n){return typeof n=="function"}function xp(n){return n.displayName||n.name||"Component"}function Kh(n){return n&&typeof n.styledComponentId=="string"}var Es=typeof process<"u"&&(Xr.REACT_APP_SC_ATTR||Xr.SC_ATTR)||"data-styled",Gb="5.3.6",jm=typeof window<"u"&&"HTMLElement"in window,Kb=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Xr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Xr.REACT_APP_SC_DISABLE_SPEEDY!==""?Xr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Xr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Xr.SC_DISABLE_SPEEDY!==void 0&&Xr.SC_DISABLE_SPEEDY!==""&&Xr.SC_DISABLE_SPEEDY!=="false"&&Xr.SC_DISABLE_SPEEDY),Qb={};function Mr(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+n+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var Yb=function(){function n(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=n.prototype;return e.indexOfGroup=function(t){for(var i=0,o=0;o<t;o++)i+=this.groupSizes[o];return i},e.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var o=this.groupSizes,a=o.length,c=a;t>=c;)(c<<=1)<0&&Mr(16,""+t);this.groupSizes=new Uint32Array(c),this.groupSizes.set(o),this.length=c;for(var d=a;d<c;d++)this.groupSizes[d]=0}for(var f=this.indexOfGroup(t+1),m=0,v=i.length;m<v;m++)this.tag.insertRule(f,i[m])&&(this.groupSizes[t]++,f++)},e.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],o=this.indexOfGroup(t),a=o+i;this.groupSizes[t]=0;for(var c=o;c<a;c++)this.tag.deleteRule(o)}},e.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var o=this.groupSizes[t],a=this.indexOfGroup(t),c=a+o,d=a;d<c;d++)i+=this.tag.getRule(d)+`/*!sc*/
`;return i},n}(),Kc=new Map,vh=new Map,zl=1,Lc=function(n){if(Kc.has(n))return Kc.get(n);for(;vh.has(zl);)zl++;var e=zl++;return Kc.set(n,e),vh.set(e,n),e},Jb=function(n){return vh.get(n)},Xb=function(n,e){e>=zl&&(zl=e+1),Kc.set(n,e),vh.set(e,n)},Zb="style["+Es+'][data-styled-version="5.3.6"]',eD=new RegExp("^"+Es+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),tD=function(n,e,t){for(var i,o=t.split(","),a=0,c=o.length;a<c;a++)(i=o[a])&&n.registerName(e,i)},nD=function(n,e){for(var t=(e.textContent||"").split(`/*!sc*/
`),i=[],o=0,a=t.length;o<a;o++){var c=t[o].trim();if(c){var d=c.match(eD);if(d){var f=0|parseInt(d[1],10),m=d[2];f!==0&&(Xb(m,f),tD(n,m,d[3]),n.getTag().insertRules(f,i)),i.length=0}else i.push(c)}}},bp=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},IS=function(n){var e=document.head,t=n||e,i=document.createElement("style"),o=function(d){for(var f=d.childNodes,m=f.length;m>=0;m--){var v=f[m];if(v&&v.nodeType===1&&v.hasAttribute(Es))return v}}(t),a=o!==void 0?o.nextSibling:null;i.setAttribute(Es,"active"),i.setAttribute("data-styled-version","5.3.6");var c=bp();return c&&i.setAttribute("nonce",c),t.insertBefore(i,a),i},rD=function(){function n(t){var i=this.element=IS(t);i.appendChild(document.createTextNode("")),this.sheet=function(o){if(o.sheet)return o.sheet;for(var a=document.styleSheets,c=0,d=a.length;c<d;c++){var f=a[c];if(f.ownerNode===o)return f}Mr(17)}(i),this.length=0}var e=n.prototype;return e.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var i=this.sheet.cssRules[t];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},n}(),iD=function(){function n(t){var i=this.element=IS(t);this.nodes=i.childNodes,this.length=0}var e=n.prototype;return e.insertRule=function(t,i){if(t<=this.length&&t>=0){var o=document.createTextNode(i),a=this.nodes[t];return this.element.insertBefore(o,a||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},n}(),sD=function(){function n(t){this.rules=[],this.length=0}var e=n.prototype;return e.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},n}(),X_=jm,oD={isServer:!jm,useCSSOMInjection:!Kb},xa=function(){function n(t,i,o){t===void 0&&(t=fs),i===void 0&&(i={}),this.options=nr({},oD,{},t),this.gs=i,this.names=new Map(o),this.server=!!t.isServer,!this.server&&jm&&X_&&(X_=!1,function(a){for(var c=document.querySelectorAll(Zb),d=0,f=c.length;d<f;d++){var m=c[d];m&&m.getAttribute(Es)!=="active"&&(nD(a,m),m.parentNode&&m.parentNode.removeChild(m))}}(this))}n.registerId=function(t){return Lc(t)};var e=n.prototype;return e.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new n(nr({},this.options,{},t),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(o=(i=this.options).isServer,a=i.useCSSOMInjection,c=i.target,t=o?new sD(c):a?new rD(c):new iD(c),new Yb(t)));var t,i,o,a,c},e.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.registerName=function(t,i){if(Lc(t),this.names.has(t))this.names.get(t).add(i);else{var o=new Set;o.add(i),this.names.set(t,o)}},e.insertRules=function(t,i,o){this.registerName(t,i),this.getTag().insertRules(Lc(t),o)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(Lc(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var i=t.getTag(),o=i.length,a="",c=0;c<o;c++){var d=Jb(c);if(d!==void 0){var f=t.names.get(d),m=i.getGroup(c);if(f&&m&&f.size){var v=Es+".g"+c+'[id="'+d+'"]',E="";f!==void 0&&f.forEach(function(w){w.length>0&&(E+=w+",")}),a+=""+m+v+'{content:"'+E+`"}/*!sc*/
`}}}return a}(this)},n}(),aD=/(a)(d)/gi,Z_=function(n){return String.fromCharCode(n+(n>25?39:97))};function Dp(n){var e,t="";for(e=Math.abs(n);e>52;e=e/52|0)t=Z_(e%52)+t;return(Z_(e%52)+t).replace(aD,"$1-$2")}var ha=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},CS=function(n){return ha(5381,n)};function PS(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(ka(t)&&!Kh(t))return!1}return!0}var lD=CS("5.3.6"),uD=function(){function n(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&PS(e),this.componentId=t,this.baseHash=ha(lD,t),this.baseStyle=i,xa.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,i){var o=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(o,this.staticRulesId))a.push(this.staticRulesId);else{var c=lo(this.rules,e,t,i).join(""),d=Dp(ha(this.baseHash,c)>>>0);if(!t.hasNameForId(o,d)){var f=i(c,"."+d,void 0,o);t.insertRules(o,d,f)}a.push(d),this.staticRulesId=d}else{for(var m=this.rules.length,v=ha(this.baseHash,i.hash),E="",w=0;w<m;w++){var k=this.rules[w];if(typeof k=="string")E+=k;else if(k){var P=lo(k,e,t,i),I=Array.isArray(P)?P.join(""):P;v=ha(v,I+w),E+=I}}if(E){var S=Dp(v>>>0);if(!t.hasNameForId(o,S)){var N=i(E,"."+S,void 0,o);t.insertRules(o,S,N)}a.push(S)}}return a.join(" ")},n}(),cD=/^\s*\/\/.*$/gm,hD=[":","[",".","#"];function AS(n){var e,t,i,o,a=n===void 0?fs:n,c=a.options,d=c===void 0?fs:c,f=a.plugins,m=f===void 0?yh:f,v=new jb(d),E=[],w=function(I){function S(N){if(N)try{I(N+"}")}catch{}}return function(N,V,j,ee,$,fe,b,C,x,D){switch(N){case 1:if(x===0&&V.charCodeAt(0)===64)return I(V+";"),"";break;case 2:if(C===0)return V+"/*|*/";break;case 3:switch(C){case 102:case 112:return I(j[0]+V),"";default:return V+(D===0?"/*|*/":"")}case-2:V.split("/*|*/}").forEach(S)}}}(function(I){E.push(I)}),k=function(I,S,N){return S===0&&hD.indexOf(N[t.length])!==-1||N.match(o)?I:"."+e};function P(I,S,N,V){V===void 0&&(V="&");var j=I.replace(cD,""),ee=S&&N?N+" "+S+" { "+j+" }":j;return e=V,t=S,i=new RegExp("\\"+t+"\\b","g"),o=new RegExp("(\\"+t+"\\b){2,}"),v(N||!S?"":S,ee)}return v.use([].concat(m,[function(I,S,N){I===2&&N.length&&N[0].lastIndexOf(t)>0&&(N[0]=N[0].replace(i,k))},w,function(I){if(I===-2){var S=E;return E=[],S}}])),P.hash=m.length?m.reduce(function(I,S){return S.name||Mr(15),ha(I,S.name)},5381).toString():"",P}var Qh=rr.createContext(),dD=Qh.Consumer,Um=rr.createContext(),RS=(Um.Consumer,new xa),Op=AS();function zm(){return G.useContext(Qh)||RS}function kS(){return G.useContext(Um)||Op}function xS(n){var e=G.useState(n.stylisPlugins),t=e[0],i=e[1],o=zm(),a=G.useMemo(function(){var d=o;return n.sheet?d=n.sheet:n.target&&(d=d.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(d=d.reconstructWithOptions({useCSSOMInjection:!1})),d},[n.disableCSSOMInjection,n.sheet,n.target]),c=G.useMemo(function(){return AS({options:{prefix:!n.disableVendorPrefixes},plugins:t})},[n.disableVendorPrefixes,t]);return G.useEffect(function(){Fb(t,n.stylisPlugins)||i(n.stylisPlugins)},[n.stylisPlugins]),rr.createElement(Qh.Provider,{value:a},rr.createElement(Um.Provider,{value:c},n.children))}var bS=function(){function n(e,t){var i=this;this.inject=function(o,a){a===void 0&&(a=Op);var c=i.name+a.hash;o.hasNameForId(i.id,c)||o.insertRules(i.id,c,a(i.rules,c,"@keyframes"))},this.toString=function(){return Mr(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return n.prototype.getName=function(e){return e===void 0&&(e=Op),this.name+e.hash},n}(),fD=/([A-Z])/,pD=/([A-Z])/g,mD=/^ms-/,gD=function(n){return"-"+n.toLowerCase()};function ew(n){return fD.test(n)?n.replace(pD,gD).replace(mD,"-ms-"):n}var tw=function(n){return n==null||n===!1||n===""};function lo(n,e,t,i){if(Array.isArray(n)){for(var o,a=[],c=0,d=n.length;c<d;c+=1)(o=lo(n[c],e,t,i))!==""&&(Array.isArray(o)?a.push.apply(a,o):a.push(o));return a}if(tw(n))return"";if(Kh(n))return"."+n.styledComponentId;if(ka(n)){if(typeof(m=n)!="function"||m.prototype&&m.prototype.isReactComponent||!e)return n;var f=n(e);return lo(f,e,t,i)}var m;return n instanceof bS?t?(n.inject(t,i),n.getName(i)):n:kp(n)?function v(E,w){var k,P,I=[];for(var S in E)E.hasOwnProperty(S)&&!tw(E[S])&&(Array.isArray(E[S])&&E[S].isCss||ka(E[S])?I.push(ew(S)+":",E[S],";"):kp(E[S])?I.push.apply(I,v(E[S],S)):I.push(ew(S)+": "+(k=S,(P=E[S])==null||typeof P=="boolean"||P===""?"":typeof P!="number"||P===0||k in Ub?String(P).trim():P+"px")+";"));return w?[w+" {"].concat(I,["}"]):I}(n):n.toString()}var nw=function(n){return Array.isArray(n)&&(n.isCss=!0),n};function Yh(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return ka(n)||kp(n)?nw(lo(J_(yh,[n].concat(t)))):t.length===0&&n.length===1&&typeof n[0]=="string"?n:nw(lo(J_(n,t)))}var $m=function(n,e,t){return t===void 0&&(t=fs),n.theme!==t.theme&&n.theme||e||t.theme},yD=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,vD=/(^-|-$)/g;function qf(n){return n.replace(yD,"-").replace(vD,"")}var Bm=function(n){return Dp(CS(n)>>>0)};function Mc(n){return typeof n=="string"&&!0}var Np=function(n){return typeof n=="function"||typeof n=="object"&&n!==null&&!Array.isArray(n)},_D=function(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"};function wD(n,e,t){var i=n[t];Np(e)&&Np(i)?DS(i,e):n[t]=e}function DS(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var o=0,a=t;o<a.length;o++){var c=a[o];if(Np(c))for(var d in c)_D(d)&&wD(n,c[d],d)}return n}var Ss=rr.createContext(),ED=Ss.Consumer;function SD(n){var e=G.useContext(Ss),t=G.useMemo(function(){return function(i,o){if(!i)return Mr(14);if(ka(i)){var a=i(o);return a}return Array.isArray(i)||typeof i!="object"?Mr(8):o?nr({},o,{},i):i}(n.theme,e)},[n.theme,e]);return n.children?rr.createElement(Ss.Provider,{value:t},n.children):null}var Gf={};function OS(n,e,t){var i=Kh(n),o=!Mc(n),a=e.attrs,c=a===void 0?yh:a,d=e.componentId,f=d===void 0?function(V,j){var ee=typeof V!="string"?"sc":qf(V);Gf[ee]=(Gf[ee]||0)+1;var $=ee+"-"+Bm("5.3.6"+ee+Gf[ee]);return j?j+"-"+$:$}(e.displayName,e.parentComponentId):d,m=e.displayName,v=m===void 0?function(V){return Mc(V)?"styled."+V:"Styled("+xp(V)+")"}(n):m,E=e.displayName&&e.componentId?qf(e.displayName)+"-"+e.componentId:e.componentId||f,w=i&&n.attrs?Array.prototype.concat(n.attrs,c).filter(Boolean):c,k=e.shouldForwardProp;i&&n.shouldForwardProp&&(k=e.shouldForwardProp?function(V,j,ee){return n.shouldForwardProp(V,j,ee)&&e.shouldForwardProp(V,j,ee)}:n.shouldForwardProp);var P,I=new uD(t,E,i?n.componentStyle:void 0),S=I.isStatic&&c.length===0,N=function(V,j){return function(ee,$,fe,b){var C=ee.attrs,x=ee.componentStyle,D=ee.defaultProps,M=ee.foldedComponentIds,U=ee.shouldForwardProp,A=ee.styledComponentId,pe=ee.target,he=function(Pe,q,De){Pe===void 0&&(Pe=fs);var oe=nr({},q,{theme:Pe}),ze={};return De.forEach(function(me){var He,Le,it,Et=me;for(He in ka(Et)&&(Et=Et(oe)),Et)oe[He]=ze[He]=He==="className"?(Le=ze[He],it=Et[He],Le&&it?Le+" "+it:Le||it):Et[He]}),[oe,ze]}($m($,G.useContext(Ss),D)||fs,$,C),ge=he[0],ve=he[1],J=function(Pe,q,De,oe){var ze=zm(),me=kS(),He=q?Pe.generateAndInjectStyles(fs,ze,me):Pe.generateAndInjectStyles(De,ze,me);return He}(x,b,ge),ye=fe,O=ve.$as||$.$as||ve.as||$.as||pe,H=Mc(O),K=ve!==$?nr({},$,{},ve):$,Q={};for(var ie in K)ie[0]!=="$"&&ie!=="as"&&(ie==="forwardedAs"?Q.as=K[ie]:(U?U(ie,G_,O):!H||G_(ie))&&(Q[ie]=K[ie]));return $.style&&ve.style!==$.style&&(Q.style=nr({},$.style,{},ve.style)),Q.className=Array.prototype.concat(M,A,J!==A?J:null,$.className,ve.className).filter(Boolean).join(" "),Q.ref=ye,G.createElement(O,Q)}(P,V,j,S)};return N.displayName=v,(P=rr.forwardRef(N)).attrs=w,P.componentStyle=I,P.displayName=v,P.shouldForwardProp=k,P.foldedComponentIds=i?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):yh,P.styledComponentId=E,P.target=i?n.target:n,P.withComponent=function(V){var j=e.componentId,ee=function(fe,b){if(fe==null)return{};var C,x,D={},M=Object.keys(fe);for(x=0;x<M.length;x++)C=M[x],b.indexOf(C)>=0||(D[C]=fe[C]);return D}(e,["componentId"]),$=j&&j+"-"+(Mc(V)?V:qf(xp(V)));return OS(V,nr({},ee,{attrs:w,componentId:$}),t)},Object.defineProperty(P,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(V){this._foldedDefaultProps=i?DS({},n.defaultProps,V):V}}),P.toString=function(){return"."+P.styledComponentId},o&&TS(P,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),P}var Lp=function(n){return function e(t,i,o){if(o===void 0&&(o=fs),!SS.isValidElementType(i))return Mr(1,String(i));var a=function(){return t(i,o,Yh.apply(void 0,arguments))};return a.withConfig=function(c){return e(t,i,nr({},o,{},c))},a.attrs=function(c){return e(t,i,nr({},o,{attrs:Array.prototype.concat(o.attrs,c).filter(Boolean)}))},a}(OS,n)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(n){Lp[n]=Lp(n)});var TD=function(){function n(t,i){this.rules=t,this.componentId=i,this.isStatic=PS(t),xa.registerId(this.componentId+1)}var e=n.prototype;return e.createStyles=function(t,i,o,a){var c=a(lo(this.rules,i,o,a).join(""),""),d=this.componentId+t;o.insertRules(d,d,c)},e.removeStyles=function(t,i){i.clearRules(this.componentId+t)},e.renderStyles=function(t,i,o,a){t>2&&xa.registerId(this.componentId+t),this.removeStyles(t,o),this.createStyles(t,i,o,a)},n}();function ID(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var o=Yh.apply(void 0,[n].concat(t)),a="sc-global-"+Bm(JSON.stringify(o)),c=new TD(o,a);function d(m){var v=zm(),E=kS(),w=G.useContext(Ss),k=G.useRef(v.allocateGSInstance(a)).current;return v.server&&f(k,m,v,w,E),G.useLayoutEffect(function(){if(!v.server)return f(k,m,v,w,E),function(){return c.removeStyles(k,v)}},[k,m,v,w,E]),null}function f(m,v,E,w,k){if(c.isStatic)c.renderStyles(m,Qb,E,k);else{var P=nr({},v,{theme:$m(v,w,d.defaultProps)});c.renderStyles(m,P,E,k)}}return rr.memo(d)}function CD(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var o=Yh.apply(void 0,[n].concat(t)).join(""),a=Bm(o);return new bS(a,o)}var PD=function(){function n(){var t=this;this._emitSheetCSS=function(){var i=t.instance.toString();if(!i)return"";var o=bp();return"<style "+[o&&'nonce="'+o+'"',Es+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+i+"</style>"},this.getStyleTags=function(){return t.sealed?Mr(2):t._emitSheetCSS()},this.getStyleElement=function(){var i;if(t.sealed)return Mr(2);var o=((i={})[Es]="",i["data-styled-version"]="5.3.6",i.dangerouslySetInnerHTML={__html:t.instance.toString()},i),a=bp();return a&&(o.nonce=a),[rr.createElement("style",nr({},o,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new xa({isServer:!0}),this.sealed=!1}var e=n.prototype;return e.collectStyles=function(t){return this.sealed?Mr(2):rr.createElement(xS,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return Mr(3)},n}(),AD=function(n){var e=rr.forwardRef(function(t,i){var o=G.useContext(Ss),a=n.defaultProps,c=$m(t,o,a);return rr.createElement(n,nr({},t,{theme:c,ref:i}))});return TS(e,n),e.displayName="WithTheme("+xp(n)+")",e},RD=function(){return G.useContext(Ss)},kD={StyleSheet:xa,masterSheet:RS};const xD=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:PD,StyleSheetConsumer:dD,StyleSheetContext:Qh,StyleSheetManager:xS,ThemeConsumer:ED,ThemeContext:Ss,ThemeProvider:SD,__PRIVATE__:kD,createGlobalStyle:ID,css:Yh,default:Lp,isStyledComponent:Kh,keyframes:CD,useTheme:RD,version:Gb,withTheme:AD},Symbol.toStringTag,{value:"Module"})),za=BT(xD);var ra={},Kf={exports:{}},Qf,rw;function bD(){if(rw)return Qf;rw=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Qf=n,Qf}var Yf,iw;function DD(){if(iw)return Yf;iw=1;var n=bD();function e(){}function t(){}return t.resetWarningCache=e,Yf=function(){function i(c,d,f,m,v,E){if(E!==n){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}i.isRequired=i;function o(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Yf}var sw;function vo(){return sw||(sw=1,Kf.exports=DD()()),Kf.exports}var yi={},ow;function $a(){if(ow)return yi;ow=1;var n=yi&&yi.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yi,"__esModule",{value:!0}),yi.CrosswordSizeContext=yi.CrosswordContext=void 0;const e=n(Ur());function t(){}return yi.CrosswordContext=e.default.createContext({rows:0,cols:0,gridData:[],handleInputKeyDown:t,handleInputChange:t,handleCellClick:t,handleInputClick:t,handleClueSelected:t,registerFocusHandler:t,focused:!1,selectedPosition:{row:0,col:0},selectedDirection:"across",selectedNumber:"",crosswordCorrect:!1}),yi.CrosswordSizeContext=e.default.createContext({cellSize:0,cellPadding:0,cellInner:0,cellHalf:0,fontSize:0}),yi}var aw;function NS(){if(aw)return ra;aw=1;var n=ra&&ra.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ra,"__esModule",{value:!0});const e=uo(),t=Ur(),i=n(vo()),o=za,a=$a(),c={cellData:i.default.shape({row:i.default.number.isRequired,col:i.default.number.isRequired,guess:i.default.string,number:i.default.string,answer:i.default.string}).isRequired,focus:i.default.bool,highlight:i.default.bool,onClick:i.default.func};function d({cellData:f,onClick:m,focus:v,highlight:E}){const{cellSize:w,cellPadding:k,cellInner:P,cellHalf:I,fontSize:S}=(0,t.useContext)(a.CrosswordSizeContext),{cellBackground:N,cellBorder:V,textColor:j,numberColor:ee,focusBackground:$,highlightBackground:fe}=(0,t.useContext)(o.ThemeContext),b=(0,t.useCallback)(he=>{he.preventDefault(),m&&m(f)},[f,m]),{row:C,col:x,guess:D,number:M,answer:U}=f,A=x*w,pe=C*w;return(0,e.jsxs)("g",Object.assign({onClick:b,style:{cursor:"default",fontSize:`${S}px`},className:"clue-cell"},{children:[(0,e.jsx)("rect",{x:A+k,y:pe+k,width:P,height:P,fill:v?$:E?fe:N,stroke:V,strokeWidth:w/50}),M&&(0,e.jsx)("text",Object.assign({x:A+k*4,y:pe+k*4,textAnchor:"start",dominantBaseline:"hanging",style:{fontSize:"50%",fill:ee}},{children:M})),(0,e.jsx)("text",Object.assign({x:A+I,y:pe+I+1,textAnchor:"middle",dominantBaseline:"middle",style:{fill:j},className:U===D?"guess-text-correct":"guess-text-incorrect"},{children:D}))]}))}return ra.default=d,d.propTypes=c,d.defaultProps={focus:!1,highlight:!1,onClick:null},ra}var $n={},lw;function LS(){if(lw)return $n;lw=1;var n=$n&&$n.__createBinding||(Object.create?function(w,k,P,I){I===void 0&&(I=P);var S=Object.getOwnPropertyDescriptor(k,P);(!S||("get"in S?!k.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return k[P]}}),Object.defineProperty(w,I,S)}:function(w,k,P,I){I===void 0&&(I=P),w[I]=k[P]}),e=$n&&$n.__setModuleDefault||(Object.create?function(w,k){Object.defineProperty(w,"default",{enumerable:!0,value:k})}:function(w,k){w.default=k}),t=$n&&$n.__importStar||function(w){if(w&&w.__esModule)return w;var k={};if(w!=null)for(var P in w)P!=="default"&&Object.prototype.hasOwnProperty.call(w,P)&&n(k,w,P);return e(k,w),k},i=$n&&$n.__rest||function(w,k){var P={};for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&k.indexOf(I)<0&&(P[I]=w[I]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,I=Object.getOwnPropertySymbols(w);S<I.length;S++)k.indexOf(I[S])<0&&Object.prototype.propertyIsEnumerable.call(w,I[S])&&(P[I[S]]=w[I[S]]);return P},o=$n&&$n.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty($n,"__esModule",{value:!0});const a=uo(),c=Ur(),d=o(vo()),f=t(za),m=$a(),v=f.default.div.attrs(w=>({className:`clue${w.complete?w.correct?" correct":" incorrect":""}`}))`
  cursor: default;
  background-color: ${w=>w.highlight?w.highlightBackground:"transparent"};
`;function E(w){var{direction:k,number:P,children:I,complete:S,correct:N}=w,V=i(w,["direction","number","children","complete","correct"]);const{highlightBackground:j}=(0,c.useContext)(f.ThemeContext),{focused:ee,selectedDirection:$,selectedNumber:fe,handleClueSelected:b}=(0,c.useContext)(m.CrosswordContext),C=(0,c.useCallback)(x=>{x.preventDefault(),b(k,P)},[k,P,b]);return(0,a.jsxs)(v,Object.assign({highlightBackground:j,highlight:ee&&k===$&&P===fe,complete:S,correct:N},V,{onClick:C,"aria-label":`clue-${P}-${k}`},{children:[P,": ",I]}))}return $n.default=E,E.propTypes={direction:d.default.string.isRequired,number:d.default.string.isRequired,children:d.default.node.isRequired,complete:d.default.bool,correct:d.default.bool},E.defaultProps={complete:void 0,correct:void 0},$n}var ia={},uw;function MS(){if(uw)return ia;uw=1;var n=ia&&ia.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ia,"__esModule",{value:!0});const e=uo(),t=Ur(),i=n(vo()),o=$a(),a=n(LS()),c={direction:i.default.string.isRequired,label:i.default.string};function d({direction:f,label:m}){const{clues:v}=(0,t.useContext)(o.CrosswordContext);return(0,e.jsxs)("div",Object.assign({className:"direction"},{children:[(0,e.jsx)("h3",Object.assign({className:"header"},{children:m||f.toUpperCase()})),v==null?void 0:v[f].map(({number:E,clue:w,complete:k,correct:P})=>(0,e.jsx)(a.default,Object.assign({direction:f,number:E,complete:k,correct:P},{children:w}),E))]}))}return ia.default=d,d.propTypes=c,d.defaultProps={label:void 0},ia}var Bn={},Or={},Jf={exports:{}},Ot={},cw;function OD(){if(cw)return Ot;cw=1;function n(L){for(var W=arguments.length,le=Array(W>1?W-1:0),re=1;re<W;re++)le[re-1]=arguments[re];throw Error("[Immer] minified error nr: "+L+(le.length?" "+le.map(function(Ie){return"'"+Ie+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function e(L){return!!L&&!!L[me]}function t(L){var W;return!!L&&(function(le){if(!le||typeof le!="object")return!1;var re=Object.getPrototypeOf(le);if(re===null)return!0;var Ie=Object.hasOwnProperty.call(re,"constructor")&&re.constructor;return Ie===Object||typeof Ie=="function"&&Function.toString.call(Ie)===Le}(L)||Array.isArray(L)||!!L[ze]||!!(!((W=L.constructor)===null||W===void 0)&&W[ze])||m(L)||v(L))}function i(L,W,le){le===void 0&&(le=!1),o(L)===0?(le?Object.keys:it)(L).forEach(function(re){le&&typeof re=="symbol"||W(re,L[re],L)}):L.forEach(function(re,Ie){return W(Ie,re,L)})}function o(L){var W=L[me];return W?W.t>3?W.t-4:W.t:Array.isArray(L)?1:m(L)?2:v(L)?3:0}function a(L,W){return o(L)===2?L.has(W):Object.prototype.hasOwnProperty.call(L,W)}function c(L,W){return o(L)===2?L.get(W):L[W]}function d(L,W,le){var re=o(L);re===2?L.set(W,le):re===3?L.add(le):L[W]=le}function f(L,W){return L===W?L!==0||1/L==1/W:L!=L&&W!=W}function m(L){return Pe&&L instanceof Map}function v(L){return q&&L instanceof Set}function E(L){return L.i||L.u}function w(L){if(Array.isArray(L))return Array.prototype.slice.call(L);var W=Et(L);delete W[me];for(var le=it(W),re=0;re<le.length;re++){var Ie=le[re],ke=W[Ie];ke.writable===!1&&(ke.writable=!0,ke.configurable=!0),(ke.get||ke.set)&&(W[Ie]={configurable:!0,writable:!0,enumerable:ke.enumerable,value:L[Ie]})}return Object.create(Object.getPrototypeOf(L),W)}function k(L,W){return W===void 0&&(W=!1),I(L)||e(L)||!t(L)||(o(L)>1&&(L.set=L.add=L.clear=L.delete=P),Object.freeze(L),W&&i(L,function(le,re){return k(re,!0)},!0)),L}function P(){n(2)}function I(L){return L==null||typeof L!="object"||Object.isFrozen(L)}function S(L){var W=Je[L];return W||n(18,L),W}function N(L,W){Je[L]||(Je[L]=W)}function V(){return Q}function j(L,W){W&&(S("Patches"),L.o=[],L.v=[],L.s=W)}function ee(L){$(L),L.p.forEach(b),L.p=null}function $(L){L===Q&&(Q=L.l)}function fe(L){return Q={p:[],l:Q,h:L,_:!0,m:0}}function b(L){var W=L[me];W.t===0||W.t===1?W.j():W.O=!0}function C(L,W){W.m=W.p.length;var le=W.p[0],re=L!==void 0&&L!==le;return W.h.S||S("ES5").P(W,L,re),re?(le[me].g&&(ee(W),n(4)),t(L)&&(L=x(W,L),W.l||M(W,L)),W.o&&S("Patches").M(le[me].u,L,W.o,W.v)):L=x(W,le,[]),ee(W),W.o&&W.s(W.o,W.v),L!==oe?L:void 0}function x(L,W,le){if(I(W))return W;var re=W[me];if(!re)return i(W,function(Se,Te){return D(L,re,W,Se,Te,le)},!0),W;if(re.A!==L)return W;if(!re.g)return M(L,re.u,!0),re.u;if(!re.R){re.R=!0,re.A.m--;var Ie=re.t===4||re.t===5?re.i=w(re.k):re.i,ke=Ie,Me=!1;re.t===3&&(ke=new Set(Ie),Ie.clear(),Me=!0),i(ke,function(Se,Te){return D(L,re,Ie,Se,Te,le,Me)}),M(L,Ie,!1),le&&L.o&&S("Patches").F(re,le,L.o,L.v)}return re.i}function D(L,W,le,re,Ie,ke,Me){if(e(Ie)){var Se=x(L,Ie,ke&&W&&W.t!==3&&!a(W.N,re)?ke.concat(re):void 0);if(d(le,re,Se),!e(Se))return;L._=!1}else Me&&le.add(Ie);if(t(Ie)&&!I(Ie)){if(!L.h.D&&L.m<1)return;x(L,Ie),W&&W.A.l||M(L,Ie)}}function M(L,W,le){le===void 0&&(le=!1),!L.l&&L.h.D&&L._&&k(W,le)}function U(L,W){var le=L[me];return(le?E(le):L)[W]}function A(L,W){if(W in L)for(var le=Object.getPrototypeOf(L);le;){var re=Object.getOwnPropertyDescriptor(le,W);if(re)return re;le=Object.getPrototypeOf(le)}}function pe(L){L.g||(L.g=!0,L.l&&pe(L.l))}function he(L){L.i||(L.i=w(L.u))}function ge(L,W,le){var re=m(W)?S("MapSet").K(W,le):v(W)?S("MapSet").$(W,le):L.S?function(Ie,ke){var Me=Array.isArray(Ie),Se={t:Me?1:0,A:ke?ke.A:V(),g:!1,R:!1,N:{},l:ke,u:Ie,k:null,i:null,j:null,C:!1},Te=Se,ue=ft;Me&&(Te=[Se],ue=nt);var ce=Proxy.revocable(Te,ue),be=ce.revoke,ne=ce.proxy;return Se.k=ne,Se.j=be,ne}(W,le):S("ES5").I(W,le);return(le?le.A:V()).p.push(re),re}function ve(L){return e(L)||n(22,L),function W(le){if(!t(le))return le;var re,Ie=le[me],ke=o(le);if(Ie){if(!Ie.g&&(Ie.t<4||!S("ES5").J(Ie)))return Ie.u;Ie.R=!0,re=J(le,ke),Ie.R=!1}else re=J(le,ke);return i(re,function(Me,Se){Ie&&c(Ie.u,Me)===Se||d(re,Me,W(Se))}),ke===3?new Set(re):re}(L)}function J(L,W){switch(W){case 2:return new Map(L);case 3:return Array.from(L)}return w(L)}function ye(){function L(ke,Me){var Se=Ie[ke];return Se?Se.enumerable=Me:Ie[ke]=Se={configurable:!0,enumerable:Me,get:function(){return ft.get(this[me],ke)},set:function(Te){ft.set(this[me],ke,Te)}},Se}function W(ke){for(var Me=ke.length-1;Me>=0;Me--){var Se=ke[Me][me];if(!Se.g)switch(Se.t){case 5:re(Se)&&pe(Se);break;case 4:le(Se)&&pe(Se)}}}function le(ke){for(var Me=ke.u,Se=ke.k,Te=it(Se),ue=Te.length-1;ue>=0;ue--){var ce=Te[ue];if(ce!==me){var be=Me[ce];if(be===void 0&&!a(Me,ce))return!0;var ne=Se[ce],de=ne&&ne[me];if(de?de.u!==be:!f(ne,be))return!0}}var we=!!Me[me];return Te.length!==it(Me).length+(we?0:1)}function re(ke){var Me=ke.k;if(Me.length!==ke.u.length)return!0;var Se=Object.getOwnPropertyDescriptor(Me,Me.length-1);if(Se&&!Se.get)return!0;for(var Te=0;Te<Me.length;Te++)if(!Me.hasOwnProperty(Te))return!0;return!1}var Ie={};N("ES5",{I:function(ke,Me){var Se=Array.isArray(ke),Te=function(ce,be){if(ce){for(var ne=Array(be.length),de=0;de<be.length;de++)Object.defineProperty(ne,""+de,L(de,!0));return ne}var we=Et(be);delete we[me];for(var Oe=it(we),Ke=0;Ke<Oe.length;Ke++){var Xe=Oe[Ke];we[Xe]=L(Xe,ce||!!we[Xe].enumerable)}return Object.create(Object.getPrototypeOf(be),we)}(Se,ke),ue={t:Se?5:4,A:Me?Me.A:V(),g:!1,R:!1,N:{},l:Me,u:ke,k:Te,i:null,O:!1,C:!1};return Object.defineProperty(Te,me,{value:ue,writable:!0}),Te},P:function(ke,Me,Se){Se?e(Me)&&Me[me].A===ke&&W(ke.p):(ke.o&&function Te(ue){if(ue&&typeof ue=="object"){var ce=ue[me];if(ce){var be=ce.u,ne=ce.k,de=ce.N,we=ce.t;if(we===4)i(ne,function(_t){_t!==me&&(be[_t]!==void 0||a(be,_t)?de[_t]||Te(ne[_t]):(de[_t]=!0,pe(ce)))}),i(be,function(_t){ne[_t]!==void 0||a(ne,_t)||(de[_t]=!1,pe(ce))});else if(we===5){if(re(ce)&&(pe(ce),de.length=!0),ne.length<be.length)for(var Oe=ne.length;Oe<be.length;Oe++)de[Oe]=!1;else for(var Ke=be.length;Ke<ne.length;Ke++)de[Ke]=!0;for(var Xe=Math.min(ne.length,be.length),mt=0;mt<Xe;mt++)ne.hasOwnProperty(mt)||(de[mt]=!0),de[mt]===void 0&&Te(ne[mt])}}}}(ke.p[0]),W(ke.p))},J:function(ke){return ke.t===4?le(ke):re(ke)}})}function O(){function L(re){if(!t(re))return re;if(Array.isArray(re))return re.map(L);if(m(re))return new Map(Array.from(re.entries()).map(function(Me){return[Me[0],L(Me[1])]}));if(v(re))return new Set(Array.from(re).map(L));var Ie=Object.create(Object.getPrototypeOf(re));for(var ke in re)Ie[ke]=L(re[ke]);return a(re,ze)&&(Ie[ze]=re[ze]),Ie}function W(re){return e(re)?L(re):re}var le="add";N("Patches",{W:function(re,Ie){return Ie.forEach(function(ke){for(var Me=ke.path,Se=ke.op,Te=re,ue=0;ue<Me.length-1;ue++){var ce=o(Te),be=Me[ue];typeof be!="string"&&typeof be!="number"&&(be=""+be),ce!==0&&ce!==1||be!=="__proto__"&&be!=="constructor"||n(24),typeof Te=="function"&&be==="prototype"&&n(24),typeof(Te=c(Te,be))!="object"&&n(15,Me.join("/"))}var ne=o(Te),de=L(ke.value),we=Me[Me.length-1];switch(Se){case"replace":switch(ne){case 2:return Te.set(we,de);case 3:n(16);default:return Te[we]=de}case le:switch(ne){case 1:return we==="-"?Te.push(de):Te.splice(we,0,de);case 2:return Te.set(we,de);case 3:return Te.add(de);default:return Te[we]=de}case"remove":switch(ne){case 1:return Te.splice(we,1);case 2:return Te.delete(we);case 3:return Te.delete(ke.value);default:return delete Te[we]}default:n(17,Se)}}),re},F:function(re,Ie,ke,Me){switch(re.t){case 0:case 4:case 2:return function(Se,Te,ue,ce){var be=Se.u,ne=Se.i;i(Se.N,function(de,we){var Oe=c(be,de),Ke=c(ne,de),Xe=we?a(be,de)?"replace":le:"remove";if(Oe!==Ke||Xe!=="replace"){var mt=Te.concat(de);ue.push(Xe==="remove"?{op:Xe,path:mt}:{op:Xe,path:mt,value:Ke}),ce.push(Xe===le?{op:"remove",path:mt}:Xe==="remove"?{op:le,path:mt,value:W(Oe)}:{op:"replace",path:mt,value:W(Oe)})}})}(re,Ie,ke,Me);case 5:case 1:return function(Se,Te,ue,ce){var be=Se.u,ne=Se.N,de=Se.i;if(de.length<be.length){var we=[de,be];be=we[0],de=we[1];var Oe=[ce,ue];ue=Oe[0],ce=Oe[1]}for(var Ke=0;Ke<be.length;Ke++)if(ne[Ke]&&de[Ke]!==be[Ke]){var Xe=Te.concat([Ke]);ue.push({op:"replace",path:Xe,value:W(de[Ke])}),ce.push({op:"replace",path:Xe,value:W(be[Ke])})}for(var mt=be.length;mt<de.length;mt++){var _t=Te.concat([mt]);ue.push({op:le,path:_t,value:W(de[mt])})}be.length<de.length&&ce.push({op:"replace",path:Te.concat(["length"]),value:be.length})}(re,Ie,ke,Me);case 3:return function(Se,Te,ue,ce){var be=Se.u,ne=Se.i,de=0;be.forEach(function(we){if(!ne.has(we)){var Oe=Te.concat([de]);ue.push({op:"remove",path:Oe,value:we}),ce.unshift({op:le,path:Oe,value:we})}de++}),de=0,ne.forEach(function(we){if(!be.has(we)){var Oe=Te.concat([de]);ue.push({op:le,path:Oe,value:we}),ce.unshift({op:"remove",path:Oe,value:we})}de++})}(re,Ie,ke,Me)}},M:function(re,Ie,ke,Me){ke.push({op:"replace",path:[],value:Ie===oe?void 0:Ie}),Me.push({op:"replace",path:[],value:re})}})}function H(){function L(Se,Te){function ue(){this.constructor=Se}Ie(Se,Te),Se.prototype=(ue.prototype=Te.prototype,new ue)}function W(Se){Se.i||(Se.N=new Map,Se.i=new Map(Se.u))}function le(Se){Se.i||(Se.i=new Set,Se.u.forEach(function(Te){if(t(Te)){var ue=ge(Se.A.h,Te,Se);Se.p.set(Te,ue),Se.i.add(ue)}else Se.i.add(Te)}))}function re(Se){Se.O&&n(3,JSON.stringify(E(Se)))}var Ie=function(Se,Te){return(Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,ce){ue.__proto__=ce}||function(ue,ce){for(var be in ce)ce.hasOwnProperty(be)&&(ue[be]=ce[be])})(Se,Te)},ke=function(){function Se(ue,ce){return this[me]={t:2,l:ce,A:ce?ce.A:V(),g:!1,R:!1,i:void 0,N:void 0,u:ue,k:this,C:!1,O:!1},this}L(Se,Map);var Te=Se.prototype;return Object.defineProperty(Te,"size",{get:function(){return E(this[me]).size}}),Te.has=function(ue){return E(this[me]).has(ue)},Te.set=function(ue,ce){var be=this[me];return re(be),E(be).has(ue)&&E(be).get(ue)===ce||(W(be),pe(be),be.N.set(ue,!0),be.i.set(ue,ce),be.N.set(ue,!0)),this},Te.delete=function(ue){if(!this.has(ue))return!1;var ce=this[me];return re(ce),W(ce),pe(ce),ce.u.has(ue)?ce.N.set(ue,!1):ce.N.delete(ue),ce.i.delete(ue),!0},Te.clear=function(){var ue=this[me];re(ue),E(ue).size&&(W(ue),pe(ue),ue.N=new Map,i(ue.u,function(ce){ue.N.set(ce,!1)}),ue.i.clear())},Te.forEach=function(ue,ce){var be=this;E(this[me]).forEach(function(ne,de){ue.call(ce,be.get(de),de,be)})},Te.get=function(ue){var ce=this[me];re(ce);var be=E(ce).get(ue);if(ce.R||!t(be)||be!==ce.u.get(ue))return be;var ne=ge(ce.A.h,be,ce);return W(ce),ce.i.set(ue,ne),ne},Te.keys=function(){return E(this[me]).keys()},Te.values=function(){var ue,ce=this,be=this.keys();return(ue={})[He]=function(){return ce.values()},ue.next=function(){var ne=be.next();return ne.done?ne:{done:!1,value:ce.get(ne.value)}},ue},Te.entries=function(){var ue,ce=this,be=this.keys();return(ue={})[He]=function(){return ce.entries()},ue.next=function(){var ne=be.next();if(ne.done)return ne;var de=ce.get(ne.value);return{done:!1,value:[ne.value,de]}},ue},Te[He]=function(){return this.entries()},Se}(),Me=function(){function Se(ue,ce){return this[me]={t:3,l:ce,A:ce?ce.A:V(),g:!1,R:!1,i:void 0,u:ue,k:this,p:new Map,O:!1,C:!1},this}L(Se,Set);var Te=Se.prototype;return Object.defineProperty(Te,"size",{get:function(){return E(this[me]).size}}),Te.has=function(ue){var ce=this[me];return re(ce),ce.i?!!ce.i.has(ue)||!(!ce.p.has(ue)||!ce.i.has(ce.p.get(ue))):ce.u.has(ue)},Te.add=function(ue){var ce=this[me];return re(ce),this.has(ue)||(le(ce),pe(ce),ce.i.add(ue)),this},Te.delete=function(ue){if(!this.has(ue))return!1;var ce=this[me];return re(ce),le(ce),pe(ce),ce.i.delete(ue)||!!ce.p.has(ue)&&ce.i.delete(ce.p.get(ue))},Te.clear=function(){var ue=this[me];re(ue),E(ue).size&&(le(ue),pe(ue),ue.i.clear())},Te.values=function(){var ue=this[me];return re(ue),le(ue),ue.i.values()},Te.entries=function(){var ue=this[me];return re(ue),le(ue),ue.i.entries()},Te.keys=function(){return this.values()},Te[He]=function(){return this.values()},Te.forEach=function(ue,ce){for(var be=this.values(),ne=be.next();!ne.done;)ue.call(ce,ne.value,ne.value,this),ne=be.next()},Se}();N("MapSet",{K:function(Se,Te){return new ke(Se,Te)},$:function(Se,Te){return new Me(Se,Te)}})}var K;Object.defineProperty(Ot,"__esModule",{value:!0});var Q,ie=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Pe=typeof Map<"u",q=typeof Set<"u",De=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",oe=ie?Symbol.for("immer-nothing"):((K={})["immer-nothing"]=!0,K),ze=ie?Symbol.for("immer-draftable"):"__$immer_draftable",me=ie?Symbol.for("immer-state"):"__$immer_state",He=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Le=""+Object.prototype.constructor,it=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:Object.getOwnPropertyNames,Et=Object.getOwnPropertyDescriptors||function(L){var W={};return it(L).forEach(function(le){W[le]=Object.getOwnPropertyDescriptor(L,le)}),W},Je={},ft={get:function(L,W){if(W===me)return L;var le=E(L);if(!a(le,W))return function(Ie,ke,Me){var Se,Te=A(ke,Me);return Te?"value"in Te?Te.value:(Se=Te.get)===null||Se===void 0?void 0:Se.call(Ie.k):void 0}(L,le,W);var re=le[W];return L.R||!t(re)?re:re===U(L.u,W)?(he(L),L.i[W]=ge(L.A.h,re,L)):re},has:function(L,W){return W in E(L)},ownKeys:function(L){return Reflect.ownKeys(E(L))},set:function(L,W,le){var re=A(E(L),W);if(re!=null&&re.set)return re.set.call(L.k,le),!0;if(!L.g){var Ie=U(E(L),W),ke=Ie==null?void 0:Ie[me];if(ke&&ke.u===le)return L.i[W]=le,L.N[W]=!1,!0;if(f(le,Ie)&&(le!==void 0||a(L.u,W)))return!0;he(L),pe(L)}return L.i[W]===le&&(le!==void 0||W in L.i)||Number.isNaN(le)&&Number.isNaN(L.i[W])||(L.i[W]=le,L.N[W]=!0),!0},deleteProperty:function(L,W){return U(L.u,W)!==void 0||W in L.u?(L.N[W]=!1,he(L),pe(L)):delete L.N[W],L.i&&delete L.i[W],!0},getOwnPropertyDescriptor:function(L,W){var le=E(L),re=Reflect.getOwnPropertyDescriptor(le,W);return re&&{writable:!0,configurable:L.t!==1||W!=="length",enumerable:re.enumerable,value:le[W]}},defineProperty:function(){n(11)},getPrototypeOf:function(L){return Object.getPrototypeOf(L.u)},setPrototypeOf:function(){n(12)}},nt={};i(ft,function(L,W){nt[L]=function(){return arguments[0]=arguments[0][0],W.apply(this,arguments)}}),nt.deleteProperty=function(L,W){return nt.set.call(this,L,W,void 0)},nt.set=function(L,W,le){return ft.set.call(this,L[0],W,le,L[0])};var Pt=function(){function L(le){var re=this;this.S=De,this.D=!0,this.produce=function(Ie,ke,Me){if(typeof Ie=="function"&&typeof ke!="function"){var Se=ke;ke=Ie;var Te=re;return function(Oe){var Ke=this;Oe===void 0&&(Oe=Se);for(var Xe=arguments.length,mt=Array(Xe>1?Xe-1:0),_t=1;_t<Xe;_t++)mt[_t-1]=arguments[_t];return Te.produce(Oe,function(qn){var Qt;return(Qt=ke).call.apply(Qt,[Ke,qn].concat(mt))})}}var ue;if(typeof ke!="function"&&n(6),Me!==void 0&&typeof Me!="function"&&n(7),t(Ie)){var ce=fe(re),be=ge(re,Ie,void 0),ne=!0;try{ue=ke(be),ne=!1}finally{ne?ee(ce):$(ce)}return typeof Promise<"u"&&ue instanceof Promise?ue.then(function(Oe){return j(ce,Me),C(Oe,ce)},function(Oe){throw ee(ce),Oe}):(j(ce,Me),C(ue,ce))}if(!Ie||typeof Ie!="object"){if((ue=ke(Ie))===void 0&&(ue=Ie),ue===oe&&(ue=void 0),re.D&&k(ue,!0),Me){var de=[],we=[];S("Patches").M(Ie,ue,de,we),Me(de,we)}return ue}n(21,Ie)},this.produceWithPatches=function(Ie,ke){if(typeof Ie=="function")return function(ue){for(var ce=arguments.length,be=Array(ce>1?ce-1:0),ne=1;ne<ce;ne++)be[ne-1]=arguments[ne];return re.produceWithPatches(ue,function(de){return Ie.apply(void 0,[de].concat(be))})};var Me,Se,Te=re.produce(Ie,ke,function(ue,ce){Me=ue,Se=ce});return typeof Promise<"u"&&Te instanceof Promise?Te.then(function(ue){return[ue,Me,Se]}):[Te,Me,Se]},typeof(le==null?void 0:le.useProxies)=="boolean"&&this.setUseProxies(le.useProxies),typeof(le==null?void 0:le.autoFreeze)=="boolean"&&this.setAutoFreeze(le.autoFreeze)}var W=L.prototype;return W.createDraft=function(le){t(le)||n(8),e(le)&&(le=ve(le));var re=fe(this),Ie=ge(this,le,void 0);return Ie[me].C=!0,$(re),Ie},W.finishDraft=function(le,re){var Ie=(le&&le[me]).A;return j(Ie,re),C(void 0,Ie)},W.setAutoFreeze=function(le){this.D=le},W.setUseProxies=function(le){le&&!De&&n(20),this.S=le},W.applyPatches=function(le,re){var Ie;for(Ie=re.length-1;Ie>=0;Ie--){var ke=re[Ie];if(ke.path.length===0&&ke.op==="replace"){le=ke.value;break}}Ie>-1&&(re=re.slice(Ie+1));var Me=S("Patches").W;return e(le)?Me(le,re):this.produce(le,function(Se){return Me(Se,re)})},L}(),St=new Pt,ot=St.produce,Ft=St.produceWithPatches.bind(St),_n=St.setAutoFreeze.bind(St),jt=St.setUseProxies.bind(St),qe=St.applyPatches.bind(St),lt=St.createDraft.bind(St),pt=St.finishDraft.bind(St);return Ot.Immer=Pt,Ot.applyPatches=qe,Ot.castDraft=function(L){return L},Ot.castImmutable=function(L){return L},Ot.createDraft=lt,Ot.current=ve,Ot.default=ot,Ot.enableAllPlugins=function(){ye(),H(),O()},Ot.enableES5=ye,Ot.enableMapSet=H,Ot.enablePatches=O,Ot.finishDraft=pt,Ot.freeze=k,Ot.immerable=ze,Ot.isDraft=e,Ot.isDraftable=t,Ot.nothing=oe,Ot.original=function(L){return e(L)||n(23,L),L[me].u},Ot.produce=ot,Ot.produceWithPatches=Ft,Ot.setAutoFreeze=_n,Ot.setUseProxies=jt,Ot}var hw;function ND(){return hw||(hw=1,Jf.exports=OD()),Jf.exports}var Rl={},dw;function LD(){return dw||(dw=1,function(n){var e=Rl&&Rl.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(n,"__esModule",{value:!0}),n.cluesInputShapeOriginal=n.clueShapeOriginal=void 0;const t=e(vo()),i={clue:t.default.string.isRequired,answer:t.default.string.isRequired,row:t.default.number.isRequired,col:t.default.number.isRequired};n.clueShapeOriginal=t.default.shape(i),n.cluesInputShapeOriginal=t.default.shape({across:t.default.objectOf(n.clueShapeOriginal.isRequired).isRequired,down:t.default.objectOf(n.clueShapeOriginal.isRequired).isRequired})}(Rl)),Rl}var Xf={},fw;function MD(){return fw||(fw=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findCorrectAnswers=n.deserializeGuesses=n.loadGuesses=n.serializeGuesses=n.saveGuesses=n.clearGuesses=n.byNumber=n.createGridData=n.fillClues=n.createEmptyGrid=n.calculateExtents=n.otherDirection=n.isAcross=n.bothDirections=void 0;const e={across:{primary:"col",orthogonal:"row"},down:{primary:"row",orthogonal:"col"}};n.bothDirections=Object.keys(e);function t(I){return I==="across"}n.isAcross=t;function i(I){return t(I)?"down":"across"}n.otherDirection=i;function o(I,S){const N=e[S];let V=0,j=0;Object.entries(I[S]).forEach(([,$])=>{const fe=$[N.primary]+$.answer.length-1;fe>V&&(V=fe);const b=$[N.orthogonal];b>j&&(j=b)});const ee={row:0,col:0};return ee[N.primary]=V,ee[N.orthogonal]=j,ee}n.calculateExtents=o;function a(I,S){const N=Array(I);for(let V=0;V<I;V++){N[V]=Array(S);for(let j=0;j<S;j++)N[V][j]={row:V,col:j,used:!1}}return N}n.createEmptyGrid=a;function c(I,S,N,V){const j=e[V];Object.entries(N[V]).forEach(([ee,$])=>{const{row:fe,col:b,clue:C,answer:x}=$;for(let D=0;D<x.length;D++){const M=fe+(j.primary==="row"?D:0),U=b+(j.primary==="col"?D:0),A=I[M][U];A.used=!0,A.answer=x[D],A[V]=ee,D===0&&(A.number=ee)}S[V].push({number:ee,clue:C,answer:x,col:b,row:fe})}),S[V].sort(f)}n.fillClues=c;function d(I,S){const N=o(I,"across"),V=o(I,"down");let j=Math.max(N.row,V.row)+1,ee=Math.max(N.col,V.col)+1;if(!S){const b=Math.max(j,ee);j=b,ee=b}const $=a(j,ee),fe={across:[],down:[]};return c($,fe,I,"across"),c($,fe,I,"down"),{rows:j,cols:ee,gridData:$,clues:fe}}n.createGridData=d;function f(I,S){const N=Number.parseInt(I.number,10),V=Number.parseInt(S.number,10);return N-V}n.byNumber=f;function m(I){window.localStorage&&window.localStorage.removeItem(I)}n.clearGuesses=m;function v(I,S){const{localStorage:N}=window;if(!N)return;const V=E(I),j={date:Date.now(),guesses:V};N.setItem(S,JSON.stringify(j))}n.saveGuesses=v;function E(I){return I.reduce((N,V,j)=>V.reduce((ee,$,fe)=>{var b;const{guess:C}=$;return C!==""&&(ee[`${j}_${fe}`]=(b=$.guess)!==null&&b!==void 0?b:""),ee},N),{})}n.serializeGuesses=E;function w(I,S){const{localStorage:N}=window;if(!N)return;const V=N.getItem(S);if(!V)return;const j=JSON.parse(V);k(I,j.guesses)}n.loadGuesses=w;function k(I,S){Object.entries(S).forEach(([N,V])=>{const[j,ee]=N.split("_"),$=parseInt(j,10),fe=parseInt(ee,10);$<=I.length-1&&fe<=I[0].length-1&&(I[$][fe].guess=V)})}n.deserializeGuesses=k;function P(I,S){const N=[];return n.bothDirections.forEach(V=>{const j=t(V);Object.entries(I[V]).forEach(([ee,$])=>{const{row:fe,col:b}=$;let C=!0;for(let x=0;x<$.answer.length;x++){const D=j?fe:fe+x,M=j?b+x:b;if(S[D][M].guess!==$.answer[x]){C=!1;break}}C&&N.push([V,ee,$.answer])})}),N}n.findCorrectAnswers=P}(Xf)),Xf}var pw;function VS(){return pw||(pw=1,function(n){var e=Or&&Or.__createBinding||(Object.create?function(S,N,V,j){j===void 0&&(j=V);var ee=Object.getOwnPropertyDescriptor(N,V);(!ee||("get"in ee?!N.__esModule:ee.writable||ee.configurable))&&(ee={enumerable:!0,get:function(){return N[V]}}),Object.defineProperty(S,j,ee)}:function(S,N,V,j){j===void 0&&(j=V),S[j]=N[V]}),t=Or&&Or.__setModuleDefault||(Object.create?function(S,N){Object.defineProperty(S,"default",{enumerable:!0,value:N})}:function(S,N){S.default=N}),i=Or&&Or.__importStar||function(S){if(S&&S.__esModule)return S;var N={};if(S!=null)for(var V in S)V!=="default"&&Object.prototype.hasOwnProperty.call(S,V)&&e(N,S,V);return t(N,S),N},o=Or&&Or.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(n,"__esModule",{value:!0}),n.crosswordProviderPropTypes=void 0;const a=uo(),c=i(Ur()),d=o(vo()),f=o(ND()),m=za,v=$a(),E=LD(),w=MD(),k="guesses";n.crosswordProviderPropTypes={data:E.cluesInputShapeOriginal.isRequired,theme:d.default.shape({allowNonSquare:d.default.bool,columnBreakpoint:d.default.string,gridBackground:d.default.string,cellBackground:d.default.string,cellBorder:d.default.string,textColor:d.default.string,numberColor:d.default.string,focusBackground:d.default.string,highlightBackground:d.default.string}),useStorage:d.default.bool,storageKey:d.default.string,onAnswerComplete:d.default.func,onAnswerCorrect:d.default.func,onCorrect:d.default.func,onAnswerIncorrect:d.default.func,onLoadedCorrect:d.default.func,onCrosswordComplete:d.default.func,onCrosswordCorrect:d.default.func,onCellChange:d.default.func,onClueSelected:d.default.func,children:d.default.node};const P={allowNonSquare:!1,columnBreakpoint:"768px",gridBackground:"rgb(0,0,0)",cellBackground:"rgb(255,255,255)",cellBorder:"rgb(0,0,0)",textColor:"rgb(0,0,0)",numberColor:"rgba(0,0,0, 0.25)",focusBackground:"rgb(255,255,0)",highlightBackground:"rgb(255,255,204)"},I=c.default.forwardRef(({data:S,theme:N,onAnswerComplete:V,onAnswerCorrect:j,onCorrect:ee,onAnswerIncorrect:$,onLoadedCorrect:fe,onCrosswordComplete:b,onCrosswordCorrect:C,onCellChange:x,onClueSelected:D,useStorage:M,storageKey:U,children:A},pe)=>{const he=(0,c.useContext)(m.ThemeContext),ge=(0,c.useMemo)(()=>Object.assign(Object.assign(Object.assign({},P),he),N),[he,N]),{rows:ve,cols:J,gridData:ye,clues:O}=(0,c.useMemo)(()=>{var ne;return(0,w.createGridData)(S,(ne=ge.allowNonSquare)!==null&&ne!==void 0?ne:!1)},[S,ge.allowNonSquare]),[H,K]=(0,c.useState)([]),[Q,ie]=(0,c.useState)(),Pe=(0,c.useRef)(null),[q,De]=(0,c.useState)(!1),[oe,ze]=(0,c.useState)(0),[me,He]=(0,c.useState)(0),[Le,it]=(0,c.useState)("across"),[Et,Je]=(0,c.useState)("1"),[ft,nt]=(0,c.useState)(null),[Pt,St]=(0,c.useState)([]),ot=(0,c.useCallback)((ne,de)=>ne>=0&&ne<ve&&de>=0&&de<J?H[ne][de]:{row:ne,col:de,used:!1,outOfBounds:!0},[J,H,ve]),Ft=(0,c.useCallback)((ne,de,we)=>{const Oe=ot(ne,de);if(!Oe.used)throw new Error("unexpected setCellCharacter call");Oe.guess!==we&&(K((0,f.default)(Ke=>{Ke[ne][de].guess=we})),St((0,f.default)(Ke=>{Ke.push({row:ne,col:de})})),x&&x(ne,de,we))},[ot,x]),_n=(0,c.useCallback)((ne,de,we,Oe)=>{V&&V(ne,de,we,Oe),we?(j&&j(ne,de,Oe),ee&&ee(ne,de,Oe)):$&&$(ne,de,Oe)},[V,j,$,ee]),jt=(0,c.useCallback)((ne,de)=>{const we=ot(ne,de);if(!we.used)throw new Error("unexpected unused cell");w.bothDirections.forEach(Oe=>{const Ke=(0,w.isAcross)(Oe),Xe=we[Oe];if(!Xe)return;const mt=S[Oe][Xe];let _t=!0,qn=!0;for(let Qt=0;Qt<mt.answer.length;Qt++){const Gn=ot(mt.row+(Ke?0:Qt),mt.col+(Ke?Qt:0));if(!Gn.guess){_t=!1,qn=!1;break}Gn.guess!==Gn.answer&&(qn=!1)}ie((0,f.default)(Qt=>{if(Qt){const Gn=Qt[Oe].find(Ut=>Ut.number===Xe);Gn&&(Gn.complete=_t,Gn.correct=qn)}})),_t&&_n(Oe,Xe,qn,mt.answer)})},[S,ot,_n]);(0,c.useEffect)(()=>{Pt.length!==0&&(Pt.forEach(({row:ne,col:de})=>jt(ne,de)),St([]))},[Pt,jt]);const{crosswordComplete:qe,crosswordCorrect:lt}=(0,c.useMemo)(()=>{const ne=!!(Q&&w.bothDirections.every(we=>Q[we].every(Oe=>Oe.complete))),de=ne&&!!(Q&&w.bothDirections.every(we=>Q[we].every(Oe=>Oe.correct)));return{crosswordComplete:ne,crosswordCorrect:de}},[Q]);(0,c.useEffect)(()=>{qe&&(b&&b(lt),C&&C(lt))},[qe,lt,b,C]);const pt=(0,c.useCallback)(()=>{Pe.current?(Pe.current(),De(!0)):console.warn("CrosswordProvider: focus() has no registered handler to call!")},[]),L=(0,c.useCallback)((ne,de,we)=>{var Oe;let Ke=we??Le;const Xe=ot(ne,de);return Xe.used?(Xe[Ke]||(Ke=(0,w.otherDirection)(Ke)),ze(ne),He(de),it(Ke),Je((Oe=Xe[Ke])!==null&&Oe!==void 0?Oe:""),Xe):!1},[Le,ot]),W=(0,c.useCallback)((ne,de)=>{let we;return ne!==0&&de===0?we="down":ne===0&&de!==0&&(we="across"),L(oe+ne,me+de,we)},[oe,me,L]),le=(0,c.useCallback)(()=>{const ne=(0,w.isAcross)(Le);W(ne?0:1,ne?1:0)},[Le,W]),re=(0,c.useCallback)(()=>{const ne=(0,w.isAcross)(Le);W(ne?0:-1,ne?-1:0)},[Le,W]),Ie=(0,c.useCallback)(ne=>{Ft(oe,me,ne.toUpperCase()),le()},[oe,me,Ft,le]),ke=(0,c.useCallback)(ne=>{var de;if(ne.ctrlKey||ne.altKey||ne.metaKey)return;let we=!0;const{key:Oe}=ne;switch(Oe){case"ArrowUp":W(-1,0);break;case"ArrowDown":W(1,0);break;case"ArrowLeft":W(0,-1);break;case"ArrowRight":W(0,1);break;case" ":case"Tab":{const Ke=(0,w.otherDirection)(Le),Xe=ot(oe,me);Xe[Ke]&&(it(Ke),Je((de=Xe[Ke])!==null&&de!==void 0?de:""));break}case"Backspace":case"Delete":{Ft(oe,me,""),Oe==="Backspace"&&re();break}case"Home":case"End":{const Ke=S[Le][Et],{answer:{length:Xe}}=Ke;let{row:mt,col:_t}=Ke;Oe==="End"&&((0,w.isAcross)(Le)?_t+=Xe-1:mt+=Xe-1),L(mt,_t);break}default:if(Oe.length!==1){we=!1;break}Ie(Oe);break}we&&ne.preventDefault()},[W,Ie,Le,ot,oe,me,Ft,re,S,Et,L]),Me=(0,c.useCallback)(ne=>{ne.preventDefault(),nt(ne.target.value)},[]);(0,c.useEffect)(()=>{ft&&(Ie(ft[0]),nt(ft.length===1?null:ft.substring(1)))},[ft,Ie]),(0,c.useEffect)(()=>{const ne=ye.map(we=>we.map(Oe=>Object.assign({},Oe))),de={across:O.across.map(we=>Object.assign({},we)),down:O.down.map(we=>Object.assign({},we))};M&&(0,w.loadGuesses)(ne,U||k),ie(de),K(ne),M&&St(w.bothDirections.flatMap(we=>de[we].map(({row:Oe,col:Ke})=>({row:Oe,col:Ke})))),ze(0),He(0),it("across"),Je("1")},[O,ye,U,M]),(0,c.useEffect)(()=>{H===null||!M||(0,w.saveGuesses)(H,U||k)},[H,U,M]);const Se=(0,c.useCallback)(ne=>{var de;if(ne.used){const{row:we,col:Oe}=ne,Ke=(0,w.otherDirection)(Le);ze(we),He(Oe);let Xe=Le;(!ne[Le]||q&&we===oe&&Oe===me&&ne[Ke])&&(it(Ke),Xe=Ke),Je((de=ne[Xe])!==null&&de!==void 0?de:"")}pt()},[Le,pt,q,me,oe]),Te=(0,c.useCallback)(()=>{var ne;const de=(0,w.otherDirection)(Le),we=ot(oe,me);let Oe=Le;q&&we[de]&&(it(de),Oe=de),Je((ne=we[Oe])!==null&&ne!==void 0?ne:""),pt()},[Le,pt,q,me,oe,ot]),ue=(0,c.useCallback)((ne,de)=>{const we=Q==null?void 0:Q[ne].find(Oe=>Oe.number===de);we&&(L(we.row,we.col,ne),pt(),D&&D(ne,de))},[Q,pt,L,D]),ce=(0,c.useCallback)(ne=>{Pe.current=ne},[]);(0,c.useImperativeHandle)(pe,()=>({focus:pt,reset:()=>{K((0,f.default)(ne=>{ne.forEach(de=>{de.forEach(we=>{we.used&&(we.guess="")})})})),ie((0,f.default)(ne=>{w.bothDirections.forEach(de=>{var we;(we=ne==null?void 0:ne[de])===null||we===void 0||we.forEach(Oe=>{delete Oe.complete,delete Oe.correct})})})),M&&(0,w.clearGuesses)(U||k)},fillAllAnswers:()=>{if(K((0,f.default)(ne=>{ne.forEach(de=>{de.forEach(we=>{we.used&&(we.guess=we.answer)})})})),ie((0,f.default)(ne=>{w.bothDirections.forEach(de=>{ne==null||ne[de].forEach(we=>{we.complete=!0,we.correct=!0})})})),fe){const ne=[];w.bothDirections.forEach(de=>{Q==null||Q[de].forEach(({number:we,answer:Oe})=>{ne.push([de,we,Oe])})}),fe(ne)}},isCrosswordCorrect:()=>lt,setGuess:(ne,de,we)=>{Ft(ne,de,we.toUpperCase())}}),[Q,lt,pt,fe,Ft,U,M]);const be=(0,c.useMemo)(()=>({rows:ve,cols:J,gridData:H,clues:Q,handleInputKeyDown:ke,handleInputChange:Me,handleCellClick:Se,handleInputClick:Te,handleClueSelected:ue,registerFocusHandler:ce,focused:q,selectedPosition:{row:oe,col:me},selectedDirection:Le,selectedNumber:Et,crosswordCorrect:lt}),[ve,J,H,Q,ke,Me,Se,Te,ue,ce,q,oe,me,Le,Et,lt]);return(0,a.jsx)(m.ThemeProvider,Object.assign({theme:ge},{children:(0,a.jsx)(v.CrosswordContext.Provider,Object.assign({value:be},{children:A}))}))});n.default=I,I.displayName="CrosswordProvider",I.propTypes=n.crosswordProviderPropTypes,I.defaultProps={theme:void 0,useStorage:!0,storageKey:void 0,onAnswerComplete:void 0,onAnswerCorrect:void 0,onCorrect:void 0,onAnswerIncorrect:void 0,onLoadedCorrect:void 0,onCrosswordComplete:void 0,onCrosswordCorrect:void 0,onCellChange:void 0,onClueSelected:void 0,children:void 0}}(Or)),Or}var fr={},mw;function FS(){if(mw)return fr;mw=1;var n=fr&&fr.__createBinding||(Object.create?function(P,I,S,N){N===void 0&&(N=S);var V=Object.getOwnPropertyDescriptor(I,S);(!V||("get"in V?!I.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return I[S]}}),Object.defineProperty(P,N,V)}:function(P,I,S,N){N===void 0&&(N=S),P[N]=I[S]}),e=fr&&fr.__setModuleDefault||(Object.create?function(P,I){Object.defineProperty(P,"default",{enumerable:!0,value:I})}:function(P,I){P.default=I}),t=fr&&fr.__importStar||function(P){if(P&&P.__esModule)return P;var I={};if(P!=null)for(var S in P)S!=="default"&&Object.prototype.hasOwnProperty.call(P,S)&&n(I,P,S);return e(I,P),I},i=fr&&fr.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(fr,"__esModule",{value:!0});const o=uo(),a=Ur(),c=i(vo()),d=t(za),f=i(NS()),m=$a(),v={columnBreakpoint:"768px",gridBackground:"rgb(0,0,0)",cellBackground:"rgb(255,255,255)",cellBorder:"rgb(0,0,0)",textColor:"rgb(0,0,0)",numberColor:"rgba(0,0,0, 0.25)",focusBackground:"rgb(255,255,0)",highlightBackground:"rgb(255,255,204)"},E=d.default.div.attrs(()=>({className:"crossword grid"}))`
  /* position: relative; */
  /* min-width: 20rem; */
  /* max-width: 60rem; Should the size matter? */
  width: auto;
  flex: 2 1 50%;
`,w={theme:c.default.shape({columnBreakpoint:c.default.string,gridBackground:c.default.string,cellBackground:c.default.string,cellBorder:c.default.string,textColor:c.default.string,numberColor:c.default.string,focusBackground:c.default.string,highlightBackground:c.default.string})};function k({theme:P}){const{rows:I,cols:S,gridData:N,handleInputKeyDown:V,handleInputChange:j,handleCellClick:ee,handleInputClick:$,registerFocusHandler:fe,focused:b,selectedPosition:{row:C,col:x},selectedDirection:D,selectedNumber:M}=(0,a.useContext)(m.CrosswordContext),U=(0,a.useRef)(null),A=(0,a.useContext)(d.ThemeContext),pe=(0,a.useCallback)(()=>{var De;(De=U.current)===null||De===void 0||De.focus()},[]);(0,a.useEffect)(()=>(fe(pe),()=>{fe(null)}),[pe,fe]);const he=10,ge=.125,ve=he-ge*2,J=he/2,ye=ve*.7,O=(0,a.useMemo)(()=>({cellSize:he,cellPadding:ge,cellInner:ve,cellHalf:J,fontSize:ye}),[he,ge,ve,J,ye]),H=(0,a.useMemo)(()=>I*he,[I]),K=(0,a.useMemo)(()=>S*he,[S]),Q=(0,a.useMemo)(()=>100/S,[S]),ie=(0,a.useMemo)(()=>100/I,[I]),Pe=(0,a.useMemo)(()=>({position:"absolute",top:`calc(${C*ie*.995}% + 2px)`,left:`calc(${x*Q}% + 2px)`,width:`calc(${Q}% - 4px)`,height:`calc(${ie}% - 4px)`,fontSize:`${ye*6}px`,textAlign:"center",textAnchor:"middle",backgroundColor:"transparent",caretColor:"transparent",margin:0,padding:0,border:0,cursor:"default"}),[Q,ie,C,x,ye]),q=(0,a.useMemo)(()=>Object.assign(Object.assign(Object.assign({},v),A),P),[A,P]);return(0,o.jsx)(m.CrosswordSizeContext.Provider,Object.assign({value:O},{children:(0,o.jsx)(d.ThemeProvider,Object.assign({theme:q},{children:(0,o.jsx)(E,{children:(0,o.jsxs)("div",Object.assign({style:{margin:0,padding:0,position:"relative"}},{children:[(0,o.jsxs)("svg",Object.assign({viewBox:`0 0 ${K} ${H}`},{children:[(0,o.jsx)("rect",{x:0,y:0,width:K,height:H,fill:q.gridBackground}),N.flatMap((De,oe)=>De.map((ze,me)=>ze.used?(0,o.jsx)(f.default,{cellData:ze,focus:b&&oe===C&&me===x,highlight:b&&!!M&&ze[D]===M,onClick:ee},`R${oe}C${me}`):void 0))]})),(0,o.jsx)("input",{ref:U,"aria-label":"crossword-input",type:"text",onClick:$,onKeyDown:V,onChange:j,value:"",autoComplete:"off",spellCheck:"false",autoCorrect:"off",style:Pe})]}))})}))}))}return fr.default=k,k.propTypes=w,k.defaultProps={theme:null},fr}var gw;function VD(){if(gw)return Bn;gw=1;var n=Bn&&Bn.__createBinding||(Object.create?function(I,S,N,V){V===void 0&&(V=N);var j=Object.getOwnPropertyDescriptor(S,N);(!j||("get"in j?!S.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return S[N]}}),Object.defineProperty(I,V,j)}:function(I,S,N,V){V===void 0&&(V=N),I[V]=S[N]}),e=Bn&&Bn.__setModuleDefault||(Object.create?function(I,S){Object.defineProperty(I,"default",{enumerable:!0,value:S})}:function(I,S){I.default=S}),t=Bn&&Bn.__importStar||function(I){if(I&&I.__esModule)return I;var S={};if(I!=null)for(var N in I)N!=="default"&&Object.prototype.hasOwnProperty.call(I,N)&&n(S,I,N);return e(S,I),S},i=Bn&&Bn.__rest||function(I,S){var N={};for(var V in I)Object.prototype.hasOwnProperty.call(I,V)&&S.indexOf(V)<0&&(N[V]=I[V]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,V=Object.getOwnPropertySymbols(I);j<V.length;j++)S.indexOf(V[j])<0&&Object.prototype.propertyIsEnumerable.call(I,V[j])&&(N[V[j]]=I[V[j]]);return N},o=Bn&&Bn.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(Bn,"__esModule",{value:!0});const a=uo(),c=t(Ur()),d=o(vo()),f=o(za),m=t(VS()),v=o(FS()),E=o(MS()),w=f.default.div.attrs(()=>({className:"clues"}))`
  padding: 0 1em;
  flex: 1 2 25%;

  @media (max-width: ${I=>I.theme.columnBreakpoint}) {
    margin-top: 2em;
  }

  .direction {
    margin-bottom: 2em;
    /* padding: 0 1em;
    flex: 1 1 20%; */

    .header {
      margin-top: 0;
      margin-bottom: 0.5em;
    }

    div {
      margin-top: 0.5em;
    }
  }
`,k=Object.assign(Object.assign({},m.crosswordProviderPropTypes),{acrossLabel:d.default.string,downLabel:d.default.string});delete k.children;const P=c.default.forwardRef((I,S)=>{var{acrossLabel:N,downLabel:V}=I,j=i(I,["acrossLabel","downLabel"]);const ee=(0,c.useRef)(null);return(0,c.useImperativeHandle)(S,()=>({focus:()=>{var $;return($=ee.current)===null||$===void 0?void 0:$.focus()},reset:()=>{var $;return($=ee.current)===null||$===void 0?void 0:$.reset()},fillAllAnswers:()=>{var $;return($=ee.current)===null||$===void 0?void 0:$.fillAllAnswers()},isCrosswordCorrect:()=>{var $;return!!(!(($=ee.current)===null||$===void 0)&&$.isCrosswordCorrect())},setGuess:($,fe,b)=>{var C;return(C=ee.current)===null||C===void 0?void 0:C.setGuess($,fe,b)}}),[]),(0,a.jsxs)(m.default,Object.assign({},j,{ref:ee},{children:[(0,a.jsx)(v.default,{}),(0,a.jsxs)(w,{children:[(0,a.jsx)(E.default,{direction:"across",label:N}),(0,a.jsx)(E.default,{direction:"down",label:V})]})]}))});return P.displayName="Crossword",P.propTypes=k,P.defaultProps=Object.assign(Object.assign({},m.default.defaultProps),{acrossLabel:void 0,downLabel:void 0}),Bn.default=P,Bn}var Nr={},yw;function FD(){if(yw)return Nr;yw=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.convertIpuz=Nr.isSupportedIpuz=Nr.isIpuzData=Nr.useIpuz=void 0;const n=Ur(),e="http://ipuz.org",t=`${e}/v`,i=2,o=`${e}/crossword#`,a=1,c={Across:"across",Down:"down"};function d(E){return(0,n.useMemo)(()=>f(E)?m(E)?v(E):(console.error("useIpuz() was not given supported IPUZ data"),null):(console.error("useIpuz() was not given IPUZ data"),null),[E])}Nr.useIpuz=d;function f(E){return!!E&&typeof E=="object"&&"version"in E&&typeof E.version=="string"&&E.version.startsWith(t)}Nr.isIpuzData=f;function m(E){return!(Number.parseInt(E.version.substring(t.length),10)>i||E.kind.length!==1||!E.kind[0].startsWith(o)||Number.parseInt(E.kind[0].substring(o.length),10)>a)}Nr.isSupportedIpuz=m;function v(E){const w=E.puzzle.reduce((P,I,S)=>I.reduce((N,V,j)=>{var ee;const $=typeof V=="object"?(ee=V==null?void 0:V.cell)!==null&&ee!==void 0?ee:-1:V;return N[$.toString()]={row:S,col:j},N},P),{});return Object.fromEntries(Object.entries(E.clues).map(([P,I])=>{const S=I.reduce((N,[V,j])=>{const{row:ee,col:$}=w[V.toString()];let fe="";const b=P==="Across"?0:1,C=P==="Across"?1:0;for(let x=ee,D=$;x<E.dimensions.height&&D<E.dimensions.width;x+=b,D+=C){const M=E.solution[x][D];if(!M||M==="#")break;fe+=M}return N[V.toString()]={clue:j,answer:fe,row:ee,col:$},N},{});return[c[P],S]}))}return Nr.convertIpuz=v,Nr}var vw;function jD(){return vw||(vw=1,function(n){var e=Al&&Al.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(n,"__esModule",{value:!0}),n.useIpuz=n.ThemeProvider=n.CrosswordSizeContext=n.CrosswordContext=n.CrosswordProvider=n.CrosswordGrid=n.Crossword=n.DirectionClues=n.Clue=n.Cell=void 0;const t=za;Object.defineProperty(n,"ThemeProvider",{enumerable:!0,get:function(){return t.ThemeProvider}});const i=e(NS());n.Cell=i.default;const o=e(LS());n.Clue=o.default;const a=e(MS());n.DirectionClues=a.default;const c=e(VD());n.Crossword=c.default;const d=e(FS());n.CrosswordGrid=d.default;const f=e(VS());n.CrosswordProvider=f.default;const m=$a();Object.defineProperty(n,"CrosswordContext",{enumerable:!0,get:function(){return m.CrosswordContext}}),Object.defineProperty(n,"CrosswordSizeContext",{enumerable:!0,get:function(){return m.CrosswordSizeContext}});const v=FD();Object.defineProperty(n,"useIpuz",{enumerable:!0,get:function(){return v.useIpuz}}),n.default=c.default}(Al)),Al}var Mp=jD();const UD=Kl(Mp);var Qc={exports:{}},zD=Qc.exports,_w;function $D(){return _w||(_w=1,function(n,e){(function(t,i){n.exports=i()})(zD,function(){var t=1e3,i=6e4,o=36e5,a="millisecond",c="second",d="minute",f="hour",m="day",v="week",E="month",w="quarter",k="year",P="date",I="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(pe){var he=["th","st","nd","rd"],ge=pe%100;return"["+pe+(he[(ge-20)%10]||he[ge]||he[0])+"]"}},j=function(pe,he,ge){var ve=String(pe);return!ve||ve.length>=he?pe:""+Array(he+1-ve.length).join(ge)+pe},ee={s:j,z:function(pe){var he=-pe.utcOffset(),ge=Math.abs(he),ve=Math.floor(ge/60),J=ge%60;return(he<=0?"+":"-")+j(ve,2,"0")+":"+j(J,2,"0")},m:function pe(he,ge){if(he.date()<ge.date())return-pe(ge,he);var ve=12*(ge.year()-he.year())+(ge.month()-he.month()),J=he.clone().add(ve,E),ye=ge-J<0,O=he.clone().add(ve+(ye?-1:1),E);return+(-(ve+(ge-J)/(ye?J-O:O-J))||0)},a:function(pe){return pe<0?Math.ceil(pe)||0:Math.floor(pe)},p:function(pe){return{M:E,y:k,w:v,d:m,D:P,h:f,m:d,s:c,ms:a,Q:w}[pe]||String(pe||"").toLowerCase().replace(/s$/,"")},u:function(pe){return pe===void 0}},$="en",fe={};fe[$]=V;var b="$isDayjsObject",C=function(pe){return pe instanceof U||!(!pe||!pe[b])},x=function pe(he,ge,ve){var J;if(!he)return $;if(typeof he=="string"){var ye=he.toLowerCase();fe[ye]&&(J=ye),ge&&(fe[ye]=ge,J=ye);var O=he.split("-");if(!J&&O.length>1)return pe(O[0])}else{var H=he.name;fe[H]=he,J=H}return!ve&&J&&($=J),J||!ve&&$},D=function(pe,he){if(C(pe))return pe.clone();var ge=typeof he=="object"?he:{};return ge.date=pe,ge.args=arguments,new U(ge)},M=ee;M.l=x,M.i=C,M.w=function(pe,he){return D(pe,{locale:he.$L,utc:he.$u,x:he.$x,$offset:he.$offset})};var U=function(){function pe(ge){this.$L=x(ge.locale,null,!0),this.parse(ge),this.$x=this.$x||ge.x||{},this[b]=!0}var he=pe.prototype;return he.parse=function(ge){this.$d=function(ve){var J=ve.date,ye=ve.utc;if(J===null)return new Date(NaN);if(M.u(J))return new Date;if(J instanceof Date)return new Date(J);if(typeof J=="string"&&!/Z$/i.test(J)){var O=J.match(S);if(O){var H=O[2]-1||0,K=(O[7]||"0").substring(0,3);return ye?new Date(Date.UTC(O[1],H,O[3]||1,O[4]||0,O[5]||0,O[6]||0,K)):new Date(O[1],H,O[3]||1,O[4]||0,O[5]||0,O[6]||0,K)}}return new Date(J)}(ge),this.init()},he.init=function(){var ge=this.$d;this.$y=ge.getFullYear(),this.$M=ge.getMonth(),this.$D=ge.getDate(),this.$W=ge.getDay(),this.$H=ge.getHours(),this.$m=ge.getMinutes(),this.$s=ge.getSeconds(),this.$ms=ge.getMilliseconds()},he.$utils=function(){return M},he.isValid=function(){return this.$d.toString()!==I},he.isSame=function(ge,ve){var J=D(ge);return this.startOf(ve)<=J&&J<=this.endOf(ve)},he.isAfter=function(ge,ve){return D(ge)<this.startOf(ve)},he.isBefore=function(ge,ve){return this.endOf(ve)<D(ge)},he.$g=function(ge,ve,J){return M.u(ge)?this[ve]:this.set(J,ge)},he.unix=function(){return Math.floor(this.valueOf()/1e3)},he.valueOf=function(){return this.$d.getTime()},he.startOf=function(ge,ve){var J=this,ye=!!M.u(ve)||ve,O=M.p(ge),H=function(ze,me){var He=M.w(J.$u?Date.UTC(J.$y,me,ze):new Date(J.$y,me,ze),J);return ye?He:He.endOf(m)},K=function(ze,me){return M.w(J.toDate()[ze].apply(J.toDate("s"),(ye?[0,0,0,0]:[23,59,59,999]).slice(me)),J)},Q=this.$W,ie=this.$M,Pe=this.$D,q="set"+(this.$u?"UTC":"");switch(O){case k:return ye?H(1,0):H(31,11);case E:return ye?H(1,ie):H(0,ie+1);case v:var De=this.$locale().weekStart||0,oe=(Q<De?Q+7:Q)-De;return H(ye?Pe-oe:Pe+(6-oe),ie);case m:case P:return K(q+"Hours",0);case f:return K(q+"Minutes",1);case d:return K(q+"Seconds",2);case c:return K(q+"Milliseconds",3);default:return this.clone()}},he.endOf=function(ge){return this.startOf(ge,!1)},he.$set=function(ge,ve){var J,ye=M.p(ge),O="set"+(this.$u?"UTC":""),H=(J={},J[m]=O+"Date",J[P]=O+"Date",J[E]=O+"Month",J[k]=O+"FullYear",J[f]=O+"Hours",J[d]=O+"Minutes",J[c]=O+"Seconds",J[a]=O+"Milliseconds",J)[ye],K=ye===m?this.$D+(ve-this.$W):ve;if(ye===E||ye===k){var Q=this.clone().set(P,1);Q.$d[H](K),Q.init(),this.$d=Q.set(P,Math.min(this.$D,Q.daysInMonth())).$d}else H&&this.$d[H](K);return this.init(),this},he.set=function(ge,ve){return this.clone().$set(ge,ve)},he.get=function(ge){return this[M.p(ge)]()},he.add=function(ge,ve){var J,ye=this;ge=Number(ge);var O=M.p(ve),H=function(ie){var Pe=D(ye);return M.w(Pe.date(Pe.date()+Math.round(ie*ge)),ye)};if(O===E)return this.set(E,this.$M+ge);if(O===k)return this.set(k,this.$y+ge);if(O===m)return H(1);if(O===v)return H(7);var K=(J={},J[d]=i,J[f]=o,J[c]=t,J)[O]||1,Q=this.$d.getTime()+ge*K;return M.w(Q,this)},he.subtract=function(ge,ve){return this.add(-1*ge,ve)},he.format=function(ge){var ve=this,J=this.$locale();if(!this.isValid())return J.invalidDate||I;var ye=ge||"YYYY-MM-DDTHH:mm:ssZ",O=M.z(this),H=this.$H,K=this.$m,Q=this.$M,ie=J.weekdays,Pe=J.months,q=J.meridiem,De=function(me,He,Le,it){return me&&(me[He]||me(ve,ye))||Le[He].slice(0,it)},oe=function(me){return M.s(H%12||12,me,"0")},ze=q||function(me,He,Le){var it=me<12?"AM":"PM";return Le?it.toLowerCase():it};return ye.replace(N,function(me,He){return He||function(Le){switch(Le){case"YY":return String(ve.$y).slice(-2);case"YYYY":return M.s(ve.$y,4,"0");case"M":return Q+1;case"MM":return M.s(Q+1,2,"0");case"MMM":return De(J.monthsShort,Q,Pe,3);case"MMMM":return De(Pe,Q);case"D":return ve.$D;case"DD":return M.s(ve.$D,2,"0");case"d":return String(ve.$W);case"dd":return De(J.weekdaysMin,ve.$W,ie,2);case"ddd":return De(J.weekdaysShort,ve.$W,ie,3);case"dddd":return ie[ve.$W];case"H":return String(H);case"HH":return M.s(H,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return ze(H,K,!0);case"A":return ze(H,K,!1);case"m":return String(K);case"mm":return M.s(K,2,"0");case"s":return String(ve.$s);case"ss":return M.s(ve.$s,2,"0");case"SSS":return M.s(ve.$ms,3,"0");case"Z":return O}return null}(me)||O.replace(":","")})},he.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},he.diff=function(ge,ve,J){var ye,O=this,H=M.p(ve),K=D(ge),Q=(K.utcOffset()-this.utcOffset())*i,ie=this-K,Pe=function(){return M.m(O,K)};switch(H){case k:ye=Pe()/12;break;case E:ye=Pe();break;case w:ye=Pe()/3;break;case v:ye=(ie-Q)/6048e5;break;case m:ye=(ie-Q)/864e5;break;case f:ye=ie/o;break;case d:ye=ie/i;break;case c:ye=ie/t;break;default:ye=ie}return J?ye:M.a(ye)},he.daysInMonth=function(){return this.endOf(E).$D},he.$locale=function(){return fe[this.$L]},he.locale=function(ge,ve){if(!ge)return this.$L;var J=this.clone(),ye=x(ge,ve,!0);return ye&&(J.$L=ye),J},he.clone=function(){return M.w(this.$d,this)},he.toDate=function(){return new Date(this.valueOf())},he.toJSON=function(){return this.isValid()?this.toISOString():null},he.toISOString=function(){return this.$d.toISOString()},he.toString=function(){return this.$d.toUTCString()},pe}(),A=U.prototype;return D.prototype=A,[["$ms",a],["$s",c],["$m",d],["$H",f],["$W",m],["$M",E],["$y",k],["$D",P]].forEach(function(pe){A[pe[1]]=function(he){return this.$g(he,pe[0],pe[1])}}),D.extend=function(pe,he){return pe.$i||(pe(he,U,D),pe.$i=!0),D},D.locale=x,D.isDayjs=C,D.unix=function(pe){return D(1e3*pe)},D.en=fe[$],D.Ls=fe,D.p={},D})}(Qc)),Qc.exports}var BD=$D();const ns=Kl(BD),yn=[];for(let n=0;n<256;++n)yn.push((n+256).toString(16).slice(1));function WD(n,e=0){return(yn[n[e+0]]+yn[n[e+1]]+yn[n[e+2]]+yn[n[e+3]]+"-"+yn[n[e+4]]+yn[n[e+5]]+"-"+yn[n[e+6]]+yn[n[e+7]]+"-"+yn[n[e+8]]+yn[n[e+9]]+"-"+yn[n[e+10]]+yn[n[e+11]]+yn[n[e+12]]+yn[n[e+13]]+yn[n[e+14]]+yn[n[e+15]]).toLowerCase()}let Zf;const HD=new Uint8Array(16);function qD(){if(!Zf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zf=crypto.getRandomValues.bind(crypto)}return Zf(HD)}const GD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ww={randomUUID:GD};function jS(n,e,t){var o;if(ww.randomUUID&&!n)return ww.randomUUID();n=n||{};const i=n.random??((o=n.rng)==null?void 0:o.call(n))??qD();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,WD(i)}function KD(){const[n,e]=G.useState([]),[t,i]=G.useState(!1),o=Yl(),{user:a}=yo(),[c,d]=G.useState(""),[f,m]=G.useState(""),[v,E]=G.useState(""),[w,k]=G.useState(""),[P,I]=G.useState(""),[S,N]=G.useState("");G.useEffect(()=>{async function A(){i(!0);try{const pe=await ao(ws(Kt,"fullPuzzles"));e(pe.docs.map(he=>({id:he.id,...he.data()})))}catch{}i(!1)}A()},[]);async function V(A){if(a)try{const pe=qh(ws(Kt,"premadeProgress"),Aa("userId","==",a.uid),Aa("fullPuzzleId","==",A.id)),he=await ao(pe);let ge;he.empty?ge=jS():ge=he.docs[0].id;const ve=[];await hu(kn(Kt,"premadeProgress",ge),{userId:a.uid,fullPuzzleId:A.id,gridData:ve,lastSaved:Ht.now()})}catch{}}function j(A){V(A),sessionStorage.setItem("selectedFullPuzzle",JSON.stringify(A)),o(`/crossworder/fullpuzzle/${A.id}`)}function ee(A){if(A.year)return Number(A.year);if(A.date)return ns(A.date).year();if(A.dateCreated)return ns(A.dateCreated).year()}function $(A){const pe=ee(A);return pe?Math.floor(pe/10)*10:void 0}function fe(A){m(A.target.value),A.target.value&&(E(""),k(""),I(""))}function b(A){E(A.target.value),A.target.value&&(m(""),k(""),I(""))}function C(A){k(A.target.value),A.target.value&&(m(""),E(""))}function x(A){I(A.target.value),A.target.value&&(m(""),E(""))}const D=n.filter(A=>{if(c&&!(A.title||"").toLowerCase().includes(c.toLowerCase())||f&&ee(A)!==Number(f)||v&&$(A)!==Number(v)||w&&ns(A.dateCreated||A.date).isBefore(ns(w))||P&&ns(A.dateCreated||A.date).isAfter(ns(P)))return!1;if(S){const pe=ns(A.dateCreated||A.date);if(!pe.isValid()||pe.format("dddd")!==S)return!1}return!0}),M=Array.from(new Set(n.map(ee).filter(Boolean))).sort((A,pe)=>pe-A),U=Array.from(new Set(n.map($).filter(Boolean))).sort((A,pe)=>pe-A);return Y.jsx("div",{className:"dashboard-container fade-in",style:{flexDirection:"column",alignItems:"stretch",minHeight:"80vh"},children:Y.jsxs("div",{className:"dashboard-section",style:{marginBottom:0,maxWidth:1100,margin:"0 auto",width:"100%"},children:[Y.jsx("h2",{style:{fontSize:"2.2em",marginBottom:0},children:"Pre-made Crossword Puzzles"}),Y.jsx("hr",{}),Y.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:16,alignItems:"flex-end",marginBottom:24,justifyContent:"space-between"},children:[Y.jsx("div",{style:{flex:"1 1 200px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Title",Y.jsx("br",{}),Y.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),placeholder:"Search by title...",style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"}})]})}),Y.jsx("div",{style:{flex:"1 1 120px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Year",Y.jsx("br",{}),Y.jsxs("select",{value:f,onChange:fe,style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"},children:[Y.jsx("option",{value:"",children:"All"}),M.map(A=>Y.jsx("option",{value:A,children:A},A))]})]})}),Y.jsx("div",{style:{flex:"1 1 120px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Decade",Y.jsx("br",{}),Y.jsxs("select",{value:v,onChange:b,style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"},children:[Y.jsx("option",{value:"",children:"All"}),U.map(A=>Y.jsxs("option",{value:A,children:[A,"s"]},A))]})]})}),Y.jsx("div",{style:{flex:"1 1 180px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Date From",Y.jsx("br",{}),Y.jsx("input",{type:"date",value:w,onChange:C,style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"}})]})}),Y.jsx("div",{style:{flex:"1 1 180px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Date To",Y.jsx("br",{}),Y.jsx("input",{type:"date",value:P,onChange:x,style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"}})]})}),Y.jsx("div",{style:{flex:"1 1 140px"},children:Y.jsxs("label",{style:{fontWeight:600},children:["Weekday",Y.jsx("br",{}),Y.jsxs("select",{value:S,onChange:A=>N(A.target.value),style:{width:"100%",fontSize:"1.1em",padding:6,borderRadius:6,border:"1px solid #ccc"},children:[Y.jsx("option",{value:"",children:"All"}),Y.jsx("option",{value:"Monday",children:"Monday"}),Y.jsx("option",{value:"Tuesday",children:"Tuesday"}),Y.jsx("option",{value:"Wednesday",children:"Wednesday"}),Y.jsx("option",{value:"Thursday",children:"Thursday"}),Y.jsx("option",{value:"Friday",children:"Friday"}),Y.jsx("option",{value:"Saturday",children:"Saturday"}),Y.jsx("option",{value:"Sunday",children:"Sunday"})]})]})})]}),Y.jsx("div",{style:{overflowX:"auto"},children:t?Y.jsx("div",{children:"Loading full puzzles..."}):Y.jsxs(Y.Fragment,{children:[D.length===0&&Y.jsx("div",{children:"No pre-made puzzles match your search."}),D.length>0&&Y.jsx("ul",{style:{paddingLeft:0,listStyle:"none",margin:0},children:D.map(A=>Y.jsxs("li",{style:{marginBottom:12,display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Y.jsx("span",{style:{fontWeight:600,fontSize:"1.1em",flex:"2 1 200px"},children:A.title||A.id}),A.dateCreated||A.date?Y.jsx("span",{style:{marginLeft:12,color:"#645e4f",fontSize:"0.95em",flex:"1 1 100px"},children:ns(A.dateCreated||A.date).format("MM-DD-YYYY")}):null,Y.jsx("button",{style:{marginLeft:12,flex:"0 0 auto"},onClick:()=>j(A),children:"Load"})]},A.id))})]})}),Y.jsx("button",{style:{marginTop:32},onClick:()=>o("/crossworder/"),children:"Back to Dashboard"})]})})}const QD={gridBackground:"#222222",cellBackground:"#f6f6f6",cellBorder:"#121212",textColor:"#000000",numberColor:"#121212"};function YD(){const{puzzleId:n}=xw(),{user:e}=yo(),[t,i]=G.useState(!1),[o,a]=G.useState(null),[c,d]=G.useState(null),[f,m]=G.useState(null),[v,E]=G.useState(!0),[w,k]=G.useState(null),[P,I]=G.useState(0),[S,N]=G.useState([]),V=rr.useRef(null);G.useEffect(()=>{async function b(){if(n){E(!0);try{const C=await oo(kn(Kt,"fullPuzzles",n));C.exists()?m(C.data()):console.error("Puzzle not found in database:",n)}catch(C){console.error("Error fetching puzzle:",C)}finally{E(!1)}}}b()},[n]),G.useEffect(()=>{async function b(){if(!(!e||!n))try{const C=qh(ws(Kt,"premadeProgress"),Aa("userId","==",e.uid),Aa("fullPuzzleId","==",n)),x=await ao(C);if(!x.empty){const D=x.docs[0];k(D.id);const M=D.data().gridData||[];N(M)}}catch(C){console.error("Error fetching progress:",C)}}b()},[e,n]),G.useEffect(()=>{if(!v&&f&&S.length>0){const b=setTimeout(()=>{V.current&&V.current.setGuess&&S.forEach(C=>{try{V.current.setGuess(C.row,C.col,C.letter)}catch(x){console.error("Error restoring cell:",x)}})},1500);return()=>clearTimeout(b)}},[v,f,S]);const j=G.useCallback(async()=>{if(!(!e||!n||!f))try{i(!0),d(null);const b=S;let C=w;C||(C=jS(),k(C));const x=Ht.now();await hu(kn(Kt,"premadeProgress",C),{userId:e.uid,fullPuzzleId:n,gridData:b,lastSaved:x}),a(x.toDate()),I(D=>D+1)}catch(b){console.error("Error saving progress:",b),d(b.message||"Failed to save progress")}finally{i(!1)}},[e,n,f,S,w]),ee=(b,C,x)=>{N(D=>{const M=D.filter(U=>!(U.row===b&&U.col===C));return x&&x.trim()!==""&&M.push({row:b,col:C,letter:x}),M}),clearTimeout(window.savePuzzleTimeout),window.savePuzzleTimeout=setTimeout(()=>{try{j()}catch(D){console.error("Error in delayed save:",D)}},500)},$=G.useCallback(()=>{const b=()=>{S.length>0&&V.current&&V.current.setGuess&&S.forEach(C=>{try{V.current.setGuess(C.row,C.col,C.letter)}catch(x){console.error("Error restoring cell:",x)}})};S.length>0&&V.current&&(setTimeout(b,500),setTimeout(b,1500))},[S]);if(v)return Y.jsx("div",{children:"Loading puzzle..."});if(!f)return Y.jsx("div",{children:"Puzzle not found. Please return to the dashboard and select a puzzle."});const fe=f.data||f;return Y.jsxs("div",{style:{maxWidth:800,margin:"0 auto",padding:24},children:["      ",Y.jsx("h2",{children:f.title||"Pre-made Puzzle"}),Y.jsx(Mp.ThemeProvider,{theme:QD,children:Y.jsx(Mp.Crossword,{ref:V,data:fe,onCellChange:ee,onCrosswordComplete:()=>{},onReady:$,gridData:S.reduce((b,C)=>(b[`${C.row}_${C.col}`]=C.letter,b),{}),useStorage:!1,storageKey:null})}),t&&Y.jsx("div",{style:{fontSize:"0.9em",color:"#fff",background:"#4c7daf",padding:"8px 16px",position:"fixed",bottom:"20px",right:"20px",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:"Saving progress..."}),Y.jsxs("div",{style:{marginTop:10,display:"flex",gap:"10px"},children:[Y.jsx("button",{onClick:()=>{j()},style:{padding:"8px 15px",backgroundColor:"#4c7daf",color:"white",border:"none",borderRadius:"4px"},children:"Save Progress Now"}),Y.jsx("button",{onClick:()=>{S.length>0&&V.current&&S.forEach(b=>{try{V.current&&V.current.setGuess&&V.current.setGuess(b.row,b.col,b.letter)}catch(C){console.error("Error restoring cell:",C)}})},style:{padding:"8px 15px",backgroundColor:"#3c5c73",color:"white",border:"none",borderRadius:"4px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"Manually Restore Letters"})]})]})}function JD(){const{user:n,logout:e}=yo(),[t,i]=G.useState(!0),[o,a]=G.useState(!1),[c,d]=G.useState([]),f=Yl();G.useEffect(()=>{async function v(){if(i(!0),n){const E=qh(ws(Kt,"premadeProgress"),Aa("userId","==",n.uid));let k=(await ao(E)).docs.map(I=>({...I.data(),id:I.id}));const P={};await Promise.all(k.map(async I=>{if(I.fullPuzzleId){const S=await oo(kn(Kt,"fullPuzzles",I.fullPuzzleId));P[I.fullPuzzleId]=S.exists()&&S.data().title||I.fullPuzzleId}})),k=k.map(I=>({...I,title:P[I.fullPuzzleId]||I.fullPuzzleId})),d(k.sort((I,S)=>{var N,V,j,ee;return new Date(((V=(N=S.lastSaved)==null?void 0:N.toDate)==null?void 0:V.call(N))||S.lastSaved)-new Date(((ee=(j=I.lastSaved)==null?void 0:j.toDate)==null?void 0:ee.call(j))||I.lastSaved)}))}i(!1)}n&&v()},[n]);const m=async()=>{a(!0);try{await e()}finally{a(!1)}};return t?Y.jsx("div",{children:"Loading..."}):o?Y.jsx("div",{children:"Logging out..."}):Y.jsx("div",{className:"dashboard-container fade-in",children:Y.jsxs("div",{className:"dashboard-section",style:{marginBottom:0},children:[Y.jsxs("h2",{style:{fontSize:"2.2em",marginBottom:0},children:["Welcome, ",n==null?void 0:n.email]}),c.length>0&&Y.jsxs("div",{style:{margin:"1.5em 0"},children:[Y.jsx("h3",{children:"Your Pre-made Puzzle Progress"}),Y.jsx("ul",{style:{listStyle:"none",padding:0},children:c.map(v=>Y.jsxs("li",{style:{marginBottom:10,display:"flex",alignItems:"center"},children:[Y.jsx("span",{style:{fontWeight:600,flex:2},children:v.title||v.fullPuzzleId}),Y.jsx("span",{style:{marginLeft:12,color:"#645e4f",fontSize:"0.95em",flex:1},children:v.lastSaved?v.lastSaved.toDate?v.lastSaved.toDate().toLocaleString():new Date(v.lastSaved).toLocaleString():""}),Y.jsx("button",{style:{marginLeft:12},onClick:()=>f(`/crossworder/fullpuzzle/${v.fullPuzzleId}`),children:"Continue"})]},v.fullPuzzleId))})]}),Y.jsx("div",{children:Y.jsx("button",{onClick:()=>f("/crossworder/premade"),children:"Load Pre-made Crossword Puzzle"})}),Y.jsxs("div",{style:{margin:"1.5em 0"},children:[Y.jsx("button",{onClick:m,children:"Log out"}),(n==null?void 0:n.admin)&&Y.jsx("button",{style:{marginLeft:16},onClick:()=>f("/crossworder/admin"),children:"Admin"})]})]})})}function XD(){return Y.jsxs(Ow,{children:[Y.jsx(os,{path:"/",element:Y.jsx(JD,{})}),Y.jsx(os,{path:"/premade",element:Y.jsx(KD,{})}),Y.jsx(os,{path:"/fullpuzzle/:puzzleId",element:Y.jsx(YD,{})})]})}async function ZD(){const n=ws(Kt,"wordSets");return(await ao(n)).docs.map(t=>({id:t.id,...t.data()}))}async function eO(n){const e=kn(Kt,"users",n),t=await oo(e);return t.exists()?t.data().savedPuzzles||[]:[]}async function tO(n){const e=ws(Kt,"wordSets"),t=kn(e);await hu(t,{...n,words:[]})}async function nO(n,e){const t=kn(Kt,"wordSets",n);await Ra(t,e)}async function rO(n){const e=kn(Kt,"wordSets",n);await _S(e)}async function iO(n,e){const t=kn(Kt,"wordSets",n);await Ra(t,{words:Vm(e)})}async function sO(n,e,t){const i=kn(Kt,"wordSets",n);await Ra(i,{words:Fm(e)}),await Ra(i,{words:Vm(t)})}async function oO(n,e){const t=kn(Kt,"wordSets",n);await Ra(t,{words:Fm(e)})}const Ys=ZD;function aO(n){const e=new Set;return n?(n.forEach(t=>{for(let i=0;i<t.answer.length;i++){let o=t.row,a=t.col;t.direction==="across"?a+=i:o+=i,e.add(`${o}_${a}`)}}),e.size):0}function lO(){console.log("PuzzleView rendering");const{user:n}=yo(),{puzzleId:e}=xw(),[t,i]=G.useState(null),[o,a]=G.useState(!0),[c,d]=G.useState(null);G.useEffect(()=>{async function w(){console.log("Loading puzzle",e,"for user",n.uid),a(!0);const P=(await eO(n.uid)).find(I=>I.id===e);if(i(P||null),P&&n){const I=kn(Kt,"users",n.uid),S=await oo(I);if(console.log("User doc from Firestore:",S.exists()?"exists":"does not exist"),S.exists()&&S.data().premadeProgress){const N=S.data().premadeProgress.find(V=>V.puzzleId===e);console.log("Saved progress found?",!!N),N&&N.gridData&&(console.log("Loading saved grid data with",Object.keys(N.gridData).length,"cells"),P.savedGridData=N.gridData)}}a(!1)}n&&e&&w()},[n,e]);const f=()=>{t&&t.savedGridData?(console.log("%c MANUAL SAVE TRIGGERED","background: #ff5722; color: white; font-weight: bold;"),m(t,t.savedGridData)):console.error("Cannot manually save - no puzzle or grid data available")};async function m(w,k){if(!(!n||!w)){d(new Date().toISOString());try{const P=kn(Kt,"users",n.uid),I=await oo(P);let S=[];I.exists()&&I.data().premadeProgress&&(S=I.data().premadeProgress.filter($=>$.puzzleId!==w.id));const N=aO(w.layout.entries),V=Array.isArray(k)?k.length:0,j=N===0?0:Math.round(V/N*100),ee={puzzleId:w.id,title:w.title||"Untitled Puzzle",percentComplete:j,lastAccessed:new Date().toISOString(),gridData:Array.isArray(k)?k:[]};S.push(ee),await hu(P,{premadeProgress:S},{merge:!0})}catch(P){console.error("Error saving progress to Firestore:",P)}}}function v(w,k,P){if(!t||!n)return;let I=Array.isArray(t.savedGridData)?[...t.savedGridData]:[];I=I.filter(S=>!(S.row===w&&S.col===k)),P&&String(P).trim()!==""&&I.push({letter:P,row:w,col:k}),t.savedGridData=I,m(t,I)}if(G.useEffect(()=>{if(t&&Array.isArray(t.savedGridData)){const w={};t.savedGridData.forEach(k=>{k.row!==void 0&&k.col!==void 0&&k.letter&&(w[`${k.row}_${k.col}`]=k.letter)}),t.savedGridData=w}},[t]),o)return Y.jsx("div",{children:"Loading puzzle..."});if(!t)return Y.jsx("div",{children:"Puzzle not found."});const E={across:{},down:{}};return t.layout.entries.forEach(w=>{const k=w.direction==="across"?"across":"down";E[k][w.number]={answer:w.answer,clue:w.clue,row:w.row,col:w.col}}),Y.jsxs("div",{className:"crossword-area fade-in",children:[Y.jsxs("div",{style:{border:"1px solid #ddd",padding:"10px",marginBottom:"10px"},children:[Y.jsxs("div",{children:["Puzzle ID: ",t==null?void 0:t.id]}),Y.jsxs("div",{children:["User ID: ",n==null?void 0:n.uid]}),Y.jsxs("div",{children:["Grid cells: ",t!=null&&t.savedGridData?Object.keys(t.savedGridData).length:0]}),c&&Y.jsxs("div",{style:{fontWeight:"bold",color:"green"},children:["Last saved: ",new Date(c).toLocaleTimeString()]}),Y.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px"},children:[Y.jsx("button",{onClick:f,style:{padding:"8px 12px",fontSize:"1em",background:"#4285f4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save Progress"}),Y.jsx("button",{onClick:()=>alert("User: "+((n==null?void 0:n.uid)||"none")+", Puzzle: "+((t==null?void 0:t.id)||"none")),style:{padding:"8px 12px",fontSize:"1em",background:"#ea4335",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Check Data"})]})]}),Y.jsxs("div",{className:"crossword-board",style:{margin:"0 auto"},children:[Y.jsx("button",{onClick:()=>alert("Testing if alerts work"),style:{marginBottom:"10px",padding:"10px",background:"red",color:"white",border:"none"},children:"Test Alert"}),Y.jsx(UD,{data:E,onCellChange:v,gridData:t.savedGridData,useStorage:!1})]}),Y.jsxs("div",{className:"clues-area",children:[Y.jsx("h3",{children:"Across"}),Y.jsx("ul",{className:"clues-list",children:Object.entries(E.across).map(([w,k])=>Y.jsxs("li",{children:[Y.jsxs("strong",{children:[w,"."]})," ",k.clue]},w))}),Y.jsx("h3",{children:"Down"}),Y.jsx("ul",{className:"clues-list",children:Object.entries(E.down).map(([w,k])=>Y.jsxs("li",{children:[Y.jsxs("strong",{children:[w,"."]})," ",k.clue]},w))})]})]})}const uO="modulepreload",cO=function(n){return"/crossworder/"+n},Ew={},Sw=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=c(t.map(m=>{if(m=cO(m),m in Ew)return;Ew[m]=!0;const v=m.endsWith(".css"),E=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":uO,v||(w.as="script"),w.crossOrigin="",w.href=m,f&&w.setAttribute("nonce",f),document.head.appendChild(w),v)return new Promise((k,P)=>{w.addEventListener("load",k),w.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function hO(){const[n,e]=G.useState([]),[t,i]=G.useState(!0),[o,a]=G.useState(""),[c,d]=G.useState(""),[f,m]=G.useState(1),[v,E]=G.useState([]),[w,k]=G.useState(!1);G.useEffect(()=>{async function H(){i(!0);try{const Q=await Ys();e(Q)}catch{a("Failed to load word sets")}i(!1)}H();async function K(){k(!0);try{const Q=await ao(ws(Kt,"fullPuzzles"));E(Q.docs.map(ie=>({id:ie.id,...ie.data()})))}catch{a("Failed to load full puzzles")}k(!1)}K()},[]);const P=async()=>{if(c){i(!0);try{await tO({name:c,weighting:f}),d(""),m(1);const H=await Ys();e(H)}catch{a("Failed to add word set")}i(!1)}},I=async(H,K,Q)=>{i(!0);try{await nO(H,{name:K,weighting:Q});const ie=await Ys();e(ie)}catch{a("Failed to update word set")}i(!1)},S=async H=>{if(window.confirm("Delete this word set? This cannot be undone.")){i(!0);try{await rO(H);const K=await Ys();e(K)}catch{a("Failed to delete word set")}i(!1)}},N=async(H,K,Q)=>{i(!0);try{await iO(H,{word:K,clue:Q});const ie=await Ys();e(ie)}catch{a("Failed to add word")}i(!1)},V=async(H,K,Q,ie)=>{i(!0);try{await sO(H,K,{word:Q,clue:ie});const Pe=await Ys();e(Pe)}catch{a("Failed to update word")}i(!1)},j=async(H,K)=>{if(window.confirm("Delete this word?")){i(!0);try{await oO(H,K);const Q=await Ys();e(Q)}catch{a("Failed to delete word")}i(!1)}},ee=async H=>{const K=Array.from(H.target.files);i(!0);try{for(const Q of K){const ie=await Q.text();let Pe;try{Pe=JSON.parse(ie)}catch{a(`Invalid JSON in file: ${Q.name}`);continue}const{getFirestore:q,collection:De,addDoc:oe}=await Sw(async()=>{const{getFirestore:me,collection:He,addDoc:Le}=await Promise.resolve().then(()=>Rb);return{getFirestore:me,collection:He,addDoc:Le}},[]),{db:ze}=await Sw(async()=>{const{db:me}=await Promise.resolve().then(()=>xb);return{db:me}},void 0);await oe(De(ze,"fullPuzzles"),Pe)}a(""),alert("Puzzles uploaded successfully!")}catch{a("Failed to upload puzzles")}i(!1)},[$,fe]=G.useState(null),[b,C]=G.useState(""),[x,D]=G.useState(1),[M,U]=G.useState(""),[A,pe]=G.useState(""),[he,ge]=G.useState(null),[ve,J]=G.useState(""),[ye,O]=G.useState("");return t?Y.jsx("div",{children:"Loading..."}):o?Y.jsx("div",{children:o}):Y.jsxs("div",{children:[Y.jsx("h2",{children:"Admin: Manage Word Sets"}),Y.jsxs("div",{children:[Y.jsx("input",{type:"text",placeholder:"New set name",value:c??"",onChange:H=>d(H.target.value)}),Y.jsx("input",{type:"number",min:1,max:100,value:f??1,onChange:H=>m(Number(H.target.value))}),Y.jsx("button",{onClick:P,children:"Add Word Set"})]}),Y.jsx("hr",{}),n.map(H=>Y.jsxs("div",{style:{border:"1px solid #ccc",margin:"1em 0",padding:"1em"},children:[$===H.id?Y.jsxs("div",{children:[Y.jsx("input",{type:"text",value:b??"",onChange:K=>C(K.target.value)}),Y.jsx("input",{type:"number",min:1,max:100,value:x??1,onChange:K=>D(Number(K.target.value))}),Y.jsx("button",{onClick:()=>{I(H.id,b,x),fe(null)},children:"Save"}),Y.jsx("button",{onClick:()=>fe(null),children:"Cancel"})]}):Y.jsxs("div",{children:[Y.jsx("b",{children:H.name})," (weight: ",H.weighting,")",Y.jsx("button",{onClick:()=>{fe(H.id),C(H.name),D(H.weighting)},children:"Edit"}),Y.jsx("button",{onClick:()=>S(H.id),children:"Delete"})]}),Y.jsxs("div",{style:{marginTop:"1em"},children:[Y.jsx("h4",{children:"Words/Clues"}),Y.jsx("ul",{children:(H.words||[]).map((K,Q)=>Y.jsx("li",{children:he===`${H.id}-${Q}`?Y.jsxs(Y.Fragment,{children:[Y.jsx("input",{type:"text",value:ve??"",onChange:ie=>J(ie.target.value),placeholder:"Word"}),Y.jsx("input",{type:"text",value:ye??"",onChange:ie=>O(ie.target.value),placeholder:"Clue"}),Y.jsx("button",{onClick:()=>{V(H.id,K,ve,ye),ge(null)},children:"Save"}),Y.jsx("button",{onClick:()=>ge(null),children:"Cancel"})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("b",{children:K.word}),": ",K.clue,Y.jsx("button",{onClick:()=>{ge(`${H.id}-${Q}`),J(K.word),O(K.clue)},children:"Edit"}),Y.jsx("button",{onClick:()=>j(H.id,K),children:"Delete"})]})},Q))}),Y.jsxs("div",{children:[Y.jsx("input",{type:"text",placeholder:"New word",value:M??"",onChange:K=>U(K.target.value)}),Y.jsx("input",{type:"text",placeholder:"New clue",value:A??"",onChange:K=>pe(K.target.value)}),Y.jsx("button",{onClick:()=>{N(H.id,M,A),U(""),pe("")},children:"Add Word"})]})]})]},H.id)),Y.jsx("hr",{}),Y.jsxs("div",{children:[Y.jsx("h3",{children:"Upload Full Crossword Puzzles (JSON)"}),Y.jsx("input",{type:"file",accept:"application/json",multiple:!0,onChange:ee})]})]})}function dO(){return Y.jsx(bb,{children:Y.jsx(hI,{children:Y.jsxs(Ow,{children:[Y.jsx(os,{path:"/crossworder/login",element:Y.jsx(Ob,{})}),Y.jsx(os,{path:"/crossworder/admin",element:Y.jsx(Db,{children:Y.jsx(hO,{})})}),Y.jsx(os,{path:"/crossworder/puzzle/:puzzleId",element:Y.jsx(B_,{children:Y.jsx(lO,{})})}),Y.jsx(os,{path:"/crossworder/*",element:Y.jsx(B_,{children:Y.jsx(XD,{})})})]})})})}JT.createRoot(document.getElementById("root")).render(Y.jsx(G.StrictMode,{children:Y.jsx(dO,{})}));
